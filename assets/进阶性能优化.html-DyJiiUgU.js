import{_ as n,c as s,o as a,a as e}from"./app-DVMZDNEl.js";const p="/images/s_poetries_work_gitee_2020_07_performance_1.png",t="/images/s_poetries_work_gitee_2020_07_performance_2.png",o="/images/s_poetries_work_gitee_2020_07_performance_3.png",c="/images/s_poetries_work_gitee_2020_09_109.png",l="/images/s_poetries_work_gitee_2020_09_110.png",i="/images/s_poetries_work_gitee_2020_07_performance_4.png",r="/images/s_poetries_work_gitee_2020_07_performance_5.png",u="/images/s_poetries_work_gitee_2020_07_performance_6.png",d="/images/s_poetries_work_gitee_2020_07_performance_7.png",k="/images/s_poetries_work_gitee_2020_07_performance_8.png",m="/images/s_poetries_work_gitee_2020_07_performance_9.png",v="/images/s_poetries_work_gitee_2020_07_performance_10.png",g="/images/s_poetries_work_gitee_2020_07_performance_11.png",b="/images/s_poetries_work_gitee_2020_07_performance_12.png",h="/images/s_poetries_work_gitee_2020_07_performance_13.png",_="/images/s_poetries_work_gitee_2020_07_performance_14.png",f="/images/s_poetries_work_gitee_2020_07_performance_15.png",q="/images/s_poetries_work_gitee_2020_07_performance_16.png",y="/images/s_poetries_work_gitee_2020_07_performance_17.png",w="/images/s_poetries_work_gitee_2020_07_performance_18.png",S="/images/s_poetries_work_gitee_2020_07_performance_19.png",j="/images/s_poetries_work_gitee_2020_07_performance_20.png",x="/images/s_poetries_work_gitee_2020_07_performance_21.png",C="/images/s_poetries_work_gitee_2020_07_performance_22.png",M="/images/s_poetries_work_gitee_2020_07_performance_23.png",D="/images/s_poetries_work_gitee_2020_07_performance_24.png",P="/images/s_poetries_work_gitee_2020_07_performance_25.png",T="/images/s_poetries_work_gitee_2020_07_performance_26.png",O="/images/s_poetries_work_gitee_2020_07_performance_27.png",L="/images/s_poetries_work_gitee_2020_07_performance_28.png",E="/images/s_poetries_work_gitee_2020_07_performance_29.png",B="/images/s_poetries_work_gitee_2020_07_performance_30.png",H="/images/s_poetries_work_gitee_2020_07_performance_31.png",W="/images/s_poetries_work_gitee_2020_07_performance_32.png",N="/images/s_poetries_work_gitee_2020_07_performance_33.png",J="/images/s_poetries_work_gitee_2020_07_performance_34.png",G="/images/s_poetries_work_gitee_2020_07_performance_35.png",A="/images/s_poetries_work_gitee_2020_07_performance_36.png",z="/images/s_poetries_work_gitee_2020_07_performance_37.png",I="/images/s_poetries_work_gitee_2020_07_performance_38.png",R="/images/s_poetries_work_gitee_2020_07_performance_39.png",U="/images/s_poetries_work_gitee_2020_07_performance_40.png",V="/images/s_poetries_work_gitee_2020_07_performance_41.png",F="/images/s_poetries_work_gitee_2020_07_performance_42.png",X="/images/s_poetries_work_gitee_2020_07_performance_43.png",Y="/images/s_poetries_work_gitee_2020_07_performance_44.png",Z="/images/s_poetries_work_gitee_2020_07_performance_45.png",Q="/images/s_poetries_work_gitee_2020_07_performance_46.png",K="/images/s_poetries_work_gitee_2020_07_performance_47.png",$="/images/s_poetries_work_gitee_2020_07_performance_48.png",nn="/images/s_poetries_work_gitee_2020_07_performance_49.png",sn="/images/s_poetries_work_gitee_2020_07_performance_50.png",an="/images/s_poetries_work_gitee_2020_07_performance_51.png",en="/images/s_poetries_work_gitee_2020_07_performance_52.png",pn="/images/s_poetries_work_gitee_2020_07_performance_53.png",tn="/images/s_poetries_work_gitee_2020_07_performance_55.png",on="/images/s_poetries_work_gitee_2020_07_performance_56.png",cn="/images/s_poetries_work_gitee_2020_07_performance_57.png",ln="/images/s_poetries_work_gitee_2020_07_performance_58.png",rn="/images/s_poetries_work_gitee_2020_07_performance_59.png",un="/images/s_poetries_work_gitee_2020_07_performance_60.png",dn="/images/s_poetries_work_gitee_2020_07_performance_61.png",kn="/images/s_poetries_work_gitee_2020_07_performance_62.png",mn="/images/s_poetries_work_gitee_2020_07_performance_63.png",vn="/images/s_poetries_work_gitee_2020_07_performance_64.png",gn={},bn=e('<p>åŸæ–‡é“¾æ¥: <a href="https://interview.poetries.top/docs/excellent-docs/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.html" target="_blank" rel="noopener noreferrer">https://interview.poetries.top/docs/excellent-docs/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.html</a></p><h1 id="å‰ç«¯æ€§èƒ½ä¼˜åŒ–ç¯‡" tabindex="-1"><a class="header-anchor" href="#å‰ç«¯æ€§èƒ½ä¼˜åŒ–ç¯‡"><span>å‰ç«¯æ€§èƒ½ä¼˜åŒ–ç¯‡</span></a></h1><h2 id="ä¸€ã€å‰è¨€" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€å‰è¨€"><span>ä¸€ã€å‰è¨€</span></a></h2><h3 id="çŸ¥è¯†ä½“ç³»-ä»ä¸€é“é¢è¯•é¢˜è¯´èµ·" tabindex="-1"><a class="header-anchor" href="#çŸ¥è¯†ä½“ç³»-ä»ä¸€é“é¢è¯•é¢˜è¯´èµ·"><span>çŸ¥è¯†ä½“ç³»ï¼š ä»ä¸€é“é¢è¯•é¢˜è¯´èµ·</span></a></h3><p>åœ¨å±•å¼€æ€§èƒ½ä¼˜åŒ–çš„è¯é¢˜ä¹‹å‰ï¼Œæˆ‘æƒ³å…ˆæŠ›å‡ºä¸€ä¸ªè€ç”Ÿå¸¸è°ˆçš„é¢è¯•é—®é¢˜ï¼š</p><blockquote><p>ä»è¾“å…¥ URL åˆ°é¡µé¢åŠ è½½å®Œæˆï¼Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</p></blockquote><ul><li>è¿™ä¸ªé—®é¢˜éå¸¸é‡è¦ï¼Œå› ä¸ºæˆ‘ä»¬åç»­çš„å†…å®¹éƒ½å°†ä»¥è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆä¸ºéª¨æ¶å±•å¼€ã€‚æˆ‘å¸Œæœ›æ­£åœ¨é˜…è¯»è¿™æœ¬å°å†Œçš„å„ä½å¯ä»¥åœ¨å¿ƒé‡Œç¢ç£¨ä¸€ä¸‹è¿™ä¸ªé—®é¢˜â€”â€”æ— é¡»ä½ è°ƒåŠ¨å¤ªå¤šè®¡ç®—æœºçš„ä¸“ä¸šçŸ¥è¯†ï¼Œåªéœ€è¦ä½ ç”¨æœ€å¿«çš„é€Ÿåº¦åœ¨è„‘æµ·ä¸­æ¶æ„èµ·è¿™ä¸ªæŠ½è±¡çš„è¿‡ç¨‹â€”â€”æˆ‘ä»¬æ¥ä¸‹æ¥æ‰€æœ‰çš„å·¥ä½œï¼Œå°±æ˜¯å›´ç»•è¿™ä¸ªè¿‡ç¨‹æ¥åšæ–‡ç« ã€‚</li><li>æˆ‘ä»¬ç°åœ¨ç«™åœ¨æ€§èƒ½ä¼˜åŒ–çš„è§’åº¦ï¼Œä¸€èµ·ç®€å•åœ°å¤ä¹ ä¸€éè¿™ä¸ªç»å…¸çš„è¿‡ç¨‹ï¼šé¦–å…ˆæˆ‘ä»¬éœ€è¦é€šè¿‡ DNSï¼ˆåŸŸåè§£æç³»ç»Ÿï¼‰å°† URL è§£æä¸ºå¯¹åº”çš„ IP åœ°å€ï¼Œç„¶åä¸è¿™ä¸ª IP åœ°å€ç¡®å®šçš„é‚£å°æœåŠ¡å™¨å»ºç«‹èµ· TCP ç½‘ç»œè¿æ¥ï¼Œéšåæˆ‘ä»¬å‘æœåŠ¡ç«¯æŠ›å‡ºæˆ‘ä»¬çš„ HTTP è¯·æ±‚ï¼ŒæœåŠ¡ç«¯å¤„ç†å®Œæˆ‘ä»¬çš„è¯·æ±‚ä¹‹åï¼ŒæŠŠç›®æ ‡æ•°æ®æ”¾åœ¨ HTTP å“åº”é‡Œè¿”å›ç»™å®¢æˆ·ç«¯ï¼Œæ‹¿åˆ°å“åº”æ•°æ®çš„æµè§ˆå™¨å°±å¯ä»¥å¼€å§‹èµ°ä¸€ä¸ªæ¸²æŸ“çš„æµç¨‹ã€‚æ¸²æŸ“å®Œæ¯•ï¼Œé¡µé¢ä¾¿å‘ˆç°ç»™äº†ç”¨æˆ·ï¼Œå¹¶æ—¶åˆ»ç­‰å¾…å“åº”ç”¨æˆ·çš„æ“ä½œï¼ˆå¦‚ä¸‹å›¾æ‰€ç¤ºï¼‰ã€‚</li></ul><p><img src="'+p+'" alt=""></p><p><strong>æˆ‘ä»¬å°†è¿™ä¸ªè¿‡ç¨‹åˆ‡åˆ†ä¸ºå¦‚ä¸‹çš„è¿‡ç¨‹ç‰‡æ®µï¼š</strong></p><ol><li><code>DNS</code> è§£æ</li><li><code>TCP</code> è¿æ¥</li><li><code>HTTP</code> è¯·æ±‚æŠ›å‡º</li><li>æœåŠ¡ç«¯å¤„ç†è¯·æ±‚ï¼Œ<code>HTTP</code> å“åº”è¿”å›</li><li>æµè§ˆå™¨æ‹¿åˆ°å“åº”æ•°æ®ï¼Œè§£æå“åº”å†…å®¹ï¼ŒæŠŠè§£æçš„ç»“æœå±•ç¤ºç»™ç”¨æˆ·</li></ol><p>å¤§å®¶è°¨è®°ï¼Œæˆ‘ä»¬ä»»ä½•ä¸€ä¸ªç”¨æˆ·ç«¯çš„äº§å“ï¼Œéƒ½éœ€è¦æŠŠè¿™ 5 ä¸ªè¿‡ç¨‹æ»´æ°´ä¸æ¼åœ°è€ƒè™‘åˆ°è‡ªå·±çš„æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆå†…ã€åå¤æƒè¡¡ï¼Œä»è€Œæ‰“ç£¨å‡ºç”¨æˆ·æ»¡æ„çš„é€Ÿåº¦ã€‚</p><h3 id="ä»åŸç†åˆ°å®è·µ-å„ä¸ªå‡»ç ´" tabindex="-1"><a class="header-anchor" href="#ä»åŸç†åˆ°å®è·µ-å„ä¸ªå‡»ç ´"><span>ä»åŸç†åˆ°å®è·µï¼šå„ä¸ªå‡»ç ´</span></a></h3><ul><li>æˆ‘ä»¬æ¥ä¸‹æ¥è¦åšçš„äº‹æƒ…ï¼Œå°±æ˜¯é’ˆå¯¹è¿™äº”ä¸ªè¿‡ç¨‹è¿›è¡Œåˆ†è§£ï¼Œå„ä¸ªæé—®ï¼Œå„ä¸ªå‡»ç ´ã€‚</li></ul><blockquote><p>å…·ä½“æ¥è¯´ï¼ŒDNS è§£æèŠ±æ—¶é—´ï¼Œèƒ½ä¸èƒ½å°½é‡å‡å°‘è§£ææ¬¡æ•°æˆ–è€…æŠŠè§£æå‰ç½®ï¼Ÿèƒ½â€”â€”æµè§ˆå™¨ DNS ç¼“å­˜å’Œ DNS prefetchã€‚TCP æ¯æ¬¡çš„ä¸‰æ¬¡æ¡æ‰‹éƒ½æ€¥æ­»äººï¼Œæœ‰æ²¡æœ‰è§£å†³æ–¹æ¡ˆï¼Ÿæœ‰â€”â€”é•¿è¿æ¥ã€é¢„è¿æ¥ã€æ¥å…¥ SPDY åè®®ã€‚å¦‚æœè¯´è¿™ä¸¤ä¸ªè¿‡ç¨‹çš„ä¼˜åŒ–å¾€å¾€éœ€è¦æˆ‘ä»¬å’Œå›¢é˜Ÿçš„æœåŠ¡ç«¯å·¥ç¨‹å¸ˆåä½œå®Œæˆï¼Œå‰ç«¯å•æ–¹é¢å¯ä»¥åšçš„åŠªåŠ›æœ‰é™ï¼Œé‚£ä¹ˆ HTTP è¯·æ±‚å‘¢ï¼Ÿâ€”â€”åœ¨å‡å°‘è¯·æ±‚æ¬¡æ•°å’Œå‡å°è¯·æ±‚ä½“ç§¯æ–¹é¢ï¼Œæˆ‘ä»¬åº”è¯¥æ˜¯ä¸“å®¶ï¼å†è€…ï¼ŒæœåŠ¡å™¨è¶Šè¿œï¼Œä¸€æ¬¡è¯·æ±‚å°±è¶Šæ…¢ï¼Œé‚£éƒ¨ç½²æ—¶å°±æŠŠé™æ€èµ„æºæ”¾åœ¨ç¦»æˆ‘ä»¬æ›´è¿‘çš„ CDN ä¸Šæ˜¯ä¸æ˜¯å°±èƒ½æ›´å¿«ä¸€äº›ï¼Ÿ</p></blockquote><p>ä»¥ä¸Šæåˆ°çš„éƒ½æ˜¯ç½‘ç»œå±‚é¢çš„æ€§èƒ½ä¼˜åŒ–ã€‚å†å¾€ä¸‹èµ°å°±æ˜¯æµè§ˆå™¨ç«¯çš„æ€§èƒ½ä¼˜åŒ–â€”â€”è¿™éƒ¨åˆ†æ¶‰åŠèµ„æºåŠ è½½ä¼˜åŒ–ã€æœåŠ¡ç«¯æ¸²æŸ“ã€æµè§ˆå™¨ç¼“å­˜æœºåˆ¶çš„åˆ©ç”¨ã€DOM æ ‘çš„æ„å»ºã€ç½‘é¡µæ’ç‰ˆå’Œæ¸²æŸ“è¿‡ç¨‹ã€å›æµä¸é‡ç»˜çš„è€ƒé‡ã€DOM æ“ä½œçš„åˆç†è§„é¿ç­‰ç­‰â€”â€”è¿™æ­£æ˜¯å‰ç«¯å·¥ç¨‹å¸ˆå¯ä»¥çœŸæ­£ä¸€å±•æ‹³è„šçš„åœ°æ–¹ã€‚å­¦ä¹ è¿™äº›çŸ¥è¯†ï¼Œä¸ä»…å¯ä»¥å¸®åŠ©æˆ‘ä»¬ä»æ ¹æœ¬ä¸Šæå‡é¡µé¢æ€§èƒ½ï¼Œæ›´èƒ½å¤Ÿå¤§å¤§åŠ æ·±ä¸ªäººå¯¹æµè§ˆå™¨åº•å±‚åŸç†ã€è¿è¡Œæœºåˆ¶çš„ç†è§£ï¼Œä¸€ä¸¾ä¸¤å¾—ï¼</p><p>æˆ‘ä»¬æ•´ä¸ªçš„çŸ¥è¯†å›¾è°±ï¼Œç”¨æ€ç»´å¯¼å›¾å±•ç¤ºå¦‚ä¸‹ï¼š</p><p><img src="'+t+`" alt=""></p><h2 id="äºŒã€ç½‘ç»œç¯‡-1-webpack-æ€§èƒ½è°ƒä¼˜ä¸-gzip-åŸç†" tabindex="-1"><a class="header-anchor" href="#äºŒã€ç½‘ç»œç¯‡-1-webpack-æ€§èƒ½è°ƒä¼˜ä¸-gzip-åŸç†"><span>äºŒã€ç½‘ç»œç¯‡ 1ï¼šwebpack æ€§èƒ½è°ƒä¼˜ä¸ Gzip åŸç†</span></a></h2><p>ä»ç°åœ¨å¼€å§‹ï¼Œæˆ‘ä»¬è¿›å…¥ç½‘ç»œå±‚é¢çš„æ€§èƒ½ä¼˜åŒ–ä¸–ç•Œã€‚</p><p>å¤§å®¶å¯ä»¥ä»ç¬¬ä¸€èŠ‚çš„ç¤ºæ„å›¾ä¸­çœ‹å‡ºï¼Œæˆ‘ä»¬ä»è¾“å…¥ URL åˆ°æ˜¾ç¤ºé¡µé¢è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæ¶‰åŠåˆ°ç½‘ç»œå±‚é¢çš„ï¼Œæœ‰ä¸‰ä¸ªä¸»è¦è¿‡ç¨‹ï¼š</p><ul><li><code>DNS</code> è§£æ</li><li><code>TCP</code> è¿æ¥</li><li><code>HTTP</code> è¯·æ±‚/å“åº”</li></ul><blockquote><p>å¯¹äº DNS è§£æå’Œ TCP è¿æ¥ä¸¤ä¸ªæ­¥éª¤ï¼Œæˆ‘ä»¬å‰ç«¯å¯ä»¥åšçš„åŠªåŠ›éå¸¸æœ‰é™ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒHTTP è¿æ¥è¿™ä¸€å±‚é¢çš„ä¼˜åŒ–æ‰æ˜¯æˆ‘ä»¬ç½‘ç»œä¼˜åŒ–çš„æ ¸å¿ƒã€‚å› æ­¤æˆ‘ä»¬å¼€é—¨è§å±±ï¼ŒæŠ“ä¸»è¦çŸ›ç›¾ï¼Œç›´æ¥ä» HTTP å¼€å§‹è®²èµ·ã€‚</p></blockquote><p><strong>HTTP ä¼˜åŒ–æœ‰ä¸¤ä¸ªå¤§çš„æ–¹å‘ï¼š</strong></p><ul><li>å‡å°‘è¯·æ±‚æ¬¡æ•°</li><li>å‡å°‘å•æ¬¡è¯·æ±‚æ‰€èŠ±è´¹çš„æ—¶é—´</li></ul><blockquote><p>è¿™ä¸¤ä¸ªä¼˜åŒ–ç‚¹ç›´ç›´åœ°æŒ‡å‘äº†æˆ‘ä»¬æ—¥å¸¸å¼€å‘ä¸­éå¸¸å¸¸è§çš„æ“ä½œâ€”â€”èµ„æºçš„å‹ç¼©ä¸åˆå¹¶ã€‚æ²¡é”™ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬æ¯å¤©ç”¨æ„å»ºå·¥å…·åœ¨åšçš„äº‹æƒ…ã€‚è€Œæ—¶ä¸‹æœ€ä¸»æµçš„æ„å»ºå·¥å…·æ— ç–‘æ˜¯ webpackï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™èŠ‚çš„ä¸»è¦ä»»åŠ¡å°±æ˜¯å›´ç»•ä¸šç•Œéœ¸ä¸» webpack æ¥åšæ–‡ç« ã€‚</p></blockquote><h3 id="webpack-çš„æ€§èƒ½ç“¶é¢ˆ" tabindex="-1"><a class="header-anchor" href="#webpack-çš„æ€§èƒ½ç“¶é¢ˆ"><span>webpack çš„æ€§èƒ½ç“¶é¢ˆ</span></a></h3><p>ç›¸ä¿¡æ¯ä¸ªç”¨è¿‡ webpack çš„åŒå­¦éƒ½å¯¹â€œæ‰“åŒ…â€å’Œâ€œå‹ç¼©â€è¿™æ ·çš„äº‹æƒ…çƒ‚ç†Ÿäºå¿ƒã€‚è¿™äº›è€ç”Ÿå¸¸è°ˆçš„ç‰¹æ€§ï¼Œæˆ‘æ›´æ¨èå¤§å®¶å»é˜…è¯»æ–‡æ¡£ã€‚è€Œå…³äº webpack çš„è¯¦ç»†æ“ä½œï¼Œåˆ™æ¨èå¤§å®¶è¯»è¯»è¿™æœ¬ <a href="https://juejin.im/book/5a6abad5518825733c144469/section/5a6abad5518825732e2f8546#heading-2" target="_blank" rel="noopener noreferrer">å…³äº webpack çš„æ˜é‡‘å°å†Œ (opens new window)</a>ï¼Œè¿™é‡Œæˆ‘ä»¬æŠŠæ³¨æ„åŠ›æ”¾åœ¨ webpack çš„æ€§èƒ½ä¼˜åŒ–ä¸Šã€‚</p><p><strong>webpack çš„ä¼˜åŒ–ç“¶é¢ˆï¼Œä¸»è¦æ˜¯ä¸¤ä¸ªæ–¹é¢ï¼š</strong></p><ul><li><code>webpack</code> çš„æ„å»ºè¿‡ç¨‹å¤ªèŠ±æ—¶é—´</li><li><code>webpack</code> æ‰“åŒ…çš„ç»“æœä½“ç§¯å¤ªå¤§</li></ul><h3 id="webpack-ä¼˜åŒ–æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#webpack-ä¼˜åŒ–æ–¹æ¡ˆ"><span>webpack ä¼˜åŒ–æ–¹æ¡ˆ</span></a></h3><p><strong>1. æ„å»ºè¿‡ç¨‹æé€Ÿç­–ç•¥</strong></p><p><strong>1.1 ä¸è¦è®© loader åšå¤ªå¤šäº‹æƒ…â€”â€”ä»¥ babel-loader ä¸ºä¾‹</strong></p><p><code>babel-loader</code> æ— ç–‘æ˜¯å¼ºå¤§çš„ï¼Œä½†å®ƒä¹Ÿæ˜¯æ…¢çš„ã€‚</p><blockquote><p>æœ€å¸¸è§çš„ä¼˜åŒ–æ–¹å¼æ˜¯ï¼Œç”¨ <code>include</code> æˆ– <code>exclude</code> æ¥å¸®æˆ‘ä»¬é¿å…ä¸å¿…è¦çš„è½¬è¯‘ï¼Œæ¯”å¦‚ <code>webpack</code> å®˜æ–¹åœ¨ä»‹ç» <code>babel- loader</code> æ—¶ç»™å‡ºçš„ç¤ºä¾‹ï¼š</p></blockquote><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token punctuation">{</span></span>
<span class="line">          <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(node_modules|bower_components)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;babel-loader&#39;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">              <span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;@babel/preset-env&#39;</span><span class="token punctuation">]</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">]</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>è¿™æ®µä»£ç å¸®æˆ‘ä»¬è§„é¿äº†å¯¹åºå¤§çš„ <code>node\\_modules</code> æ–‡ä»¶å¤¹æˆ–è€… <code>bower\\_components</code> æ–‡ä»¶å¤¹çš„å¤„ç†ã€‚ä½†é€šè¿‡é™å®šæ–‡ä»¶èŒƒå›´å¸¦æ¥çš„æ€§èƒ½æå‡æ˜¯æœ‰é™çš„ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå¦‚æœæˆ‘ä»¬é€‰æ‹©å¼€å¯ç¼“å­˜å°†è½¬è¯‘ç»“æœç¼“å­˜è‡³æ–‡ä»¶ç³»ç»Ÿï¼Œåˆ™è‡³å°‘å¯ä»¥å°† babel-loader çš„å·¥ä½œæ•ˆç‡æå‡ä¸¤å€ã€‚è¦åšåˆ°è¿™ç‚¹ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸º <code>loader</code> å¢åŠ ç›¸åº”çš„å‚æ•°è®¾å®šï¼š</p></blockquote><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;babel-loader?cacheDirectory=true&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>ä»¥ä¸Šéƒ½æ˜¯åœ¨è®¨è®ºé’ˆå¯¹ <code>loader</code> çš„é…ç½®ï¼Œä½†æˆ‘ä»¬çš„ä¼˜åŒ–èŒƒå›´ä¸æ­¢æ˜¯ <code>loader</code> ä»¬ã€‚</li></ul><blockquote><p>ä¸¾ä¸ªğŸŒ°ï¼Œå°½ç®¡æˆ‘ä»¬å¯ä»¥åœ¨ <code>loader</code> é…ç½®æ—¶é€šè¿‡å†™å…¥ <code>exclude</code> å»é¿å… <code>babel-loader</code> å¯¹ä¸å¿…è¦çš„æ–‡ä»¶çš„å¤„ç†ï¼Œä½†æ˜¯è€ƒè™‘åˆ°è¿™ä¸ªè§„åˆ™ä»…ä½œç”¨äºè¿™ä¸ª <code>loader</code>ï¼Œåƒä¸€äº›ç±»ä¼¼ <code>UglifyJsPlugin</code> çš„ <code>webpack</code> æ’ä»¶åœ¨å·¥ä½œæ—¶ä¾ç„¶ä¼šè¢«è¿™äº›åºå¤§çš„ç¬¬ä¸‰æ–¹åº“æ‹–ç´¯ï¼Œ<code>webpack</code> æ„å»ºé€Ÿåº¦ä¾ç„¶ä¼šå› æ­¤å¤§æ‰“æŠ˜æ‰£ã€‚æ‰€ä»¥é’ˆå¯¹è¿™äº›åºå¤§çš„ç¬¬ä¸‰æ–¹åº“ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åšä¸€äº›é¢å¤–çš„åŠªåŠ›ã€‚</p></blockquote><p><strong>1.2 ä¸è¦æ”¾è¿‡ç¬¬ä¸‰æ–¹åº“</strong></p><blockquote><p>ç¬¬ä¸‰æ–¹åº“ä»¥ <code>node\\_modules</code>ä¸ºä»£è¡¨ï¼Œå®ƒä»¬åºå¤§å¾—å¯æ€•ï¼Œå´åˆä¸å¯æˆ–ç¼ºã€‚</p></blockquote><ul><li>å¤„ç†ç¬¬ä¸‰æ–¹åº“çš„å§¿åŠ¿æœ‰å¾ˆå¤šï¼Œå…¶ä¸­ï¼Œ<code>Externals</code> ä¸å¤Ÿèªæ˜ï¼Œä¸€äº›æƒ…å†µä¸‹ä¼šå¼•å‘é‡å¤æ‰“åŒ…çš„é—®é¢˜ï¼›è€Œ <code>CommonsChunkPlugin</code> æ¯æ¬¡æ„å»ºæ—¶éƒ½ä¼šé‡æ–°æ„å»ºä¸€æ¬¡ <code>vendor</code>ï¼›å‡ºäºå¯¹æ•ˆç‡çš„è€ƒè™‘ï¼Œæˆ‘ä»¬è¿™é‡Œä¸ºå¤§å®¶æ¨è <code>DllPlugin</code>ã€‚</li><li><code>DllPlugin</code> æ˜¯åŸºäº <code>Windows</code> åŠ¨æ€é“¾æ¥åº“ï¼ˆ<code>dll</code>ï¼‰çš„æ€æƒ³è¢«åˆ›ä½œå‡ºæ¥çš„ã€‚è¿™ä¸ªæ’ä»¶ä¼šæŠŠç¬¬ä¸‰æ–¹åº“å•ç‹¬æ‰“åŒ…åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè¿™ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªå•çº¯çš„ä¾èµ–åº“ã€‚<strong>è¿™ä¸ªä¾èµ–åº“ä¸ä¼šè·Ÿç€ä½ çš„ä¸šåŠ¡ä»£ç ä¸€èµ·è¢«é‡æ–°æ‰“åŒ…ï¼Œåªæœ‰å½“ä¾èµ–è‡ªèº«å‘ç”Ÿç‰ˆæœ¬å˜åŒ–æ—¶æ‰ä¼šé‡æ–°æ‰“åŒ…</strong> ã€‚</li></ul><blockquote><p>ç”¨ <code>DllPlugin</code> å¤„ç†æ–‡ä»¶ï¼Œè¦åˆ†ä¸¤æ­¥èµ°ï¼š</p></blockquote><ul><li>åŸºäº <code>dll</code> ä¸“å±çš„é…ç½®æ–‡ä»¶ï¼Œæ‰“åŒ… <code>dll</code> åº“</li><li>åŸºäº <code>webpack.config.js</code> æ–‡ä»¶ï¼Œæ‰“åŒ…ä¸šåŠ¡ä»£ç </li></ul><blockquote><p>ä»¥ä¸€ä¸ªåŸºäº React çš„ç®€å•é¡¹ç›®ä¸ºä¾‹ï¼Œæˆ‘ä»¬çš„ <code>dll</code> çš„é…ç½®æ–‡ä»¶å¯ä»¥ç¼–å†™å¦‚ä¸‹ï¼š</p></blockquote><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpack&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token comment">// ä¾èµ–çš„åº“æ•°ç»„</span></span>
<span class="line">          <span class="token literal-property property">vendor</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">            <span class="token string">&#39;prop-types&#39;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token string">&#39;babel-polyfill&#39;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token string">&#39;react&#39;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token string">&#39;react-dom&#39;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token string">&#39;react-router-dom&#39;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token punctuation">]</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;dist&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;[name].js&#39;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token literal-property property">library</span><span class="token operator">:</span> <span class="token string">&#39;[name]_[hash]&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">          <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DllPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">// DllPluginçš„nameå±æ€§éœ€è¦å’Œlibaryä¿æŒä¸€è‡´</span></span>
<span class="line">            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;[name]_[hash]&#39;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;dist&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;[name]-manifest.json&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token comment">// contextéœ€è¦å’Œwebpack.config.jsä¿æŒä¸€è‡´</span></span>
<span class="line">            <span class="token literal-property property">context</span><span class="token operator">:</span> __dirname<span class="token punctuation">,</span></span>
<span class="line">          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>ç¼–å†™å®Œæˆä¹‹åï¼Œè¿è¡Œè¿™ä¸ªé…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬çš„ <code>dist</code> æ–‡ä»¶å¤¹é‡Œä¼šå‡ºç°è¿™æ ·ä¸¤ä¸ªæ–‡ä»¶ï¼š</p></blockquote><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    vendor<span class="token operator">-</span>manifest<span class="token punctuation">.</span>json</span>
<span class="line">    vendor<span class="token punctuation">.</span>js</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><code>vendor.js</code> ä¸å¿…è§£é‡Šï¼Œæ˜¯æˆ‘ä»¬ç¬¬ä¸‰æ–¹åº“æ‰“åŒ…çš„ç»“æœã€‚è¿™ä¸ªå¤šå‡ºæ¥çš„ <code>vendor- manifest.json</code>ï¼Œåˆ™ç”¨äºæè¿°æ¯ä¸ªç¬¬ä¸‰æ–¹åº“å¯¹åº”çš„å…·ä½“è·¯å¾„ï¼Œæˆ‘è¿™é‡Œæˆªå–ä¸€éƒ¨åˆ†ç»™å¤§å®¶çœ‹ä¸‹ï¼š</p></blockquote><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line">    <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vendor_397f9e25e49947b8675d&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;./node_modules/core-js/modules/_export.js&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;buildMeta&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;providedExports&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;./node_modules/prop-types/index.js&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token property">&quot;buildMeta&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token property">&quot;providedExports&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        ...</span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span>  </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>éšåï¼Œæˆ‘ä»¬åªéœ€åœ¨ <code>webpack.config.js</code> é‡Œé’ˆå¯¹ <code>dll</code> ç¨ä½œé…ç½®ï¼š</p></blockquote><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpack&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;production&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token comment">// ç¼–è¯‘å…¥å£</span></span>
<span class="line">      <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">main</span><span class="token operator">:</span> <span class="token string">&#39;./src/index.js&#39;</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token comment">// ç›®æ ‡æ–‡ä»¶</span></span>
<span class="line">      <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;dist/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;[name].js&#39;</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token comment">// dllç›¸å…³é…ç½®</span></span>
<span class="line">      <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DllReferencePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">          <span class="token literal-property property">context</span><span class="token operator">:</span> __dirname<span class="token punctuation">,</span></span>
<span class="line">          <span class="token comment">// manifestå°±æ˜¯æˆ‘ä»¬ç¬¬ä¸€æ­¥ä¸­æ‰“åŒ…å‡ºæ¥çš„jsonæ–‡ä»¶</span></span>
<span class="line">          <span class="token literal-property property">manifest</span><span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./dist/vendor-manifest.json&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">]</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>ä¸€æ¬¡åŸºäº <code>dll</code> çš„ <code>webpack</code> æ„å»ºè¿‡ç¨‹ä¼˜åŒ–ï¼Œä¾¿å¤§åŠŸå‘Šæˆäº†ï¼</p></blockquote><p><strong>1.3 Happypackâ€”â€”å°† loader ç”±å•è¿›ç¨‹è½¬ä¸ºå¤šè¿›ç¨‹</strong></p><blockquote><p>å¤§å®¶çŸ¥é“ï¼Œ<code>webpack</code>æ˜¯å•çº¿ç¨‹çš„ï¼Œå°±ç®—æ­¤åˆ»å­˜åœ¨å¤šä¸ªä»»åŠ¡ï¼Œä½ ä¹Ÿåªèƒ½æ’é˜Ÿä¸€ä¸ªæ¥ä¸€ä¸ªåœ°ç­‰å¾…å¤„ç†ã€‚è¿™æ˜¯ <code>webpack</code> çš„ç¼ºç‚¹ï¼Œå¥½åœ¨æˆ‘ä»¬çš„ <code>CPU</code> æ˜¯å¤šæ ¸çš„ï¼Œ<code>Happypack</code> ä¼šå……åˆ†é‡Šæ”¾ CPU åœ¨å¤šæ ¸å¹¶å‘æ–¹é¢çš„ä¼˜åŠ¿ï¼Œå¸®æˆ‘ä»¬æŠŠä»»åŠ¡åˆ†è§£ç»™å¤šä¸ªå­è¿›ç¨‹å»å¹¶å‘æ‰§è¡Œï¼Œå¤§å¤§æå‡æ‰“åŒ…æ•ˆç‡ã€‚</p></blockquote><ul><li><code>HappyPack</code> çš„ä½¿ç”¨æ–¹æ³•ä¹Ÿéå¸¸ç®€å•ï¼Œåªéœ€è¦æˆ‘ä»¬æŠŠå¯¹ <code>loader</code> çš„é…ç½®è½¬ç§»åˆ° <code>HappyPack</code> ä¸­å»å°±å¥½ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨å‘Šè¯‰ <code>HappyPack</code> æˆ‘ä»¬éœ€è¦å¤šå°‘ä¸ªå¹¶å‘çš„è¿›ç¨‹ï¼š</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token keyword">const</span> HappyPack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;happypack&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment">// æ‰‹åŠ¨åˆ›å»ºè¿›ç¨‹æ± </span></span>
<span class="line">    <span class="token keyword">const</span> happyThreadPool <span class="token operator">=</span>  HappyPack<span class="token punctuation">.</span><span class="token function">ThreadPool</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">size</span><span class="token operator">:</span> os<span class="token punctuation">.</span><span class="token function">cpus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">          <span class="token operator">...</span></span>
<span class="line">          <span class="token punctuation">{</span></span>
<span class="line">            <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token comment">// é—®å·åé¢çš„æŸ¥è¯¢å‚æ•°æŒ‡å®šäº†å¤„ç†è¿™ç±»æ–‡ä»¶çš„HappyPackå®ä¾‹çš„åå­—</span></span>
<span class="line">            <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;happypack/loader?id=happyBabel&#39;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token operator">...</span></span>
<span class="line">          <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token operator">...</span></span>
<span class="line">        <span class="token keyword">new</span> <span class="token class-name">HappyPack</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">          <span class="token comment">// è¿™ä¸ªHappyPackçš„â€œåå­—â€å°±å«åšhappyBabelï¼Œå’Œæ¥¼ä¸Šçš„æŸ¥è¯¢å‚æ•°é¥ç›¸å‘¼åº”</span></span>
<span class="line">          <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&#39;happyBabel&#39;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token comment">// æŒ‡å®šè¿›ç¨‹æ± </span></span>
<span class="line">          <span class="token literal-property property">threadPool</span><span class="token operator">:</span> happyThreadPool<span class="token punctuation">,</span></span>
<span class="line">          <span class="token literal-property property">loaders</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;babel-loader?cacheDirectory&#39;</span><span class="token punctuation">]</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ„å»ºç»“æœä½“ç§¯å‹ç¼©" tabindex="-1"><a class="header-anchor" href="#æ„å»ºç»“æœä½“ç§¯å‹ç¼©"><span>æ„å»ºç»“æœä½“ç§¯å‹ç¼©</span></a></h3><p><strong>1. æ–‡ä»¶ç»“æ„å¯è§†åŒ–ï¼Œæ‰¾å‡ºå¯¼è‡´ä½“ç§¯è¿‡å¤§çš„åŸå› </strong></p><p>è¿™é‡Œä¸ºå¤§å®¶ä»‹ç»ä¸€ä¸ªéå¸¸å¥½ç”¨çš„åŒ…ç»„æˆå¯è§†åŒ–å·¥å…·â€”â€”<a href="https://www.npmjs.com/package/webpack-bundle-analyzer" target="_blank" rel="noopener noreferrer">webpack-bundle-analyzer (opens new window)</a>ï¼Œé…ç½®æ–¹æ³•å’Œæ™®é€šçš„ plugin æ— å¼‚ï¼Œå®ƒä¼šä»¥çŸ©å½¢æ ‘å›¾çš„å½¢å¼å°†åŒ…å†…å„ä¸ªæ¨¡å—çš„å¤§å°å’Œä¾èµ–å…³ç³»å‘ˆç°å‡ºæ¥ï¼Œæ ¼å±€å¦‚å®˜æ–¹æ‰€æä¾›è¿™å¼ å›¾æ‰€ç¤ºï¼š</p><p><img src="`+o+`" alt=""></p><p>åœ¨ä½¿ç”¨æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦å°†å…¶ä»¥æ’ä»¶çš„å½¢å¼å¼•å…¥ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token keyword">const</span> BundleAnalyzerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpack-bundle-analyzer&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>BundleAnalyzerPlugin<span class="token punctuation">;</span></span>
<span class="line">     </span>
<span class="line">    module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token keyword">new</span> <span class="token class-name">BundleAnalyzerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">]</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2. æ‹†åˆ†èµ„æº</strong></p><blockquote><p>è¿™ç‚¹ä»ç„¶å›´ç»• <code>DllPlugin</code> å±•å¼€ï¼Œå¯å‚è€ƒä¸Šæ–‡ã€‚</p></blockquote><p><strong>2.1 åˆ é™¤å†—ä½™ä»£ç </strong></p><ul><li>ä¸€ä¸ªæ¯”è¾ƒå…¸å‹çš„åº”ç”¨ï¼Œå°±æ˜¯ <code>Tree-Shaking</code>ã€‚</li><li>ä» <code>webpack2</code> å¼€å§‹ï¼Œwebpack åŸç”Ÿæ”¯æŒäº† ES6 çš„æ¨¡å—ç³»ç»Ÿï¼Œå¹¶åŸºäºæ­¤æ¨å‡ºäº† <code>Tree-Shaking</code>ã€‚webpack å®˜æ–¹æ˜¯è¿™æ ·ä»‹ç»å®ƒçš„ï¼š</li></ul><blockquote><p>Tree shaking is a term commonly used in the JavaScript context for dead-code elimination, or more precisely, live-code import. It relies on ES2015 module import/export for the static structure of its module system.</p></blockquote><ul><li>æ„æ€æ˜¯åŸºäº <code>import/export</code> è¯­æ³•ï¼Œ<code>Tree-Shaking</code> å¯ä»¥åœ¨ç¼–è¯‘çš„è¿‡ç¨‹ä¸­è·æ‚‰å“ªäº›æ¨¡å—å¹¶æ²¡æœ‰çœŸæ­£è¢«ä½¿ç”¨ï¼Œè¿™äº›æ²¡ç”¨çš„ä»£ç ï¼Œåœ¨æœ€åæ‰“åŒ…çš„æ—¶å€™ä¼šè¢«å»é™¤ã€‚</li><li>ä¸¾ä¸ªğŸŒ°ï¼Œå‡è®¾æˆ‘çš„ä¸»å¹²æ–‡ä»¶ï¼ˆå…¥å£æ–‡ä»¶ï¼‰æ˜¯è¿™ä¹ˆå†™çš„ï¼š</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token keyword">import</span> <span class="token punctuation">{</span> page1<span class="token punctuation">,</span> page2 <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./pages&#39;</span></span>
<span class="line">        </span>
<span class="line">    <span class="token comment">// showæ˜¯äº‹å…ˆå®šä¹‰å¥½çš„å‡½æ•°ï¼Œå¤§å®¶ç†è§£å®ƒçš„åŠŸèƒ½æ˜¯å±•ç¤ºé¡µé¢å³å¯</span></span>
<span class="line">    <span class="token function">show</span><span class="token punctuation">(</span>page1<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><code>pages</code> æ–‡ä»¶é‡Œï¼Œæˆ‘è™½ç„¶å¯¼å‡ºäº†ä¸¤ä¸ªé¡µé¢ï¼š</p></blockquote><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token keyword">export</span> <span class="token keyword">const</span> page1 <span class="token operator">=</span> xxx</span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">export</span> <span class="token keyword">const</span> page2 <span class="token operator">=</span> xxx</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>ä½†å› ä¸º <code>page2</code> äº‹å®ä¸Šå¹¶æ²¡æœ‰è¢«ç”¨åˆ°ï¼ˆè¿™ä¸ªæ²¡æœ‰è¢«ç”¨åˆ°çš„æƒ…å†µåœ¨é™æ€åˆ†æçš„è¿‡ç¨‹ä¸­æ˜¯å¯ä»¥è¢«æ„ŸçŸ¥å‡ºæ¥çš„ï¼‰ï¼Œæ‰€ä»¥æ‰“åŒ…çš„ç»“æœé‡Œä¼šæŠŠè¿™éƒ¨åˆ†ï¼š</p></blockquote><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token keyword">export</span> <span class="token keyword">const</span> page2 <span class="token operator">=</span> xxx<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>ç›´æ¥åˆ æ‰ï¼Œè¿™å°±æ˜¯ <code>Tree-Shaking</code> å¸®æˆ‘ä»¬åšçš„äº‹æƒ…ã€‚</li><li>ç›¸ä¿¡å¤§å®¶ä¸éš¾çœ‹å‡ºï¼Œ<code>Tree-Shaking</code> çš„é’ˆå¯¹æ€§å¾ˆå¼ºï¼Œå®ƒæ›´é€‚åˆç”¨æ¥å¤„ç†æ¨¡å—çº§åˆ«çš„å†—ä½™ä»£ç ã€‚è‡³äº<strong>ç²’åº¦æ›´ç»†</strong> çš„å†—ä½™ä»£ç çš„å»é™¤ï¼Œå¾€å¾€ä¼šè¢«æ•´åˆè¿› JS æˆ– CSS çš„å‹ç¼©æˆ–åˆ†ç¦»è¿‡ç¨‹ä¸­ã€‚</li><li>è¿™é‡Œæˆ‘ä»¬ä»¥å½“ä¸‹æ¥å—åº¦è¾ƒé«˜çš„ <code>UglifyJsPlugin</code> ä¸ºä¾‹ï¼Œçœ‹ä¸€ä¸‹å¦‚ä½•åœ¨å‹ç¼©è¿‡ç¨‹ä¸­å¯¹ç¢ç‰‡åŒ–çš„å†—ä½™ä»£ç ï¼ˆå¦‚ <code>console</code> è¯­å¥ã€æ³¨é‡Šç­‰ï¼‰è¿›è¡Œè‡ªåŠ¨åŒ–åˆ é™¤ï¼š</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token keyword">const</span> UglifyJsPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;uglifyjs-webpack-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">     <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">       <span class="token keyword">new</span> <span class="token class-name">UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">         <span class="token comment">// å…è®¸å¹¶å‘</span></span>
<span class="line">         <span class="token literal-property property">parallel</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">         <span class="token comment">// å¼€å¯ç¼“å­˜</span></span>
<span class="line">         <span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">         <span class="token literal-property property">compress</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">           <span class="token comment">// åˆ é™¤æ‰€æœ‰çš„consoleè¯­å¥    </span></span>
<span class="line">           <span class="token literal-property property">drop_console</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">           <span class="token comment">// æŠŠä½¿ç”¨å¤šæ¬¡çš„é™æ€å€¼è‡ªåŠ¨å®šä¹‰ä¸ºå˜é‡</span></span>
<span class="line">           <span class="token literal-property property">reduce_vars</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">         <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">         <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">           <span class="token comment">// ä¸ä¿ç•™æ³¨é‡Š</span></span>
<span class="line">           <span class="token literal-property property">comment</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">           <span class="token comment">// ä½¿è¾“å‡ºçš„ä»£ç å°½å¯èƒ½ç´§å‡‘</span></span>
<span class="line">           <span class="token literal-property property">beautify</span><span class="token operator">:</span> <span class="token boolean">false</span></span>
<span class="line">         <span class="token punctuation">}</span></span>
<span class="line">       <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">     <span class="token punctuation">]</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>æœ‰å¿ƒçš„åŒå­¦ä¼šæ³¨æ„åˆ°ï¼Œè¿™æ®µæ‰‹åŠ¨å¼•å…¥ <code>UglifyJsPlugin</code> çš„ä»£ç å…¶å®æ˜¯ <code>webpack3</code> çš„ç”¨æ³•ï¼Œ<code>webpack4</code> ç°åœ¨å·²ç»é»˜è®¤ä½¿ç”¨ <code>uglifyjs-webpack-plugin</code> å¯¹ä»£ç åšå‹ç¼©äº†â€”â€”åœ¨ <code>webpack4</code> ä¸­ï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡é…ç½® <code>optimization.minimize</code> ä¸ <code>optimization.minimizer</code> æ¥è‡ªå®šä¹‰å‹ç¼©ç›¸å…³çš„æ“ä½œçš„ã€‚</li><li>è¿™é‡Œä¹Ÿå¼•å‡ºäº†æˆ‘ä»¬å­¦ä¹ æ€§èƒ½ä¼˜åŒ–çš„ä¸€ä¸ªæ ¸å¿ƒçš„ç†å¿µâ€”â€”ç”¨ä»€ä¹ˆå·¥å…·ï¼Œæ€ä¹ˆç”¨ï¼Œå¹¶ä¸æ˜¯æˆ‘ä»¬è¿™æœ¬å°å†Œçš„é‡ç‚¹ï¼Œå› ä¸ºæ‰€æœ‰çš„å·¥å…·éƒ½å­˜åœ¨ç”¨æ³•è¿­ä»£çš„é—®é¢˜ã€‚ä½†ç°åœ¨å¤§å®¶çŸ¥é“äº†åœ¨æ‰“åŒ…çš„è¿‡ç¨‹ä¸­åšä¸€äº›å¦‚ä¸Šæ–‡æ‰€è¿°çš„â€œæ‰‹è„šâ€å¯ä»¥å®ç°æ‰“åŒ…ç»“æœçš„æœ€ä¼˜åŒ–ï¼Œé‚£ä¸‹æ¬¡å¤§å®¶å†å»æ‰§è¡Œæ‰“åŒ…æ“ä½œï¼Œä¼šä¸ä¼šå¯¹è¿™ä¸ªæ“ä½œæ›´åŠ ç•™å¿ƒï¼Œä»è€Œè‡ªå·±å»å¯»æ‰¾å½¼æ—¶æ“ä½œçš„å…·ä½“å®ç°æ–¹æ¡ˆå‘¢ï¼Ÿæˆ‘æœ€å¸Œæœ›å¤§å®¶æŒæ¡çš„æŠ€èƒ½å°±æ˜¯ï¼Œå…ˆåœ¨è„‘æµ·ä¸­ç•™ä¸‹â€œè¿™ä¸ªxxæ“ä½œæ˜¯å¯¹çš„ï¼Œæ˜¯æœ‰ç”¨çš„â€ï¼Œåœ¨æ—¥åçš„å®è·µä¸­ï¼Œå¯ä»¥åŸºäºè¿™ä¸ªè®¤çŸ¥å»å¯»æ‰¾æŠŠæ­£ç¡®çš„æ“ä½œè½åœ°çš„å…·ä½“æ–¹æ¡ˆã€‚</li></ul><p><strong>2.2 æŒ‰éœ€åŠ è½½</strong></p><blockquote><p>å¤§å®¶æƒ³è±¡è¿™æ ·ä¸€ä¸ªåœºæ™¯ã€‚æˆ‘ç°åœ¨ç”¨ React æ„å»ºä¸€ä¸ªå•é¡µåº”ç”¨ï¼Œç”¨ React-Router æ¥æ§åˆ¶è·¯ç”±ï¼Œåä¸ªè·¯ç”±å¯¹åº”äº†åä¸ªé¡µé¢ï¼Œè¿™åä¸ªé¡µé¢éƒ½ä¸ç®€å•ã€‚å¦‚æœæˆ‘æŠŠè¿™æ•´ä¸ªé¡¹ç›®æ‰“ä¸€ä¸ªåŒ…ï¼Œç”¨æˆ·æ‰“å¼€æˆ‘çš„ç½‘ç«™æ—¶ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿæœ‰å¾ˆå¤§æœºç‡ä¼šå¡æ­»ï¼Œå¯¹ä¸å¯¹ï¼Ÿæ›´å¥½çš„åšæ³•è‚¯å®šæ˜¯å…ˆç»™ç”¨æˆ·å±•ç¤ºä¸»é¡µï¼Œå…¶å®ƒé¡µé¢ç­‰è¯·æ±‚åˆ°äº†å†åŠ è½½ã€‚å½“ç„¶è¿™ä¸ªæƒ…å†µä¹Ÿæ¯”è¾ƒæç«¯ï¼Œä½†å´èƒ½å¾ˆå¥½åœ°å¼•å‡ºæŒ‰éœ€åŠ è½½çš„æ€æƒ³ï¼š</p></blockquote><ul><li><p>ä¸€æ¬¡ä¸åŠ è½½å®Œæ‰€æœ‰çš„æ–‡ä»¶å†…å®¹ï¼ŒåªåŠ è½½æ­¤åˆ»éœ€è¦ç”¨åˆ°çš„é‚£éƒ¨åˆ†ï¼ˆä¼šæå‰åšæ‹†åˆ†ï¼‰</p></li><li><p>å½“éœ€è¦æ›´å¤šå†…å®¹æ—¶ï¼Œå†å¯¹ç”¨åˆ°çš„å†…å®¹è¿›è¡Œå³æ—¶åŠ è½½</p></li></ul><blockquote><p>å¥½ï¼Œæ—¢ç„¶è¯´åˆ°è¿™åä¸ª <code>Router</code>äº†ï¼Œæˆ‘ä»¬å°±æ‹¿å…¶ä¸­ä¸€ä¸ªå¼€åˆ€ï¼Œå‡è®¾æˆ‘è¿™ä¸ª Router å¯¹åº”çš„ç»„ä»¶å«åš <code>BugComponent</code>ï¼Œæ¥çœ‹çœ‹æˆ‘ä»¬å¦‚ä½•åˆ©ç”¨ <code>webpack</code>åšåˆ°è¯¥ç»„ä»¶çš„æŒ‰éœ€åŠ è½½ã€‚</p></blockquote><p>å½“æˆ‘ä»¬ä¸éœ€è¦æŒ‰éœ€åŠ è½½çš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„ä»£ç æ˜¯è¿™æ ·çš„ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token keyword">import</span> BugComponent <span class="token keyword">from</span> <span class="token string">&#39;../pages/BugComponent&#39;</span></span>
<span class="line">    <span class="token operator">...</span></span>
<span class="line">    <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/bug&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>BugComponent<span class="token punctuation">}</span><span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä¸ºäº†å¼€å¯æŒ‰éœ€åŠ è½½ï¼Œæˆ‘ä»¬è¦ç¨ä½œæ”¹åŠ¨ã€‚</li><li>é¦–å…ˆ webpack çš„é…ç½®æ–‡ä»¶è¦èµ°èµ·æ¥ï¼š</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;/../dist&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;app.js&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">publicPath</span><span class="token operator">:</span> defaultSettings<span class="token punctuation">.</span>publicPath<span class="token punctuation">,</span></span>
<span class="line">        <span class="token comment">// æŒ‡å®š chunkFilename</span></span>
<span class="line">        <span class="token literal-property property">chunkFilename</span><span class="token operator">:</span> <span class="token string">&#39;[name].[chunkhash:5].chunk.js&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è·¯ç”±å¤„çš„ä»£ç ä¹Ÿè¦åšä¸€ä¸‹é…åˆï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token keyword">const</span> <span class="token parameter">getComponent</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>location<span class="token punctuation">,</span> cb<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      require<span class="token punctuation">.</span><span class="token function">ensure</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">require</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">cb</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;../pages/BugComponent&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>default<span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&#39;bug&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token operator">...</span></span>
<span class="line">    <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/bug&quot;</span> getComponent<span class="token operator">=</span><span class="token punctuation">{</span>getComponent<span class="token punctuation">}</span><span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯¹ï¼Œæ ¸å¿ƒå°±æ˜¯è¿™ä¸ªæ–¹æ³•ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    require<span class="token punctuation">.</span><span class="token function">ensure</span><span class="token punctuation">(</span>dependencies<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> chunkName<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>è¿™æ˜¯ä¸€ä¸ªå¼‚æ­¥çš„æ–¹æ³•ï¼Œwebpack åœ¨æ‰“åŒ…æ—¶ï¼Œ<code>BugComponent</code> ä¼šè¢«å•ç‹¬æ‰“æˆä¸€ä¸ªæ–‡ä»¶ï¼Œåªæœ‰åœ¨æˆ‘ä»¬è·³è½¬ bug è¿™ä¸ªè·¯ç”±çš„æ—¶å€™ï¼Œè¿™ä¸ªå¼‚æ­¥æ–¹æ³•çš„å›è°ƒæ‰ä¼šç”Ÿæ•ˆï¼Œæ‰ä¼šçœŸæ­£åœ°å»è·å– <code>BugComponent</code> çš„å†…å®¹ã€‚è¿™å°±æ˜¯æŒ‰éœ€åŠ è½½ã€‚</li><li>æŒ‰éœ€åŠ è½½çš„ç²’åº¦ï¼Œè¿˜å¯ä»¥ç»§ç»­ç»†åŒ–ï¼Œç»†åŒ–åˆ°æ›´å°çš„ç»„ä»¶ã€ç»†åŒ–åˆ°æŸä¸ªåŠŸèƒ½ç‚¹ï¼Œéƒ½æ˜¯ ok çš„ã€‚</li></ul><p>ç­‰ç­‰ï¼Œè¿™å’Œè¯´å¥½çš„ä¸ä¸€æ ·å•Šï¼Ÿä¸æ˜¯è¯´ <code>Code-Splitting</code> æ‰æ˜¯ React-Router çš„æŒ‰éœ€åŠ è½½å®è·µå—ï¼Ÿ</p><ul><li>æ²¡é”™ï¼Œåœ¨ React-Router4 ä¸­ï¼Œæˆ‘ä»¬ç¡®å®æ˜¯ç”¨ <code>Code-Splitting</code> æ›¿æ¢æ‰äº†æ¥¼ä¸Šè¿™ä¸ªæ“ä½œã€‚è€Œä¸”å¦‚æœæœ‰ä½¿ç”¨è¿‡ React-Router4 å®ç°è¿‡è·¯ç”±çº§åˆ«çš„æŒ‰éœ€åŠ è½½çš„åŒå­¦ï¼Œå¯èƒ½ä¼šå¯¹ <code>React-Router4</code> é‡Œç”¨åˆ°çš„ä¸€ä¸ªå«â€œBundle-Loaderâ€çš„ä¸œè¥¿å°è±¡æ·±åˆ»ã€‚æˆ‘æƒ³å¾ˆå¤šåŒå­¦è¯»åˆ°æŒ‰éœ€åŠ è½½è¿™é‡Œï¼Œå¿ƒé‡Œçš„é¢„æœŸæˆ–è®¸éƒ½æ˜¯æ—¶ä¸‹å¤§çƒ­çš„ <code>Code-Splitting</code>ï¼Œè€Œéæˆ‘å‘ˆç°å‡ºæ¥çš„è¿™æ®µçœ‹ä¼¼â€œé™ˆæ—§â€çš„ä»£ç ã€‚</li><li>ä½†æ˜¯ï¼Œå¦‚æœå¤§å®¶ç¨å¾®ç•™ä¸ªå¿ƒçœ¼ï¼Œå»çœ‹ä¸€ä¸‹ <code>Bundle Loader</code> å¹¶ä¸é•¿çš„æºä»£ç çš„è¯ï¼Œä½ ä¼šå‘ç°å®ƒç«Ÿç„¶è¿˜æ˜¯ä½¿ç”¨ require.ensure æ¥å®ç°çš„â€”â€”è¿™ä¹Ÿæ˜¯æˆ‘è¦æŠŠ <code>require.ensure</code> å•ç‹¬æ‹å‡ºæ¥çš„é‡è¦åŸå› ã€‚æ‰€è°“æŒ‰éœ€åŠ è½½ï¼Œæ ¹æœ¬ä¸Šå°±æ˜¯åœ¨æ­£ç¡®çš„æ—¶æœºå»è§¦å‘ç›¸åº”çš„å›è°ƒã€‚ç†è§£äº†è¿™ä¸ª <code>require.ensure</code> çš„ç©æ³•ï¼Œå¤§å®¶ç”šè‡³å¯ä»¥ç»“åˆä¸šåŠ¡è‡ªå·±å»ä¿®æ”¹ä¸€ä¸ªæŒ‰éœ€åŠ è½½æ¨¡å—æ¥ç”¨ã€‚</li></ul><p>è¿™ä¹Ÿåº”äº†æˆ‘ä¹‹å‰è·Ÿå¤§å®¶å¼ºè°ƒé‚£æ®µè¯ï¼Œå·¥å…·æ°¸è¿œåœ¨è¿­ä»£ï¼Œå”¯æœ‰æŒæ¡æ ¸å¿ƒæ€æƒ³ï¼Œæ‰å¯ä»¥çœŸæ­£åšåˆ°ä¸¾ä¸€åä¸‰â€”â€”å”¯â€œå¿ƒâ€ä¸ç ´ï¼</p><h3 id="gzip-å‹ç¼©åŸç†" tabindex="-1"><a class="header-anchor" href="#gzip-å‹ç¼©åŸç†"><span>Gzip å‹ç¼©åŸç†</span></a></h3><blockquote><p>å‰é¢è¯´äº†ä¸å°‘ webpack çš„æ•…äº‹ï¼Œç›®çš„è¿˜æ˜¯å¸®å¤§å®¶æ›´å¥½åœ°å®ç°å‹ç¼©å’Œåˆå¹¶ã€‚è¯´åˆ°å‹ç¼©ï¼Œå¯ä¸åªæ˜¯æ„å»ºå·¥å…·çš„ä¸“åˆ©ã€‚æˆ‘ä»¬æ—¥å¸¸å¼€å‘ä¸­ï¼Œå…¶å®è¿˜æœ‰ä¸€ä¸ªä¾¿å®œåˆå¥½ç”¨çš„å‹ç¼©æ“ä½œï¼šå¼€å¯ <code>Gzip</code>ã€‚</p></blockquote><p>å…·ä½“çš„åšæ³•éå¸¸ç®€å•ï¼Œåªéœ€è¦ä½ åœ¨ä½ çš„ <code>request headers</code> ä¸­åŠ ä¸Šè¿™ä¹ˆä¸€å¥ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    accept<span class="token operator">-</span>encoding<span class="token operator">:</span>gzip</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>ç›¸ä¿¡å¾ˆå¤šåŒå­¦å¯¹ <code>Gzip</code> ä¹Ÿæ˜¯äº†è§£åˆ°è¿™é‡Œã€‚ä¹‹æ‰€ä»¥ä¸ºå¤§å®¶å¼€è¿™ä¸ªå½©è›‹æ€§çš„å°èŠ‚ï¼Œç»ä¸æ˜¯å‡ºäºç‚«æŠ€è¦æ¥ç»™å¤§å®¶å±•ç¤ºä¸€ä¸‹ <code>Gzip</code> çš„å‹ç¼©ç®—æ³•ï¼Œè€Œæ˜¯æƒ³å’Œå¤§å®¶èŠä¸€ä¸ªå’Œæˆ‘ä»¬å‰ç«¯å…³ç³»æ›´å¯†åˆ‡çš„è¯é¢˜ï¼š<code>HTTP</code> å‹ç¼©ã€‚</p></blockquote><blockquote><p>HTTP å‹ç¼©æ˜¯ä¸€ç§å†…ç½®åˆ°ç½‘é¡µæœåŠ¡å™¨å’Œç½‘é¡µå®¢æˆ·ç«¯ä¸­ä»¥æ”¹è¿›ä¼ è¾“é€Ÿåº¦å’Œå¸¦å®½åˆ©ç”¨ç‡çš„æ–¹å¼ã€‚åœ¨ä½¿ç”¨ <code>HTTP</code> å‹ç¼©çš„æƒ…å†µä¸‹ï¼ŒHTTP æ•°æ®åœ¨ä»æœåŠ¡å™¨å‘é€å‰å°±å·²å‹ç¼©ï¼šå…¼å®¹çš„æµè§ˆå™¨å°†åœ¨ä¸‹è½½æ‰€éœ€çš„æ ¼å¼å‰å®£å‘Šæ”¯æŒä½•ç§æ–¹æ³•ç»™æœåŠ¡å™¨ï¼›ä¸æ”¯æŒå‹ç¼©æ–¹æ³•çš„æµè§ˆå™¨å°†ä¸‹è½½æœªç»å‹ç¼©çš„æ•°æ®ã€‚æœ€å¸¸è§çš„å‹ç¼©æ–¹æ¡ˆåŒ…æ‹¬ <code>Gzip</code> å’Œ <code>Deflate</code>ã€‚</p></blockquote><p>ä»¥ä¸Šæ˜¯æ‘˜è‡ªç™¾ç§‘çš„è§£é‡Šï¼Œäº‹å®ä¸Šï¼Œå¤§å®¶å¯ä»¥è¿™ä¹ˆç†è§£ï¼š</p><p><strong>HTTP å‹ç¼©å°±æ˜¯ä»¥ç¼©å°ä½“ç§¯ä¸ºç›®çš„ï¼Œå¯¹ HTTP å†…å®¹è¿›è¡Œé‡æ–°ç¼–ç çš„è¿‡ç¨‹</strong></p><ul><li><code>Gzip</code> çš„å†…æ ¸å°±æ˜¯ <code>Deflate</code>ï¼Œç›®å‰æˆ‘ä»¬å‹ç¼©æ–‡ä»¶ç”¨å¾—æœ€å¤šçš„å°±æ˜¯ <code>Gzip</code>ã€‚å¯ä»¥è¯´ï¼Œ<code>Gzip</code> å°±æ˜¯ <code>HTTP</code> å‹ç¼©çš„ç»å…¸ä¾‹é¢˜ã€‚</li></ul><p><strong>1. è¯¥ä¸è¯¥ç”¨ Gzip</strong></p><ul><li>å¦‚æœä½ çš„é¡¹ç›®ä¸æ˜¯æç«¯è¿·ä½ çš„è¶…å°å‹æ–‡ä»¶ï¼Œæˆ‘éƒ½å»ºè®®ä½ è¯•è¯• <code>Gzip</code>ã€‚</li><li>æœ‰çš„åŒå­¦æˆ–è®¸å­˜åœ¨è¿™æ ·çš„ç–‘é—®ï¼šå‹ç¼© <code>Gzip</code>ï¼ŒæœåŠ¡ç«¯è¦èŠ±æ—¶é—´ï¼›è§£å‹ <code>Gzip</code>ï¼Œæµè§ˆå™¨è¦èŠ±æ—¶é—´ã€‚ä¸­é—´èŠ‚çœå‡ºæ¥çš„ä¼ è¾“æ—¶é—´ï¼ŒçœŸçš„é‚£ä¹ˆå¯è§‚å—ï¼Ÿ</li></ul><blockquote><p>ç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚å¦‚æœä½ æ‰‹ä¸Šçš„é¡¹ç›®æ˜¯ <code>1k</code>ã€<code>2k</code> çš„å°æ–‡ä»¶ï¼Œé‚£ç¡®å®æœ‰ç‚¹é«˜å°„ç‚®æ‰“èšŠå­çš„æ„æ€ï¼Œä¸å€¼å½“ã€‚ä½†æ›´å¤šçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¤„ç†çš„éƒ½æ˜¯å…·å¤‡ä¸€å®šè§„æ¨¡çš„é¡¹ç›®æ–‡ä»¶ã€‚å®è·µè¯æ˜ï¼Œè¿™ç§æƒ…å†µä¸‹å‹ç¼©å’Œè§£å‹å¸¦æ¥çš„æ—¶é—´å¼€é”€ç›¸å¯¹äºä¼ è¾“è¿‡ç¨‹ä¸­èŠ‚çœä¸‹çš„æ—¶é—´å¼€é”€æ¥è¯´ï¼Œå¯ä»¥è¯´æ˜¯å¾®ä¸è¶³é“çš„ã€‚</p></blockquote><p><strong>2. Gzip æ˜¯ä¸‡èƒ½çš„å—</strong></p><ul><li>é¦–å…ˆè¦æ‰¿è®¤ <code>Gzip</code> æ˜¯é«˜æ•ˆçš„ï¼Œå‹ç¼©å<strong>é€šå¸¸</strong> èƒ½å¸®æˆ‘ä»¬å‡å°‘å“åº” 70% å·¦å³çš„å¤§å°ã€‚</li><li>ä½†å®ƒå¹¶éä¸‡èƒ½ã€‚<code>Gzip</code> å¹¶ä¸ä¿è¯é’ˆå¯¹æ¯ä¸€ä¸ªæ–‡ä»¶çš„å‹ç¼©éƒ½ä¼šä½¿å…¶å˜å°ã€‚</li></ul><blockquote><p><code>Gzip</code> å‹ç¼©èƒŒåçš„åŸç†ï¼Œæ˜¯åœ¨ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ä¸­æ‰¾å‡ºä¸€äº›é‡å¤å‡ºç°çš„å­—ç¬¦ä¸²ã€ä¸´æ—¶æ›¿æ¢å®ƒä»¬ï¼Œä»è€Œä½¿æ•´ä¸ªæ–‡ä»¶å˜å°ã€‚æ ¹æ®è¿™ä¸ªåŸç†ï¼Œæ–‡ä»¶ä¸­ä»£ç çš„é‡å¤ç‡è¶Šé«˜ï¼Œé‚£ä¹ˆå‹ç¼©çš„æ•ˆç‡å°±è¶Šé«˜ï¼Œä½¿ç”¨ <code>Gzip</code> çš„æ”¶ç›Šä¹Ÿå°±è¶Šå¤§ã€‚åä¹‹äº¦ç„¶ã€‚</p></blockquote><p><strong>3. webpack çš„ Gzip å’ŒæœåŠ¡ç«¯çš„ Gzip</strong></p><ul><li>ä¸€èˆ¬æ¥è¯´ï¼Œ<code>Gzip</code> å‹ç¼©æ˜¯æœåŠ¡å™¨çš„æ´»å„¿ï¼šæœåŠ¡å™¨äº†è§£åˆ°æˆ‘ä»¬è¿™è¾¹æœ‰ä¸€ä¸ª <code>Gzip</code> å‹ç¼©çš„éœ€æ±‚ï¼Œå®ƒä¼šå¯åŠ¨è‡ªå·±çš„ <code>CPU</code> å»ä¸ºæˆ‘ä»¬å®Œæˆè¿™ä¸ªä»»åŠ¡ã€‚è€Œå‹ç¼©æ–‡ä»¶è¿™ä¸ªè¿‡ç¨‹æœ¬èº«æ˜¯éœ€è¦è€—è´¹æ—¶é—´çš„ï¼Œå¤§å®¶å¯ä»¥ç†è§£ä¸ºæˆ‘ä»¬ä»¥æœåŠ¡å™¨å‹ç¼©çš„æ—¶é—´å¼€é”€å’Œ <code>CPU</code> å¼€é”€ï¼ˆä»¥åŠæµè§ˆå™¨è§£æå‹ç¼©æ–‡ä»¶çš„å¼€é”€ï¼‰ä¸ºä»£ä»·ï¼Œçœä¸‹äº†ä¸€äº›ä¼ è¾“è¿‡ç¨‹ä¸­çš„æ—¶é—´å¼€é”€ã€‚</li><li>æ—¢ç„¶å­˜åœ¨ç€è¿™æ ·çš„äº¤æ¢ï¼Œé‚£ä¹ˆå°±è¦æ±‚æˆ‘ä»¬å­¦ä¼šæƒè¡¡ã€‚æœåŠ¡å™¨çš„ <code>CPU</code> æ€§èƒ½ä¸æ˜¯æ— é™çš„ï¼Œå¦‚æœå­˜åœ¨å¤§é‡çš„å‹ç¼©éœ€æ±‚ï¼ŒæœåŠ¡å™¨ä¹Ÿæ‰›ä¸ä½çš„ã€‚æœåŠ¡å™¨ä¸€æ—¦å› æ­¤æ…¢ä¸‹æ¥äº†ï¼Œç”¨æˆ·è¿˜æ˜¯è¦ç­‰ã€‚Webpack ä¸­ <code>Gzip</code> å‹ç¼©æ“ä½œçš„å­˜åœ¨ï¼Œäº‹å®ä¸Šå°±æ˜¯ä¸ºäº†åœ¨æ„å»ºè¿‡ç¨‹ä¸­å»åšä¸€éƒ¨åˆ†æœåŠ¡å™¨çš„å·¥ä½œï¼Œä¸ºæœåŠ¡å™¨åˆ†å‹ã€‚</li><li>å› æ­¤ï¼Œè¿™ä¸¤ä¸ªåœ°æ–¹çš„ <code>Gzip</code> å‹ç¼©ï¼Œè°ä¹Ÿä¸èƒ½æ›¿ä»£è°ã€‚å®ƒä»¬å¿…é¡»å’Œå¹³å…±å¤„ï¼Œå¥½å¥½åˆä½œã€‚ä½œä¸ºå¼€å‘è€…ï¼Œæˆ‘ä»¬ä¹Ÿåº”è¯¥ç»“åˆä¸šåŠ¡å‹åŠ›çš„å®é™…å¼ºåº¦æƒ…å†µï¼Œå»åšå¥½è¿™å…¶ä¸­çš„æƒè¡¡ã€‚</li></ul><h2 id="ä¸‰ã€ç½‘ç»œç¯‡-2-å›¾ç‰‡ä¼˜åŒ–â€”â€”è´¨é‡ä¸æ€§èƒ½çš„åšå¼ˆ" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€ç½‘ç»œç¯‡-2-å›¾ç‰‡ä¼˜åŒ–â€”â€”è´¨é‡ä¸æ€§èƒ½çš„åšå¼ˆ"><span>ä¸‰ã€ç½‘ç»œç¯‡ 2ï¼šå›¾ç‰‡ä¼˜åŒ–â€”â€”è´¨é‡ä¸æ€§èƒ½çš„åšå¼ˆ</span></a></h2><p>ã€Šé«˜æ€§èƒ½ç½‘ç«™å»ºè®¾æŒ‡å—ã€‹çš„ä½œè€… Steve Souders æ›¾åœ¨ 2013 å¹´çš„ä¸€ç¯‡ <a href="http://www.stevesouders.com/blog/2013/04/26/i/" target="_blank" rel="noopener noreferrer">åšå®¢ (opens new window)</a> ä¸­æåˆ°ï¼š</p><blockquote><p>æˆ‘çš„å¤§éƒ¨åˆ†æ€§èƒ½ä¼˜åŒ–å·¥ä½œéƒ½é›†ä¸­åœ¨ <code>JavaScript</code> å’Œ <code>CSS</code> ä¸Šï¼Œä»æ—©æœŸçš„ Move Scripts to the Bottom å’Œ Put Stylesheets at the Top è§„åˆ™ã€‚ä¸ºäº†å¼ºè°ƒè¿™äº›è§„åˆ™çš„é‡è¦æ€§ï¼Œæˆ‘ç”šè‡³è¯´è¿‡ï¼Œâ€œJS å’Œ CSS æ˜¯é¡µé¢ä¸Šæœ€é‡è¦çš„éƒ¨åˆ†â€ã€‚</p><p>å‡ ä¸ªæœˆåï¼Œæˆ‘æ„è¯†åˆ°è¿™æ˜¯é”™è¯¯çš„ã€‚å›¾ç‰‡æ‰æ˜¯é¡µé¢ä¸Šæœ€é‡è¦çš„éƒ¨åˆ†ã€‚</p><p>æˆ‘å…³æ³¨ JS å’Œ CSS çš„é‡ç‚¹ä¹Ÿæ˜¯å¦‚ä½•èƒ½å¤Ÿæ›´å¿«åœ°ä¸‹è½½å›¾ç‰‡ã€‚å›¾ç‰‡æ˜¯ç”¨æˆ·å¯ä»¥ç›´è§‚çœ‹åˆ°çš„ã€‚ä»–ä»¬å¹¶ä¸ä¼šå…³æ³¨ JS å’Œ CSSã€‚ç¡®å®ï¼ŒJS å’Œ CSS ä¼šå½±å“å›¾ç‰‡å†…å®¹çš„å±•ç¤ºï¼Œå°¤å…¶æ˜¯ä¼šå½±å“å›¾ç‰‡çš„å±•ç¤ºæ–¹å¼ï¼ˆæ¯”å¦‚å›¾ç‰‡è½®æ’­ï¼ŒCSS èƒŒæ™¯å›¾å’Œåª’ä½“æŸ¥è¯¢ï¼‰ã€‚ä½†æ˜¯æˆ‘è®¤ä¸º JS å’Œ CSS åªæ˜¯å±•ç¤ºå›¾ç‰‡çš„æ–¹å¼ã€‚åœ¨é¡µé¢åŠ è½½çš„è¿‡ç¨‹ä¸­ï¼Œåº”å½“å…ˆè®©å›¾ç‰‡å’Œæ–‡å­—å…ˆå±•ç¤ºï¼Œè€Œä¸æ˜¯è¯•å›¾ä¿è¯ JS å’Œ CSS æ›´å¿«ä¸‹è½½å®Œæˆã€‚</p></blockquote><p>è¿™æ®µè¯å¯è°“å­—å­—ç ç‘ã€‚æ­¤å¤–ï¼Œé›…è™å†›è§„å’Œ Google å®˜æ–¹çš„æœ€ä½³å®è·µä¹Ÿéƒ½å°†å›¾ç‰‡ä¼˜åŒ–åˆ—ä¸ºå‰ç«¯æ€§èƒ½ä¼˜åŒ–å¿…ä¸å¯å°‘çš„ç¯èŠ‚â€”â€”å›¾ç‰‡ä¼˜åŒ–çš„ä¼˜å…ˆçº§å¯è§ä¸€æ–‘ã€‚</p><p>å°±å›¾ç‰‡è¿™å—æ¥è¯´ï¼Œä¸å…¶è¯´æˆ‘ä»¬æ˜¯åœ¨åšâ€œä¼˜åŒ–â€ï¼Œä¸å¦‚è¯´æˆ‘ä»¬æ˜¯åœ¨åšâ€œæƒè¡¡â€ã€‚å› ä¸ºæˆ‘ä»¬è¦åšçš„äº‹æƒ…ï¼Œå°±æ˜¯å»å‹ç¼©å›¾ç‰‡çš„ä½“ç§¯ï¼ˆæˆ–è€…ä¸€å¼€å§‹å°±é€‰å–ä½“ç§¯è¾ƒå°çš„å›¾ç‰‡æ ¼å¼ï¼‰ã€‚ä½†è¿™ä¸ªä¼˜åŒ–æ“ä½œï¼Œæ˜¯ä»¥ç‰ºç‰²ä¸€éƒ¨åˆ†æˆåƒè´¨é‡ä¸ºä»£ä»·çš„ã€‚å› æ­¤æˆ‘ä»¬çš„ä¸»è¦ä»»åŠ¡ï¼Œæ˜¯å°½å¯èƒ½åœ°å»å¯»æ±‚ä¸€ä¸ªè´¨é‡ä¸æ€§èƒ½ä¹‹é—´çš„å¹³è¡¡ç‚¹ã€‚</p><h3 id="_2018-å¹´-å›¾ç‰‡ä¾ç„¶å¾ˆå¤§" tabindex="-1"><a class="header-anchor" href="#_2018-å¹´-å›¾ç‰‡ä¾ç„¶å¾ˆå¤§"><span>2018 å¹´ï¼Œå›¾ç‰‡ä¾ç„¶å¾ˆå¤§</span></a></h3><blockquote><p>è¿™é‡Œå…ˆç»™å¤§å®¶ä»‹ç» <a href="https://httparchive.org/reports/page-weight#bytesTotal" target="_blank" rel="noopener noreferrer">HTTP-Archive (opens new window)</a> è¿™ä¸ªç½‘ç«™ï¼Œå®ƒä¼šå®šæœŸæŠ“å– Web ä¸Šçš„ç«™ç‚¹ï¼Œå¹¶è®°å½•èµ„æºçš„åŠ è½½æƒ…å†µã€Web API çš„ä½¿ç”¨æƒ…å†µç­‰é¡µé¢çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¹¶ä¼šå¯¹è¿™äº›æ•°æ®è¿›è¡Œå¤„ç†å’Œåˆ†æä»¥ç¡®å®šè¶‹åŠ¿ã€‚é€šè¿‡å®ƒæˆ‘ä»¬å¯ä»¥å®æ—¶åœ°çœ‹åˆ°ä¸–ç•ŒèŒƒå›´å†…çš„ Web èµ„æºçš„ç»Ÿè®¡ç»“æœã€‚</p></blockquote><p>æˆªæ­¢åˆ° 2018 å¹´ 8 æœˆï¼Œè¿‡å»ä¸€å¹´<strong>æ€»çš„ web èµ„æº</strong> çš„å¹³å‡è¯·æ±‚ä½“ç§¯æ˜¯è¿™æ ·çš„ï¼š</p><p><img src="`+c+'" alt=""></p><p>è€Œå…·ä½“åˆ°<strong>å›¾ç‰‡</strong> è¿™ä¸€ç±»çš„èµ„æºï¼Œå¹³å‡è¯·æ±‚ä½“ç§¯æ˜¯è¿™æ ·çš„ï¼š</p><p><img src="'+l+'" alt=""></p><p>å½“ç„¶ï¼Œéšç€æˆ‘ä»¬å·¥ç¨‹å¸ˆåœ¨æ€§èƒ½æ–¹é¢æ‰€åšçš„åŠªåŠ›è¶Šæ¥è¶Šæœ‰æˆæ•ˆï¼Œå¹³å‡æ¥è¯´ï¼Œä¸ç®¡æ˜¯èµ„æºæ€»é‡è¿˜æ˜¯å›¾ç‰‡ä½“ç§¯ï¼Œéƒ½åœ¨å¾€è¶Šæ¥è¶Šè½»é‡çš„æ–¹å‘æ¼”åŒ–ã€‚è¿™æ˜¯ä¸€ç§å€¼å¾—è‚¯å®šçš„è¿›æ­¥ã€‚</p><p>ä½†åŒæ—¶æˆ‘ä»¬ä¸å¾—ä¸æ‰¿è®¤ï¼Œå¦‚å›¾æ‰€ç¤ºçš„è¿™ä¸ªå›¾ç‰‡ä½“ç§¯ï¼Œä¾ç„¶æ˜¯å¤ªå¤§äº†ã€‚å›¾ç‰‡åœ¨æ‰€æœ‰èµ„æºä¸­æ‰€å çš„æ¯”é‡ï¼Œä¹Ÿè¶³å¤Ÿâ€œè§¦ç›®æƒŠå¿ƒâ€äº†ã€‚ä¸ºäº†æ”¹å˜è¿™ä¸ªç°çŠ¶ï¼Œæˆ‘ä»¬å¿…é¡»æŠŠå›¾ç‰‡ä¼˜åŒ–æä¸Šæ—¥ç¨‹ã€‚</p><h3 id="ä¸åŒä¸šåŠ¡åœºæ™¯ä¸‹çš„å›¾ç‰‡æ–¹æ¡ˆé€‰å‹" tabindex="-1"><a class="header-anchor" href="#ä¸åŒä¸šåŠ¡åœºæ™¯ä¸‹çš„å›¾ç‰‡æ–¹æ¡ˆé€‰å‹"><span>ä¸åŒä¸šåŠ¡åœºæ™¯ä¸‹çš„å›¾ç‰‡æ–¹æ¡ˆé€‰å‹</span></a></h3><blockquote><p>æ—¶ä¸‹åº”ç”¨è¾ƒä¸ºå¹¿æ³›çš„ Web å›¾ç‰‡æ ¼å¼æœ‰ <code>JPEG/JPG</code>ã€<code>PNG</code>ã€<code>WebP</code>ã€<code>Base64</code>ã€<code>SVG</code> ç­‰ï¼Œè¿™äº›æ ¼å¼éƒ½æ˜¯å¾ˆæœ‰æ•…äº‹çš„ï¼Œå€¼å¾—æˆ‘ä»¬å¥½å¥½ç ”ç©¶ä¸€æŠŠã€‚æ­¤å¤–ï¼Œè€ç”Ÿå¸¸è°ˆçš„é›ªç¢§å›¾ï¼ˆCSS Spritesï¼‰è‡³ä»Šä¹Ÿä»åœ¨ä¸€çº¿çš„å‰ç«¯åº”ç”¨ä¸­å‘å…‰å‘çƒ­ï¼Œæˆ‘ä»¬ä¹Ÿä¼šæœ‰æ‰€æåŠã€‚</p></blockquote><p>ä¸è°ˆä¸šåŠ¡åœºæ™¯çš„é€‰å‹éƒ½æ˜¯è€æµæ°“ã€‚ä¸‹é¢æˆ‘ä»¬å°±ç»“åˆå…·ä½“çš„ä¸šåŠ¡åœºæ™¯ï¼Œä¸€èµ·æ¥è§£å¼€å›¾ç‰‡é€‰å‹çš„ç¥ç§˜é¢çº±ï¼</p><p><strong>1. å‰ç½®çŸ¥è¯†ï¼šäºŒè¿›åˆ¶ä½æ•°ä¸è‰²å½©çš„å…³ç³»</strong></p><ul><li>åœ¨è®¡ç®—æœºä¸­ï¼Œåƒç´ ç”¨äºŒè¿›åˆ¶æ•°æ¥è¡¨ç¤ºã€‚ä¸åŒçš„å›¾ç‰‡æ ¼å¼ä¸­åƒç´ ä¸äºŒè¿›åˆ¶ä½æ•°ä¹‹é—´çš„å¯¹åº”å…³ç³»æ˜¯ä¸åŒçš„ã€‚ä¸€ä¸ªåƒç´ å¯¹åº”çš„äºŒè¿›åˆ¶ä½æ•°è¶Šå¤šï¼Œå®ƒå¯ä»¥è¡¨ç¤ºçš„é¢œè‰²ç§ç±»å°±è¶Šå¤šï¼Œæˆåƒæ•ˆæœä¹Ÿå°±è¶Šç»†è…»ï¼Œæ–‡ä»¶ä½“ç§¯ç›¸åº”ä¹Ÿä¼šè¶Šå¤§ã€‚</li><li>ä¸€ä¸ªäºŒè¿›åˆ¶ä½è¡¨ç¤ºä¸¤ç§é¢œè‰²ï¼ˆ<code>0|1</code> å¯¹åº”é»‘|ç™½ï¼‰ï¼Œå¦‚æœä¸€ç§å›¾ç‰‡æ ¼å¼å¯¹åº”çš„äºŒè¿›åˆ¶ä½æ•°æœ‰ <code>n</code> ä¸ªï¼Œé‚£ä¹ˆå®ƒå°±å¯ä»¥å‘ˆç° <code>2^n</code> ç§é¢œè‰²ã€‚</li></ul><p><strong>2. JPEG/JPG</strong></p><blockquote><p>å…³é”®å­—ï¼š<strong>æœ‰æŸå‹ç¼©ã€ä½“ç§¯å°ã€åŠ è½½å¿«ã€ä¸æ”¯æŒé€æ˜</strong></p></blockquote><p><strong>2.1 JPG çš„ä¼˜ç‚¹</strong></p><blockquote><p><code>JPG</code> æœ€å¤§çš„ç‰¹ç‚¹æ˜¯<strong>æœ‰æŸå‹ç¼©</strong> ã€‚è¿™ç§é«˜æ•ˆçš„å‹ç¼©ç®—æ³•ä½¿å®ƒæˆä¸ºäº†ä¸€ç§éå¸¸è½»å·§çš„å›¾ç‰‡æ ¼å¼ã€‚å¦ä¸€æ–¹é¢ï¼Œå³ä½¿è¢«ç§°ä¸ºâ€œæœ‰æŸâ€å‹ç¼©ï¼ŒJPGçš„å‹ç¼©æ–¹å¼ä»ç„¶æ˜¯ä¸€ç§é«˜è´¨é‡çš„å‹ç¼©æ–¹å¼ï¼šå½“æˆ‘ä»¬æŠŠå›¾ç‰‡ä½“ç§¯å‹ç¼©è‡³åŸæœ‰ä½“ç§¯çš„ 50% ä»¥ä¸‹æ—¶ï¼ŒJPG ä»ç„¶å¯ä»¥ä¿æŒä½ 60% çš„å“è´¨ã€‚æ­¤å¤–ï¼ŒJPG æ ¼å¼ä»¥ 24 ä½å­˜å‚¨å•ä¸ªå›¾ï¼Œå¯ä»¥å‘ˆç°å¤šè¾¾ 1600 ä¸‡ç§é¢œè‰²ï¼Œè¶³ä»¥åº”å¯¹å¤§å¤šæ•°åœºæ™¯ä¸‹å¯¹è‰²å½©çš„è¦æ±‚ï¼Œè¿™ä¸€ç‚¹å†³å®šäº†å®ƒå‹ç¼©å‰åçš„è´¨é‡æŸè€—å¹¶ä¸å®¹æ˜“è¢«æˆ‘ä»¬äººç±»çš„è‚‰çœ¼æ‰€å¯Ÿè§‰â€”â€”å‰ææ˜¯ä½ ç”¨å¯¹äº†ä¸šåŠ¡åœºæ™¯ã€‚</p></blockquote><p><strong>2.2 ä½¿ç”¨åœºæ™¯</strong></p><ul><li>JPG é€‚ç”¨äºå‘ˆç°è‰²å½©ä¸°å¯Œçš„å›¾ç‰‡ï¼Œåœ¨æˆ‘ä»¬æ—¥å¸¸å¼€å‘ä¸­ï¼ŒJPG å›¾ç‰‡ç»å¸¸ä½œä¸ºå¤§çš„èƒŒæ™¯å›¾ã€è½®æ’­å›¾æˆ– Banner å›¾å‡ºç°ã€‚</li><li>ä¸¤å¤§ç”µå•†ç½‘ç«™å¯¹å¤§å›¾çš„å¤„ç†ï¼Œæ˜¯ JPG å›¾ç‰‡åº”ç”¨åœºæ™¯çš„æœ€ä½³å†™ç…§ï¼š</li><li>æ‰“å¼€æ·˜å®é¦–é¡µï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°é¡µé¢ä¸­æœ€é†’ç›®ã€æœ€åºå¤§çš„å›¾ç‰‡ï¼Œä¸€å®šæ˜¯ä»¥ .jpg ä¸ºåç¼€çš„ï¼š</li></ul><p><img src="'+i+'" alt=""></p><p>äº¬ä¸œé¦–é¡µä¹Ÿä¸ä¾‹å¤–ï¼š</p><p><img src="'+r+'" alt=""></p><blockquote><p>ä½¿ç”¨ JPG å‘ˆç°å¤§å›¾ï¼Œæ—¢å¯ä»¥ä¿ä½å›¾ç‰‡çš„è´¨é‡ï¼Œåˆä¸ä¼šå¸¦æ¥ä»¤äººå¤´ç–¼çš„å›¾ç‰‡ä½“ç§¯ï¼Œæ˜¯å½“ä¸‹æ¯”è¾ƒæ¨å´‡çš„ä¸€ç§æ–¹æ¡ˆã€‚</p></blockquote><p><strong>2.3 JPG çš„ç¼ºé™·</strong></p><blockquote><p>æœ‰æŸå‹ç¼©åœ¨ä¸Šæ–‡æ‰€å±•ç¤ºçš„è½®æ’­å›¾ä¸Šç¡®å®å¾ˆéš¾éœ²å‡ºé©¬è„šï¼Œä½†å½“å®ƒå¤„ç†<strong>çŸ¢é‡å›¾å½¢</strong> å’Œ <strong>Logo</strong> ç­‰çº¿æ¡æ„Ÿè¾ƒå¼ºã€é¢œè‰²å¯¹æ¯”å¼ºçƒˆçš„å›¾åƒæ—¶ï¼Œäººä¸ºå‹ç¼©å¯¼è‡´çš„å›¾ç‰‡æ¨¡ç³Šä¼šç›¸å½“æ˜æ˜¾ã€‚</p></blockquote><p>æ­¤å¤–ï¼ŒJPEG å›¾åƒ<strong>ä¸æ”¯æŒé€æ˜åº¦å¤„ç†</strong> ï¼Œé€æ˜å›¾ç‰‡éœ€è¦å¬å”¤ PNG æ¥å‘ˆç°ã€‚</p><p><strong>3. PNG-8 ä¸ PNG-24</strong></p><blockquote><p>å…³é”®å­—ï¼š<strong>æ— æŸå‹ç¼©ã€è´¨é‡é«˜ã€ä½“ç§¯å¤§ã€æ”¯æŒé€æ˜</strong></p></blockquote><p><strong>3.1 PNG çš„ä¼˜ç‚¹</strong></p><ul><li><code>PNG</code>ï¼ˆå¯ç§»æ¤ç½‘ç»œå›¾å½¢æ ¼å¼ï¼‰æ˜¯ä¸€ç§æ— æŸå‹ç¼©çš„é«˜ä¿çœŸçš„å›¾ç‰‡æ ¼å¼ã€‚8 å’Œ 24ï¼Œè¿™é‡Œéƒ½æ˜¯äºŒè¿›åˆ¶æ•°çš„ä½æ•°ã€‚æŒ‰ç…§æˆ‘ä»¬å‰ç½®çŸ¥è¯†é‡Œæåˆ°çš„å¯¹åº”å…³ç³»ï¼Œ8 ä½çš„ PNG æœ€å¤šæ”¯æŒ 256 ç§é¢œè‰²ï¼Œè€Œ 24 ä½çš„å¯ä»¥å‘ˆç°çº¦ 1600 ä¸‡ç§é¢œè‰²ã€‚</li><li><code>PNG</code> å›¾ç‰‡å…·æœ‰æ¯” JPG æ›´å¼ºçš„è‰²å½©è¡¨ç°åŠ›ï¼Œå¯¹çº¿æ¡çš„å¤„ç†æ›´åŠ ç»†è…»ï¼Œå¯¹é€æ˜åº¦æœ‰è‰¯å¥½çš„æ”¯æŒã€‚å®ƒå¼¥è¡¥äº†ä¸Šæ–‡æˆ‘ä»¬æåˆ°çš„ JPG çš„å±€é™æ€§ï¼Œå”¯ä¸€çš„ BUG å°±æ˜¯<strong>ä½“ç§¯å¤ªå¤§</strong> ã€‚</li></ul><p><strong>3.2 PNG-8 ä¸ PNG-24 çš„é€‰æ‹©é¢˜</strong></p><ul><li>ä»€ä¹ˆæ—¶å€™ç”¨ <code>PNG-8</code>ï¼Œä»€ä¹ˆæ—¶å€™ç”¨ <code>PNG-24</code>ï¼Œè¿™æ˜¯ä¸€ä¸ªé—®é¢˜ã€‚</li><li>ç†è®ºä¸Šæ¥è¯´ï¼Œå½“ä½ è¿½æ±‚æœ€ä½³çš„æ˜¾ç¤ºæ•ˆæœã€å¹¶ä¸”ä¸åœ¨æ„æ–‡ä»¶ä½“ç§¯å¤§å°æ—¶ï¼Œæ˜¯æ¨èä½¿ç”¨ <code>PNG-24</code> çš„ã€‚</li><li>ä½†å®è·µå½“ä¸­ï¼Œä¸ºäº†è§„é¿ä½“ç§¯çš„é—®é¢˜ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¸ç”¨PNGå»å¤„ç†è¾ƒå¤æ‚çš„å›¾åƒã€‚å½“æˆ‘ä»¬é‡åˆ°é€‚åˆ PNG çš„åœºæ™¯æ—¶ï¼Œä¹Ÿä¼šä¼˜å…ˆé€‰æ‹©æ›´ä¸ºå°å·§çš„ PNG-8ã€‚</li><li>å¦‚ä½•ç¡®å®šä¸€å¼ å›¾ç‰‡æ˜¯è¯¥ç”¨ <code>PNG-8</code> è¿˜æ˜¯ <code>PNG-24</code> å»å‘ˆç°å‘¢ï¼Ÿå¥½çš„åšæ³•æ˜¯æŠŠå›¾ç‰‡å…ˆæŒ‰ç…§è¿™ä¸¤ç§æ ¼å¼åˆ†åˆ«è¾“å‡ºï¼Œçœ‹ PNG-8 è¾“å‡ºçš„ç»“æœæ˜¯å¦ä¼šå¸¦æ¥è‚‰çœ¼å¯è§çš„è´¨é‡æŸè€—ï¼Œå¹¶ä¸”ç¡®è®¤è¿™ç§æŸè€—æ˜¯å¦åœ¨æˆ‘ä»¬ï¼ˆå°¤å…¶æ˜¯ä½ çš„ UI è®¾è®¡å¸ˆï¼‰å¯æ¥å—çš„èŒƒå›´å†…ï¼ŒåŸºäºå¯¹æ¯”çš„ç»“æœå»åšåˆ¤æ–­ã€‚</li></ul><p><strong>3.3 åº”ç”¨åœºæ™¯</strong></p><ul><li>å‰é¢æˆ‘ä»¬æåˆ°ï¼Œå¤æ‚çš„ã€è‰²å½©å±‚æ¬¡ä¸°å¯Œçš„å›¾ç‰‡ï¼Œç”¨ PNG æ¥å¤„ç†çš„è¯ï¼Œæˆæœ¬ä¼šæ¯”è¾ƒé«˜ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šäº¤ç»™ JPG å»å­˜å‚¨ã€‚</li><li>è€ƒè™‘åˆ° <code>PNG</code> åœ¨å¤„ç†çº¿æ¡å’Œé¢œè‰²å¯¹æ¯”åº¦æ–¹é¢çš„ä¼˜åŠ¿ï¼Œæˆ‘ä»¬ä¸»è¦ç”¨å®ƒæ¥å‘ˆç°å°çš„ Logoã€é¢œè‰²ç®€å•ä¸”å¯¹æ¯”å¼ºçƒˆçš„å›¾ç‰‡æˆ–èƒŒæ™¯ç­‰ã€‚</li><li>æ­¤æ—¶æˆ‘ä»¬å†æ¬¡æŠŠç›®å…‰è½¬å‘æ€§èƒ½æ–¹é¢å ªç§°ä¸šç•Œæ¥·æ¨¡çš„æ·˜å®é¦–é¡µï¼Œæˆ‘ä»¬ä¼šå‘ç°å®ƒé¡µé¢ä¸Šçš„ <code>Logo</code>ï¼Œæ— è®ºå¤§å°ï¼Œè¿˜çœŸçš„éƒ½æ˜¯ <code>PNG</code> æ ¼å¼ï¼š</li></ul><p>ä¸» Logoï¼š</p><p><img src="'+u+'" alt=""></p><p>è¾ƒå°çš„ Logoï¼š</p><p><img src="'+d+'" alt=""></p><p>é¢œè‰²ç®€å•ã€å¯¹æ¯”åº¦è¾ƒå¼ºçš„é€æ˜å°å›¾ä¹Ÿåœ¨ PNG æ ¼å¼ä¸‹æœ‰ç€è‰¯å¥½çš„è¡¨ç°ï¼š</p><p><img src="'+k+`" alt=""></p><p><strong>4. SVG</strong></p><blockquote><p>å…³é”®å­—ï¼š<strong>æ–‡æœ¬æ–‡ä»¶ã€ä½“ç§¯å°ã€ä¸å¤±çœŸã€å…¼å®¹æ€§å¥½</strong></p></blockquote><p>SVGï¼ˆå¯ç¼©æ”¾çŸ¢é‡å›¾å½¢ï¼‰æ˜¯ä¸€ç§åŸºäº XML è¯­æ³•çš„å›¾åƒæ ¼å¼ã€‚å®ƒå’Œæœ¬æ–‡æåŠçš„å…¶å®ƒå›¾ç‰‡ç§ç±»æœ‰ç€æœ¬è´¨çš„ä¸åŒï¼šSVG å¯¹å›¾åƒçš„å¤„ç†ä¸æ˜¯åŸºäºåƒç´ ç‚¹ï¼Œè€Œæ˜¯æ˜¯åŸºäºå¯¹å›¾åƒçš„å½¢çŠ¶æè¿°ã€‚</p><p><strong>4.1 SVG çš„ç‰¹æ€§</strong></p><blockquote><p>å’Œæ€§èƒ½å…³ç³»æœ€å¯†åˆ‡çš„ä¸€ç‚¹å°±æ˜¯ï¼šSVG ä¸ PNG å’Œ JPG ç›¸æ¯”ï¼Œ<strong>æ–‡ä»¶ä½“ç§¯æ›´å°ï¼Œå¯å‹ç¼©æ€§æ›´å¼º</strong> ã€‚</p></blockquote><p>å½“ç„¶ï¼Œä½œä¸ºçŸ¢é‡å›¾ï¼Œå®ƒæœ€æ˜¾è‘—çš„ä¼˜åŠ¿è¿˜æ˜¯åœ¨äº<strong>å›¾ç‰‡å¯æ— é™æ”¾å¤§è€Œä¸å¤±çœŸ</strong> è¿™ä¸€ç‚¹ä¸Šã€‚è¿™ä½¿å¾— SVG å³ä½¿æ˜¯è¢«æ”¾åˆ°è§†ç½‘è†œå±å¹•ä¸Šï¼Œä¹Ÿå¯ä»¥ä¸€å¦‚æ—¢å¾€åœ°å±•ç°å‡ºè¾ƒå¥½çš„æˆåƒå“è´¨â€”â€”1 å¼  SVG è¶³ä»¥é€‚é… n ç§åˆ†è¾¨ç‡ã€‚</p><blockquote><p>æ­¤å¤–ï¼Œ<strong>SVG æ˜¯æ–‡æœ¬æ–‡ä»¶</strong> ã€‚æˆ‘ä»¬æ—¢å¯ä»¥åƒå†™ä»£ç ä¸€æ ·å®šä¹‰ SVGï¼ŒæŠŠå®ƒå†™åœ¨ HTML é‡Œã€æˆä¸º DOM çš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿå¯ä»¥æŠŠå¯¹å›¾å½¢çš„æè¿°å†™å…¥ä»¥ .svg ä¸ºåç¼€çš„ç‹¬ç«‹æ–‡ä»¶ï¼ˆSVG æ–‡ä»¶åœ¨ä½¿ç”¨ä¸Šä¸æ™®é€šå›¾ç‰‡æ–‡ä»¶æ— å¼‚ï¼‰ã€‚è¿™ä½¿å¾— SVG æ–‡ä»¶å¯ä»¥è¢«éå¸¸å¤šçš„å·¥å…·è¯»å–å’Œä¿®æ”¹ï¼Œå…·æœ‰è¾ƒå¼ºçš„<strong>çµæ´»æ€§</strong> ã€‚</p></blockquote><p>SVG çš„å±€é™æ€§ä¸»è¦æœ‰ä¸¤ä¸ªæ–¹é¢ï¼Œä¸€æ–¹é¢æ˜¯å®ƒçš„æ¸²æŸ“æˆæœ¬æ¯”è¾ƒé«˜ï¼Œè¿™ç‚¹å¯¹æ€§èƒ½æ¥è¯´æ˜¯å¾ˆä¸åˆ©çš„ã€‚å¦ä¸€æ–¹é¢ï¼ŒSVG å­˜åœ¨ç€å…¶å®ƒå›¾ç‰‡æ ¼å¼æ‰€æ²¡æœ‰çš„å­¦ä¹ æˆæœ¬ï¼ˆå®ƒæ˜¯å¯ç¼–ç¨‹çš„ï¼‰ã€‚</p><p><strong>4.2 SVG çš„ä½¿ç”¨æ–¹å¼ä¸åº”ç”¨åœºæ™¯</strong></p><blockquote><p>SVG æ˜¯æ–‡æœ¬æ–‡ä»¶ï¼Œæˆ‘ä»¬æ—¢å¯ä»¥åƒå†™ä»£ç ä¸€æ ·å®šä¹‰ SVGï¼ŒæŠŠå®ƒå†™åœ¨ HTML é‡Œã€æˆä¸º DOM çš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿå¯ä»¥æŠŠå¯¹å›¾å½¢çš„æè¿°å†™å…¥ä»¥ .svg ä¸ºåç¼€çš„ç‹¬ç«‹æ–‡ä»¶ï¼ˆSVG æ–‡ä»¶åœ¨ä½¿ç”¨ä¸Šä¸æ™®é€šå›¾ç‰‡æ–‡ä»¶æ— å¼‚ï¼‰ã€‚</p></blockquote><ul><li>å°† SVG å†™å…¥ HTMLï¼š</li></ul><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html" data-title="html"><pre><code><span class="line">    <span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2000/svg<span class="token punctuation">&quot;</span></span>   <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>200<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>200<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>circle</span> <span class="token attr-name">cx</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>50<span class="token punctuation">&quot;</span></span> <span class="token attr-name">cy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>50<span class="token punctuation">&quot;</span></span> <span class="token attr-name">r</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>50<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å°† SVG å†™å…¥ç‹¬ç«‹æ–‡ä»¶åå¼•å…¥ HTML:</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">&quot;æ–‡ä»¶å.svg&quot;</span> alt<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬æ›´å¤šç”¨åˆ°çš„æ˜¯åè€…ã€‚å¾ˆå¤šæƒ…å†µä¸‹è®¾è®¡å¸ˆä¼šç»™åˆ°æˆ‘ä»¬ SVG æ–‡ä»¶ï¼Œå°±ç®—æ²¡æœ‰è®¾è®¡å¸ˆï¼Œæˆ‘ä»¬è¿˜æœ‰éå¸¸å¥½ç”¨çš„ <a href="http://www.iconfont.cn/" target="_blank" rel="noopener noreferrer">åœ¨çº¿çŸ¢é‡å›¾å½¢åº“ (opens new window)</a>ã€‚å¯¹äºçŸ¢é‡å›¾ï¼Œæˆ‘ä»¬æ— é¡»æ·±ç©¶è¿‡å¤šï¼Œåªéœ€è¦å¯¹å…¶æ ¸å¿ƒç‰¹æ€§æœ‰æ‰€æŒæ¡ã€æ—¥ååœ¨åº”ç”¨æ—¶åšåˆ°æœ‰è¿¹å¯å¾ªå³å¯ã€‚</p></blockquote><p><strong>5. Base64</strong></p><blockquote><p>å…³é”®å­—ï¼š<strong>æ–‡æœ¬æ–‡ä»¶ã€ä¾èµ–ç¼–ç ã€å°å›¾æ ‡è§£å†³æ–¹æ¡ˆ</strong></p></blockquote><p>Base64 å¹¶éä¸€ç§å›¾ç‰‡æ ¼å¼ï¼Œè€Œæ˜¯ä¸€ç§ç¼–ç æ–¹å¼ã€‚Base64 å’Œé›ªç¢§å›¾ä¸€æ ·ï¼Œæ˜¯ä½œä¸ºå°å›¾æ ‡è§£å†³æ–¹æ¡ˆè€Œå­˜åœ¨çš„ã€‚åœ¨äº†è§£ Base64 ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹é›ªç¢§å›¾ã€‚</p><p><strong>5.1 å‰ç½®çŸ¥è¯†ï¼šæœ€ç»å…¸çš„å°å›¾æ ‡è§£å†³æ–¹æ¡ˆâ€”â€”é›ªç¢§å›¾ï¼ˆCSS Spritesï¼‰</strong></p><blockquote><p>é›ªç¢§å›¾ã€CSS ç²¾çµã€CSS Spritesã€å›¾åƒç²¾çµï¼Œè¯´çš„éƒ½æ˜¯è¿™ä¸ªä¸œè¥¿â€”â€”ä¸€ç§å°†å°å›¾æ ‡å’ŒèƒŒæ™¯å›¾åƒåˆå¹¶åˆ°ä¸€å¼ å›¾ç‰‡ä¸Šï¼Œç„¶ååˆ©ç”¨ CSS çš„èƒŒæ™¯å®šä½æ¥æ˜¾ç¤ºå…¶ä¸­çš„æ¯ä¸€éƒ¨åˆ†çš„æŠ€æœ¯ã€‚</p></blockquote><p>MDN å¯¹é›ªç¢§å›¾çš„è§£é‡Šå·²ç»éå¸¸åˆ°ä½ï¼š</p><blockquote><p>å›¾åƒç²¾çµï¼ˆspriteï¼Œæ„ä¸ºç²¾çµï¼‰ï¼Œè¢«è¿ç”¨äºä¼—å¤šä½¿ç”¨å¤§é‡å°å›¾æ ‡çš„ç½‘é¡µåº”ç”¨ä¹‹ä¸Šã€‚å®ƒå¯å–å›¾åƒçš„ä¸€éƒ¨åˆ†æ¥ä½¿ç”¨ï¼Œä½¿å¾—ä½¿ç”¨ä¸€ä¸ªå›¾åƒæ–‡ä»¶æ›¿ä»£å¤šä¸ªå°æ–‡ä»¶æˆä¸ºå¯èƒ½ã€‚ç›¸è¾ƒäºä¸€ä¸ªå°å›¾æ ‡ä¸€ä¸ªå›¾åƒæ–‡ä»¶ï¼Œå•ç‹¬ä¸€å¼ å›¾ç‰‡æ‰€éœ€çš„ HTTP è¯·æ±‚æ›´å°‘ï¼Œå¯¹å†…å­˜å’Œå¸¦å®½æ›´åŠ å‹å¥½ã€‚</p></blockquote><p>æˆ‘ä»¬å‡ ä¹å¯ä»¥åœ¨æ¯ä¸€ä¸ªæœ‰å°å›¾æ ‡å‡ºç°çš„ç½‘ç«™é‡Œæ‰¾åˆ°é›ªç¢§å›¾çš„å½±å­ï¼ˆä¸‹å›¾æˆªå–è‡ªäº¬ä¸œé¦–é¡µï¼‰ï¼š</p><p><img src="`+m+'" alt=""></p><blockquote><p>å’Œé›ªç¢§å›¾ä¸€æ ·ï¼ŒBase64 å›¾ç‰‡çš„å‡ºç°ï¼Œä¹Ÿæ˜¯ä¸ºäº†å‡å°‘åŠ è½½ç½‘é¡µå›¾ç‰‡æ—¶å¯¹æœåŠ¡å™¨çš„è¯·æ±‚æ¬¡æ•°ï¼Œä»è€Œæå‡ç½‘é¡µæ€§èƒ½ã€‚<strong>Base64 æ˜¯ä½œä¸ºé›ªç¢§å›¾çš„è¡¥å……è€Œå­˜åœ¨çš„ã€‚</strong></p></blockquote><p><strong>5.2 ç†è§£ Base64</strong></p><p>é€šè¿‡æˆ‘ä»¬ä¸Šæ–‡çš„æ¼”ç¤ºï¼Œå¤§å®¶ä¸éš¾çœ‹å‡ºï¼Œæ¯æ¬¡åŠ è½½å›¾ç‰‡ï¼Œéƒ½æ˜¯éœ€è¦å•ç‹¬å‘æœåŠ¡å™¨è¯·æ±‚è¿™ä¸ªå›¾ç‰‡å¯¹åº”çš„èµ„æºçš„â€”â€”è¿™ä¹Ÿå°±æ„å‘³ç€ä¸€æ¬¡ HTTP è¯·æ±‚çš„å¼€é”€ã€‚</p><p><strong>Base64 æ˜¯ä¸€ç§ç”¨äºä¼ è¾“ 8Bit å­—èŠ‚ç çš„ç¼–ç æ–¹å¼ï¼Œé€šè¿‡å¯¹å›¾ç‰‡è¿›è¡Œ Base64 ç¼–ç ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å°†ç¼–ç ç»“æœå†™å…¥ HTML æˆ–è€…å†™å…¥ CSSï¼Œä»è€Œå‡å°‘ HTTP è¯·æ±‚çš„æ¬¡æ•°ã€‚</strong></p><p>æˆ‘ä»¬æ¥ä¸€èµ·çœ‹ä¸€ä¸ªå®ä¾‹ï¼Œç°åœ¨æˆ‘æœ‰è¿™ä¹ˆä¸€ä¸ªå°å°çš„æ”¾å¤§é•œ Logoï¼š</p><p><img src="'+v+`" alt=""></p><p>å®ƒå¯¹åº”çš„é“¾æ¥å¦‚ä¸‹ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token literal-property property">https</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>user<span class="token operator">-</span>gold<span class="token operator">-</span>cdn<span class="token punctuation">.</span>xitu<span class="token punctuation">.</span>io<span class="token operator">/</span><span class="token number">2018</span><span class="token operator">/</span><span class="token number">9</span><span class="token operator">/</span><span class="token number">15</span><span class="token operator">/</span>165db7e94699824b<span class="token operator">?</span>w<span class="token operator">=</span><span class="token number">22</span><span class="token operator">&amp;</span>h<span class="token operator">=</span><span class="token number">22</span><span class="token operator">&amp;</span>f<span class="token operator">=</span>png<span class="token operator">&amp;</span>s<span class="token operator">=</span><span class="token number">3680</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æŒ‰ç…§ä¸€è´¯çš„æ€è·¯ï¼Œæˆ‘ä»¬åŠ è½½å›¾ç‰‡éœ€è¦æŠŠå›¾ç‰‡é“¾æ¥å†™å…¥ img æ ‡ç­¾ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">&quot;https://user-gold-cdn.xitu.io/2018/9/15/165db7e94699824b?w=22&amp;h=22&amp;f=png&amp;s=3680&quot;</span><span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>æµè§ˆå™¨å°±ä¼šé’ˆå¯¹æˆ‘ä»¬çš„å›¾ç‰‡é“¾æ¥å»å‘èµ·ä¸€ä¸ªèµ„æºè¯·æ±‚ã€‚</li><li>ä½†æ˜¯å¦‚æœæˆ‘ä»¬å¯¹è¿™ä¸ªå›¾ç‰‡è¿›è¡Œ Base64 ç¼–ç ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ä¸€ä¸ªè¿™æ ·çš„å­—ç¬¦ä¸²ï¼š</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token literal-property property">data</span><span class="token operator">:</span>image<span class="token operator">/</span>png<span class="token punctuation">;</span>base64<span class="token punctuation">,</span>iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAMJGlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU8kagOeWJCQktEAEpITeBCnSpdfQpQo2QhJIKDEkBBU7uqjgWlARwYquitjWAshiw14Wwd4fiKgo62LBhsqbFNDV89477z9n7v3yzz9<span class="token operator">/</span>mcydMwOAehxbJMpFNQDIExaI48MCmeNT05ikR4AECIAKRgEamyMRBcTFRQEoQ<span class="token operator">+</span><span class="token number">9</span><span class="token operator">/</span>yrubAJG9r9nLfP3c<span class="token operator">/</span>19Fk8uTcABA4iBncCWcPMiHAMDdOCJxAQCEXqg3m1YggkyEWQJtMUwQsrmMsxTsIeMMBUfJbRLjgyCnA6BCZbPFWQCoyfJiFnKyoB<span class="token operator">+</span>1pZAdhVyBEHIzZF8On82F<span class="token operator">/</span>BnyqLy8qZDVrSFbZ3znJ<span class="token operator">+</span>sfPjOGfbLZWcOsqEUuKsECiSiXPeP<span class="token operator">/</span>nI7<span class="token operator">/</span>LXm50qEYZrBR<span class="token operator">+</span>eLweFnNsnnLmRopYyrk88KMmFjIWpCvC7hyexk<span class="token operator">/</span>4UvDk5T2HziSIDhngAEASuWygyMhG0A2FebGRCn1vpmCUBZkOPdooqCAlagYi3LFU<span class="token operator">+</span><span class="token constant">OV</span><span class="token operator">/</span>tHpPElIwhCzxfJYMptSaU5SgNLnRj6PNeSzqYifmKLIE20rFCTHQFaDfF<span class="token operator">+</span>SkxCptHlexA<span class="token operator">+</span>KGbIRS<span class="token operator">+</span>NlOcP<span class="token operator">/</span>HAOZ4tB4hQ1mnicZqgvz4gtYMUqO4rDl<span class="token operator">+</span>ehCnlzATwxX<span class="token operator">+</span>MEKeZLxUUN5cnnBIYq6sGKeMEmZP1YuKgiMV47dJsqNU9pjzbzcMJneFHKrpDBhaGxfAVxsinpxICqIS1TkhmtnsyPiFHFxWxAFgkAwYAIpbBlgKsgGgtbehl74S9ETCthADLIAD9grNUMjUuQ9QvhMAEXgL0g8IBkeFyjv5YFCqP8yrFU87UGmvLdQPiIHPIGcByJBLvwtlY8SDkdLBo<span class="token operator">+</span>hRvBTdA7MNRc2Wd9POqb6kI4YQgwmhhNDiTa4Pu6Le<span class="token operator">+</span>NR8OkPmzPugXsO5fXNnvCE0E54RLhB6CDcmSIoFv<span class="token operator">+</span>QORNEgw6YY6iyuozvq8MtoVdXPBD3gf6hb5yB6wN7fAyMFID7wdiuUPt9rtLhir<span class="token operator">/</span>NpdIX2ZGMkkeQ<span class="token operator">/</span>cnWP2Ugm53v61fq1WzVXJV5ZQzPVtCw1Y9egr6bPy58R<span class="token operator">/</span>5oiS3GDmLnsJPYBawZawBM7DjWiF3Gjsp4eG08lq<span class="token operator">+</span>NoWjx8txyoB<span class="token operator">/</span><span class="token constant">BT</span><span class="token operator">/</span>HYypiyWZM41jn2OH5W9oEC3vQC2ccSNFU0QyzI4hcwA<span class="token operator">+</span>BuzWOyhByHUUxnRye4i8r2fsXW8oYh39MRxsVvuvwTAHiWQmXWNx0b7kFHngBAf<span class="token operator">/</span>dNZ<span class="token operator">/</span>YaLvsVABxt40jFhQodLnsQAAWowy9FDxjBvcsaVuQM3IA38AchIALEgkSQCibDOefDdSoG08AsMB<span class="token operator">+</span>UgDKwAqwBVWAT2Ap2gj3gAGgAzeAkOAsugTZwA9yDa6UbvAB94B0YQBCEhNAQOqKHGCMWiB3ijHggvkgIEoXEI6lIOpKFCBEpMgtZgJQh5UgVsgWpRX5HjiAnkQtIO3IH6UR6kNfIJxRDqag2aohaoqNRDzQAjUQT0UloFpqPFqEL0WVoJVqD7kbr0ZPoJfQG2oG<span class="token operator">+</span>QPsxgKliDMwEs8c8sCAsFkvDMjExNgcrxSqwGmwv1gT<span class="token operator">/</span>6WtYB9aLfcSJOB1n4vZwvYbjSTgHz8fn4EvxKnwnXo<span class="token operator">+</span>fxq<span class="token operator">/</span>hnXgf<span class="token operator">/</span>pVAIxgQ7AheBBZhPCGLMI1QQqggbCccJpyB30434R2RSGQQrYju8NtLJWYTZxKXEjcQ9xFPENuJXcR<span class="token operator">+</span>EomkR7Ij<span class="token operator">+</span>ZBiSWxSAamEtI60m3ScdJXUTfqgoqpirOKsEqqSpiJUKVapUNmlckzlqspTlQGyBtmC7EWOJXPJM8jLydvITeQr5G7yAEWTYkXxoSRSsinzKZWUvZQzlPuUN6qqqqaqnqrjVAWq81QrVfernlftVP1I1aLaUoOoE6lS6jLqDuoJ6h3qGxqNZknzp6XRCmjLaLW0U7SHtA9qdDUHNZYaV22uWrVavdpVtZfqZHUL9QD1yepF6hXqB9WvqPdqkDUsNYI02BpzNKo1jmjc0ujXpGs6acZq5mku1dyleUHzmRZJy1IrRIurtVBrq9YprS46RjejB9E59AX0bfQz9G5toraVNks7W7tMe492q3afjpbOGJ1knek61TpHdToYGMOSwWLkMpYzDjBuMj6NMBwRMII3YsmIvSOujnivO1LXX5enW6q7T<span class="token operator">/</span>eG7ic9pl6IXo7eSr0GvQf6uL6t<span class="token operator">/</span>jj9afob9c<span class="token operator">/</span>o947UHuk9kjOydOSBkXcNUANbg3iDmQZbDS4b9BsaGYYZigzXGZ4y7DViGPkbZRutNjpm1GNMN<span class="token operator">/</span>Y1FhivNj5u<span class="token operator">/</span>Jypwwxg5jIrmaeZfSYGJuEmUpMtJq0mA6ZWpkmmxab7TB<span class="token operator">+</span>YUcw8zDLNVpu1mPWZG5tHm88yrzO<span class="token operator">/</span>a0G28LDgW6y1OGfx3tLKMsVykWWD5TMrXSuWVZFVndV9a5q1n3W<span class="token operator">+</span>dY31dRuijYdNjs0GmzZb1NbVlm9bbXvFDrVzsxPYbbBrH0UY5TlKOKpm1C17qn2AfaF9nX2nA8MhyqHYocHh5Wjz0WmjV44<span class="token operator">+</span><span class="token constant">N</span><span class="token operator">/</span>qro6tjruM2x3tOWk4RTsVOTU6vnW2dOc7VztddaC6hLnNdGl1ejbEbwxuzccxtV7prtOsi1xbXL27ubmK3vW497ubu6e7r3W95aHvEeSz1OO9J8Az0nOvZ7PnRy82rwOuA19<span class="token operator">/</span>e9t453ru8n421Gssbu21sl4<span class="token operator">+</span>pD9tni0<span class="token operator">+</span>HL9M33Xezb4efiR<span class="token operator">/</span>br8bvkb<span class="token operator">+</span>ZP9d<span class="token operator">/</span>u<span class="token comment">//TAJuA7IDdAS8DHQPFgYcD3wd5Bc0OOhGMBYcFlwa3hmiFJIVUhTwMNQ3NCq0L7QtzDZsZdiKcEB4ZvjL8FsuQxWHVsvoi3CNmR5yOpEYmRFZFPoqyjRJHNUWj0RHRq6Lvx1jECGMaYkEsK3ZV7IM4q7j8uD/GEcfFjase9yTeKX5W/LkEesKUhF0J7xIDE5cn3kuyTpImtSSrJ09Mrk1+nxKcUp7SMX70+NnjL6XqpwpSG9NIaclp29P6J4RMWDOhe6LrxJKJNydZTZo+6cJk/cm5k49OUZ/CnnIwnZCekr4r/TM7ll3D7s9gZazP6OMEcdZyXnD9uau5PTwfXjnvaaZPZnnmsyyfrFVZPXw/fgW/VxAkqBK8yg7P3pT9Pic2Z0fOYG5K7r48lbz0vCNCLWGO8PRUo6nTp7aL7EQloo58r/w1+X3iSPF2CSKZJGks0IaH7MtSa+kv0s5C38Lqwg/TkqcdnK45XTj98gzbGUtmPC0KLfptJj6TM7Nllsms+bM6ZwfM3jIHmZMxp2Wu2dyFc7vnhc3bOZ8yP2f+n8WOxeXFbxekLGhaaLhw3sKuX8J+qStRKxGX3FrkvWjTYnyxYHHrEpcl65Z8LeWWXixzLKso+7yUs/Tir06/Vv46uCxzWetyt+UbVxBXCFfcXOm3cme5ZnlRedeq6FX1q5mrS1e/XTNlzYWKMRWb1lLWStd2VEZVNq4zX7di3ecqftWN6sDqfesN1i9Z/34Dd8PVjf4b924y3FS26dNmwebbW8K21NdY1lRsJW4t3PpkW/K2c795/Fa7XX972fYvO4Q7OnbG7zxd615bu8tg1/I6tE5a17N74u62PcF7Gvfa792yj7GvbD/YL93//Pf0328eiDzQctDj4N5DFofWH6YfLq1H6mfU9zXwGzoaUxvbj0QcaWnybjr8h8MfO5pNmquP6hxdfoxybOGxweNFx/tPiE70nsw62dUypeXeqfGnrp8ed7r1TOSZ82dDz546F3Du+Hmf880XvC4cuehxseGS26X6y66XD//p+ufhVrfW+ivuVxrbPNua2se2H7vqd/XkteBrZ6+zrl+6EXOj/WbSzdu3Jt7quM29/exO7p1XdwvvDtybd59wv/SBxoOKhwYPa/5l8699HW4dRzuDOy8/Snh0r4vT9eKx5PHn7oVPaE8qnho/rX3m/Ky5J7Sn7fmE590vRC8Gekv+0vxr/Uvrl4f+9v/7ct/4vu5X4leDr5e+0Xuz4+2Yty39cf0P3+W9G3hf+kHvw86PHh/PfUr59HRg2mfS58ovNl+avkZ+vT+YNzgoYovZ8qMABhuamQnA6x0A0FLh2aENAMoExd1MLojiPikn8J9YcX+TixsAO/wBSJoHQBQ8o2yEzQIyFb5lR/BEf4C6uAw3pUgyXZwVvqjwxkL4MDj4xhAAUhMAX8SDgwMbBge/bIPJ3gHgRL7iTigT2R10s4OM2rpfgh/l34RUcT2MnhaNAAAB90lEQVQ4Ee1Tv0tbURQ+5yVqFVHs4pBioSAp1mAxUdq05sfoKrh072QXN6HdnMTVyboLShH8D+xLg8UkhjY/tJlERIQilCpKfbmn3w08eOTdl83Nu5x7z/m+737vnHeJHtZ9d4CDLhARK1esfSChWWF6TSQnRLwnSq2mp2OnQTw3bxS2D349I77bAijuAt0oJNfEtJiKj392c6ZotSfhFJfdfUE+jn1eWZwe6HL6Q0yjqHyE6zALr+eK9bl2rvfsc2wXKwskvAZQbibxYsYL1nu7UJ1H2BKiq+bfsaFslp12jD4bHHPLCdwumQi4bBuiP+Gov3vwaMqEMQqz6EER9fHjwyASMGVdU6KeB2F8jjH9cw2+sS5Hg0jodUTXRNFlEMYvzPyjBVa0YCLZpcoE2pBBTYmokgmjcz5hZl7RJEz/vV2oLDcajR6XvHdYT0qTdzQPfd7s9D/7/gotYhdqn/Chy3ovQrfMVMUwh3HpE51rLaGqw+FMNhH97aa80SisAblC9R1EN/AYej0EpGgXpARyEbzKY4i/NYkHCmux/f3GgBP6l8EjiVp40nD8/c3k2Mm3Uu2pUvIVkBEt3vVIpV/FYhea466Owi7IFPPl40jTcfKojaBNB6mp8Wkvzjc8b7HTPvkyehYKh5NwXGbiP52wD7X76cB/EiWtaCMHwyUAAAAASUVORK5CYII=</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>å­—ç¬¦ä¸²æ¯”è¾ƒé•¿ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ç”¨è¿™ä¸ªå­—ç¬¦ä¸²æ›¿æ¢æ‰ä¸Šæ–‡ä¸­çš„é“¾æ¥åœ°å€ã€‚ä½ ä¼šå‘ç°æµè§ˆå™¨åŸæ¥æ˜¯å¯ä»¥ç†è§£è¿™ä¸ªå­—ç¬¦ä¸²çš„ï¼Œå®ƒè‡ªåŠ¨å°±å°†è¿™ä¸ªå­—ç¬¦ä¸²è§£ç ä¸ºäº†ä¸€ä¸ªå›¾ç‰‡ï¼Œè€Œä¸éœ€å†å»å‘é€ <code>HTTP</code> è¯·æ±‚ã€‚</p></blockquote><p><strong>5.3 Base64 çš„åº”ç”¨åœºæ™¯</strong></p><blockquote><p>æ—¢ç„¶ <code>Base64</code> è¿™ä¹ˆæ£’ï¼Œæˆ‘ä»¬ä½•ä¸æŠŠå¤§å›¾ä¹Ÿæ¢æˆ <code>Base64</code> å‘¢ï¼Ÿ</p></blockquote><ul><li>è¿™æ˜¯å› ä¸ºï¼Œ<code>Base64</code> ç¼–ç åï¼Œå›¾ç‰‡å¤§å°ä¼šè†¨èƒ€ä¸ºåŸæ–‡ä»¶çš„ <code>4/3</code>ï¼ˆè¿™æ˜¯ç”± Base64 çš„ç¼–ç åŸç†å†³å®šçš„ï¼‰ã€‚å¦‚æœæˆ‘ä»¬æŠŠå¤§å›¾ä¹Ÿç¼–ç åˆ° HTML æˆ– CSS æ–‡ä»¶ä¸­ï¼Œåè€…çš„ä½“ç§¯ä¼šæ˜æ˜¾å¢åŠ ï¼Œå³ä¾¿æˆ‘ä»¬å‡å°‘äº† HTTP è¯·æ±‚ï¼Œä¹Ÿæ— æ³•å¼¥è¡¥è¿™åºå¤§çš„ä½“ç§¯å¸¦æ¥çš„æ€§èƒ½å¼€é”€ï¼Œå¾—ä¸å¿å¤±ã€‚</li><li>åœ¨ä¼ è¾“éå¸¸å°çš„å›¾ç‰‡çš„æ—¶å€™ï¼Œ<code>Base64</code> å¸¦æ¥çš„æ–‡ä»¶ä½“ç§¯è†¨èƒ€ã€ä»¥åŠæµè§ˆå™¨è§£æ <code>Base64</code> çš„æ—¶é—´å¼€é”€ï¼Œä¸å®ƒèŠ‚çœæ‰çš„ HTTP è¯·æ±‚å¼€é”€ç›¸æ¯”ï¼Œå¯ä»¥å¿½ç•¥ä¸è®¡ï¼Œè¿™æ—¶å€™æ‰èƒ½çœŸæ­£ä½“ç°å‡ºå®ƒåœ¨æ€§èƒ½æ–¹é¢çš„ä¼˜åŠ¿ã€‚</li></ul><blockquote><p>å› æ­¤ï¼ŒBase64 å¹¶éä¸‡å…¨ä¹‹ç­–ï¼Œæˆ‘ä»¬å¾€å¾€åœ¨ä¸€å¼ å›¾ç‰‡æ»¡è¶³ä»¥ä¸‹æ¡ä»¶æ—¶ä¼šå¯¹å®ƒåº”ç”¨ Base64 ç¼–ç ï¼š</p></blockquote><ul><li>å›¾ç‰‡çš„å®é™…å°ºå¯¸å¾ˆå°ï¼ˆå¤§å®¶å¯ä»¥è§‚å¯Ÿä¸€ä¸‹ä½¿ç”¨çš„é¡µé¢çš„ <code>Base64</code> å›¾ï¼Œå‡ ä¹æ²¡æœ‰è¶…è¿‡ <code>2kb</code> çš„ï¼‰</li><li>å›¾ç‰‡æ— æ³•ä»¥é›ªç¢§å›¾çš„å½¢å¼ä¸å…¶å®ƒå°å›¾ç»“åˆï¼ˆåˆæˆé›ªç¢§å›¾ä»æ˜¯ä¸»è¦çš„å‡å°‘ <code>HTTP</code> è¯·æ±‚çš„é€”å¾„ï¼Œ<code>Base64</code> æ˜¯é›ªç¢§å›¾çš„è¡¥å……ï¼‰</li><li>å›¾ç‰‡çš„æ›´æ–°é¢‘ç‡éå¸¸ä½ï¼ˆä¸éœ€æˆ‘ä»¬é‡å¤ç¼–ç å’Œä¿®æ”¹æ–‡ä»¶å†…å®¹ï¼Œç»´æŠ¤æˆæœ¬è¾ƒä½ï¼‰</li></ul><p><strong>5.4 Base64 ç¼–ç å·¥å…·æ¨è</strong></p><p>è¿™é‡Œæœ€æ¨èçš„æ˜¯åˆ©ç”¨ webpack æ¥è¿›è¡Œ Base64 çš„ç¼–ç â€”â€”webpack çš„ <a href="https://github.com/webpack-contrib/url-loader" target="_blank" rel="noopener noreferrer">url-loader (opens new window)</a> éå¸¸èªæ˜ï¼Œå®ƒé™¤äº†å…·å¤‡åŸºæœ¬çš„ Base64 è½¬ç èƒ½åŠ›ï¼Œè¿˜å¯ä»¥ç»“åˆæ–‡ä»¶å¤§å°ï¼Œå¸®æˆ‘ä»¬åˆ¤æ–­å›¾ç‰‡æ˜¯å¦æœ‰å¿…è¦è¿›è¡Œ Base64 ç¼–ç ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œå¸‚é¢ä¸Šå…è´¹çš„ Base64 ç¼–è§£ç å·¥å…·ç§ç±»æ˜¯éå¸¸å¤šæ ·åŒ–çš„ï¼Œæœ‰å¾ˆå¤šç½‘ç«™éƒ½æä¾›åœ¨çº¿ç¼–è§£ç çš„æœåŠ¡ï¼Œå¤§å®¶é€‰å–è‡ªå·±è®¤ä¸ºé¡ºæ‰‹çš„å·¥å…·å°±å¥½ã€‚</p><p><strong>6. WebP</strong></p><p>å…³é”®å­—ï¼š<strong>å¹´è½»çš„å…¨èƒ½å‹é€‰æ‰‹</strong></p><blockquote><p><code>WebP</code> æ˜¯ä»Šå¤©åœ¨åº§å„ç±»å›¾ç‰‡æ ¼å¼ä¸­æœ€å¹´è½»çš„ä¸€ä½ï¼Œå®ƒäº 2010 å¹´è¢«æå‡ºï¼Œ æ˜¯ Google ä¸“ä¸º Web å¼€å‘çš„ä¸€ç§<strong>æ—¨åœ¨åŠ å¿«å›¾ç‰‡åŠ è½½é€Ÿåº¦</strong> çš„å›¾ç‰‡æ ¼å¼ï¼Œå®ƒæ”¯æŒæœ‰æŸå‹ç¼©å’Œæ— æŸå‹ç¼©ã€‚</p></blockquote><p><strong>6.1 WebP çš„ä¼˜ç‚¹</strong></p><blockquote><p><code>WebP</code> åƒ <code>JPEG</code> ä¸€æ ·å¯¹ç»†èŠ‚ä¸°å¯Œçš„å›¾ç‰‡ä¿¡æ‰‹æ‹ˆæ¥ï¼Œåƒ PNG ä¸€æ ·æ”¯æŒé€æ˜ï¼Œåƒ GIF ä¸€æ ·å¯ä»¥æ˜¾ç¤ºåŠ¨æ€å›¾ç‰‡â€”â€”å®ƒé›†å¤šç§å›¾ç‰‡æ–‡ä»¶æ ¼å¼çš„ä¼˜ç‚¹äºä¸€èº«ã€‚</p></blockquote><p><code>WebP</code> çš„å®˜æ–¹ä»‹ç»å¯¹è¿™ä¸€ç‚¹æœ‰ç€æ›´æƒå¨çš„é˜è¿°ï¼š</p><blockquote><p>ä¸ PNG ç›¸æ¯”ï¼ŒWebP æ— æŸå›¾åƒçš„å°ºå¯¸ç¼©å°äº† 26ï¼…ã€‚åœ¨ç­‰æ•ˆçš„ SSIM è´¨é‡æŒ‡æ•°ä¸‹ï¼ŒWebP æœ‰æŸå›¾åƒæ¯”åŒç±» JPEG å›¾åƒå° 25-34ï¼…ã€‚ æ— æŸ WebP æ”¯æŒé€æ˜åº¦ï¼ˆä¹Ÿç§°ä¸º alpha é€šé“ï¼‰ï¼Œä»…éœ€ 22ï¼… çš„é¢å¤–å­—èŠ‚ã€‚å¯¹äºæœ‰æŸ RGB å‹ç¼©å¯æ¥å—çš„æƒ…å†µï¼Œæœ‰æŸ WebP ä¹Ÿæ”¯æŒé€æ˜åº¦ï¼Œä¸ PNG ç›¸æ¯”ï¼Œé€šå¸¸æä¾› 3 å€çš„æ–‡ä»¶å¤§å°ã€‚</p></blockquote><p>æˆ‘ä»¬å¼€ç¯‡æåˆ°ï¼Œå›¾ç‰‡ä¼˜åŒ–æ˜¯è´¨é‡ä¸æ€§èƒ½çš„åšå¼ˆï¼Œä»è¿™ä¸ªè§’åº¦çœ‹ï¼ŒWebP æ— ç–‘æ˜¯çœŸæ­£çš„èµ¢å®¶ã€‚</p><p><strong>6.2 WebP çš„å±€é™æ€§</strong></p><blockquote><p><code>WebP</code> çºµæœ‰åƒèˆ¬å¥½ï¼Œä½†å®ƒæ¯•ç«Ÿ<strong>å¤ªå¹´è½»</strong> ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œä»»ä½•æ–°ç”Ÿäº‹ç‰©ï¼Œéƒ½é€ƒä¸å¼€å…¼å®¹æ€§çš„å¤§å‘ã€‚ç°åœ¨æ˜¯ 2018 å¹´ 9 æœˆï¼ŒWebP çš„æ”¯æŒæƒ…å†µæ˜¯è¿™æ ·çš„ï¼š</p></blockquote><p><img src="`+g+'" alt=""></p><p>å¦ç™½åœ°è¯´ï¼Œè™½ç„¶æ²¡æœ‰ç‰¹åˆ«æƒ¨ï¼ˆæ¯•ç«Ÿè¿˜æœ‰äº²çˆ¹ Chrome åœ¨æ’‘è…°ï¼‰ï¼Œä½†ä¹Ÿè¶³å¤Ÿè®©äººæœ›è€Œå´æ­¥äº†ã€‚</p><p>æ­¤å¤–ï¼ŒWebP è¿˜ä¼šå¢åŠ æœåŠ¡å™¨çš„è´Ÿæ‹…â€”â€”å’Œç¼–ç  JPG æ–‡ä»¶ç›¸æ¯”ï¼Œç¼–ç åŒæ ·è´¨é‡çš„ WebP æ–‡ä»¶ä¼šå ç”¨æ›´å¤šçš„è®¡ç®—èµ„æºã€‚</p><p><strong>6.3 WebP çš„åº”ç”¨åœºæ™¯</strong></p><ul><li>ç°åœ¨é™åˆ¶æˆ‘ä»¬ä½¿ç”¨ WebP çš„æœ€å¤§é—®é¢˜ä¸æ˜¯â€œè¿™ä¸ªå›¾ç‰‡æ˜¯å¦é€‚åˆç”¨ WebP å‘ˆç°â€çš„é—®é¢˜ï¼Œè€Œæ˜¯â€œæµè§ˆå™¨æ˜¯å¦å…è®¸ WebPâ€çš„é—®é¢˜ï¼Œå³æˆ‘ä»¬ä¸Šæ–‡è°ˆåˆ°çš„å…¼å®¹æ€§é—®é¢˜ã€‚å…·ä½“æ¥è¯´ï¼Œä¸€æ—¦æˆ‘ä»¬é€‰æ‹©äº† WebPï¼Œå°±è¦è€ƒè™‘åœ¨ Safari ç­‰æµè§ˆå™¨ä¸‹å®ƒæ— æ³•æ˜¾ç¤ºçš„é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬éœ€è¦å‡†å¤‡ PlanBï¼Œå‡†å¤‡é™çº§æ–¹æ¡ˆã€‚</li><li>ç›®å‰çœŸæ­£æŠŠ WebP æ ¼å¼è½åœ°åˆ°ç½‘é¡µä¸­çš„ç½‘ç«™å¹¶ä¸æ˜¯å¾ˆå¤šï¼Œè¿™å…¶ä¸­æ·˜å®é¦–é¡µå¯¹ WebP å…¼å®¹æ€§é—®é¢˜çš„å¤„ç†æ–¹å¼å°±éå¸¸æœ‰è¶£ã€‚æˆ‘ä»¬å¯ä»¥æ‰“å¼€ Chrome çš„å¼€å‘è€…å·¥å…·æœç´¢å…¶æºç é‡Œçš„ WebP å…³é”®å­—ï¼š</li></ul><p><img src="'+b+`" alt=""></p><p>æˆ‘ä»¬ä¼šå‘ç°æ£€ç´¢ç»“æœè¿˜æ˜¯æŒºå¤šçš„ï¼ˆå•å°±å›¾ç¤ºçš„åŠ è½½ç»“æœæ¥çœ‹ï¼Œè¶³è¶³æœ‰ 200 å¤šæ¡ï¼‰ï¼Œä¸‹é¢å¤§å®¶æ³¨æ„ä¸€ä¸‹è¿™äº› WebP å›¾ç‰‡çš„é“¾æ¥åœ°å€ï¼ˆä»¥å…¶ä¸­ä¸€ä¸ªä¸ºä¾‹ï¼‰ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">&quot;//img.alicdn.com/tps/i4/TB1CKSgIpXXXXccXXXX07tlTXXX-200-200.png_60x60.jpg_.webp&quot;</span> alt<span class="token operator">=</span><span class="token string">&quot;æ‰‹æœºapp - èšåˆ’ç®—&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;app-icon&quot;</span><span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p><code>.webp</code> å‰é¢ï¼Œè¿˜è·Ÿäº†ä¸€ä¸ª <code>.jpg</code> åç¼€ï¼</p></blockquote><p>æˆ‘ä»¬ç°åœ¨å…ˆå¤§èƒ†åœ°çŒœæµ‹ï¼Œè¿™ä¸ªå›¾ç‰‡åº”è¯¥è‡³å°‘å­˜åœ¨ <code>jpg</code> å’Œ <code>webp</code> ä¸¤ç§æ ¼å¼ï¼Œç¨‹åºä¼šæ ¹æ®æµè§ˆå™¨çš„å‹å·ã€ä»¥åŠè¯¥å‹å·æ˜¯å¦æ”¯æŒ WebP è¿™äº›ä¿¡æ¯æ¥å†³å®šå½“å‰æµè§ˆå™¨æ˜¾ç¤ºçš„æ˜¯ <code>.webp</code> åç¼€è¿˜æ˜¯ <code>.jpg</code> åç¼€ã€‚å¸¦ç€è¿™ä¸ªé¢„åˆ¤ï¼Œæˆ‘ä»¬æ‰“å¼€å¹¶ä¸æ”¯æŒ WebP æ ¼å¼çš„ Safari æ¥è¿›å…¥åŒæ ·çš„é¡µé¢ï¼Œå†æ¬¡æœç´¢ <code>WebP</code> å…³é”®å­—ï¼š</p><p><img src="`+h+`" alt=""></p><p>Safari æç¤ºæˆ‘ä»¬æ‰¾ä¸åˆ°ï¼Œè¿™ä¹Ÿæ˜¯æƒ…ç†ä¹‹ä¸­ã€‚æˆ‘ä»¬å®šä½åˆ°åˆšåˆšç¤ºä¾‹çš„ WebP å›¾ç‰‡æ‰€åœ¨çš„å…ƒç´ ï¼ŒæŸ¥çœ‹ä¸€ä¸‹å®ƒåœ¨ Safari é‡Œçš„å›¾ç‰‡é“¾æ¥ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">&quot;//img.alicdn.com/tps/i4/TB1CKSgIpXXXXccXXXX07tlTXXX-200-200.png_60x60.jpg&quot;</span> alt<span class="token operator">=</span><span class="token string">&quot;æ‰‹æœºapp - èšåˆ’ç®—&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;app-icon&quot;</span><span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>æˆ‘ä»¬çœ‹åˆ°åŒæ ·çš„ä¸€å¼ å›¾ç‰‡ï¼Œåœ¨ Safari ä¸­çš„åç¼€ä» <code>.webp</code> å˜æˆäº† <code>.jpg</code>ï¼çœ‹æ¥æœç„¶å¦‚æ­¤â€”â€”ç«™ç‚¹ç¡®å®æ˜¯å…ˆè¿›è¡Œäº†å…¼å®¹æ€§çš„é¢„åˆ¤ï¼Œåœ¨æµè§ˆå™¨ç¯å¢ƒæ”¯æŒ <code>WebP</code> çš„æƒ…å†µä¸‹ï¼Œä¼˜å…ˆä½¿ç”¨ WebP æ ¼å¼ï¼Œå¦åˆ™å°±æŠŠå›¾ç‰‡é™çº§ä¸º JPG æ ¼å¼ï¼ˆæœ¬è´¨æ˜¯å¯¹å›¾ç‰‡çš„é“¾æ¥åœ°å€ä½œç®€å•çš„å­—ç¬¦ä¸²åˆ‡å‰²ï¼‰ã€‚</li><li>æ­¤å¤–ï¼Œè¿˜æœ‰å¦ä¸€ä¸ªç»´æŠ¤æ€§æ›´å¼ºã€æ›´åŠ çµæ´»çš„æ–¹æ¡ˆâ€”â€”æŠŠåˆ¤æ–­å·¥ä½œäº¤ç»™åç«¯ï¼Œç”±æœåŠ¡å™¨æ ¹æ® <code>HTTP</code> è¯·æ±‚å¤´éƒ¨çš„ Accept å­—æ®µæ¥å†³å®šè¿”å›ä»€ä¹ˆæ ¼å¼çš„å›¾ç‰‡ã€‚å½“ <code>Accept</code> å­—æ®µåŒ…å« <code>image/webp</code> æ—¶ï¼Œå°±è¿”å› <code>WebP</code> æ ¼å¼çš„å›¾ç‰‡ï¼Œå¦åˆ™è¿”å›åŸå›¾ã€‚è¿™ç§åšæ³•çš„å¥½å¤„æ˜¯ï¼Œå½“æµè§ˆå™¨å¯¹ WebP æ ¼å¼å›¾ç‰‡çš„å…¼å®¹æ”¯æŒå‘ç”Ÿæ”¹å˜æ—¶ï¼Œæˆ‘ä»¬ä¹Ÿä¸ç”¨å†å»æ›´æ–°è‡ªå·±çš„å…¼å®¹åˆ¤å®šä»£ç ï¼Œåªéœ€è¦æœåŠ¡ç«¯åƒå¾€å¸¸ä¸€æ ·å¯¹ <code>Accept</code> å­—æ®µè¿›è¡Œæ£€æŸ¥å³å¯ã€‚</li></ul><blockquote><p>ç”±æ­¤ä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬ <code>WebP</code> æ ¼å¼çš„å±€é™æ€§ç¡®å®æ¯”è¾ƒæ˜æ˜¾ï¼Œå¦‚æœå†³å®šä½¿ç”¨ <code>WebP</code>ï¼Œå…¼å®¹æ€§å¤„ç†æ˜¯å¿…ä¸å¯å°‘çš„ã€‚</p></blockquote><h3 id="å°ç»“" tabindex="-1"><a class="header-anchor" href="#å°ç»“"><span>å°ç»“</span></a></h3><ul><li>ä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰æ³¨æ„åˆ°è¿™ä¸€ç‚¹ï¼šåœ¨å›¾ç‰‡è¿™ä¸€èŠ‚ï¼Œæˆ‘ç”¨åˆ°çš„è®¸å¤šæ¡ˆä¾‹å›¾ç¤ºï¼Œéƒ½æ˜¯æºäºä¸€çº¿çš„ç”µå•†ç½‘ç«™ã€‚</li><li>ä¸ºä»€ä¹ˆè¿™ä¹ˆåšï¼Ÿå› ä¸ºå›¾ç‰‡æ˜¯ç”µå•†å¹³å°çš„é‡è¦èµ„æºï¼Œç”šè‡³æœ‰äººè¯´â€œåšç”µå•†å°±æ˜¯åšå›¾ç‰‡â€ã€‚æ·˜å®å’Œäº¬ä¸œï¼Œéƒ½æ˜¯æµé‡å·¨å¤§ã€æŠ€æœ¯æˆç†Ÿçš„ç«™ç‚¹ï¼Œå®ƒä»¬åœ¨æ€§èƒ½ä¼˜åŒ–æ–¹é¢èµ·æ­¥æ—©ã€æˆæ•ˆå¥½ï¼Œå¾ˆå¤šæ–¹é¢è¯´æ˜¯æ•™ç§‘ä¹¦èˆ¬çš„æ¡ˆä¾‹ä¹Ÿä¸ä¸ºè¿‡ã€‚</li><li>è¿™ä¹Ÿæ˜¯éå¸¸é‡è¦çš„ä¸€ä¸ªå­¦ä¹ æ–¹æ³•ã€‚åœ¨å¼€ç¯‡æˆ‘æåˆ°ï¼Œæ€§èƒ½ä¼˜åŒ–ä¸é‚£ä¹ˆå¥½å­¦ï¼Œæœ‰å¾ˆå¤§åŸå› æ˜¯å› ä¸ºè¿™å—çš„çŸ¥è¯†ä¸æˆä½“ç³»ã€éš¾ä»¥åˆ‡å…¥ï¼ŒåŒæ—¶æŠ€æœ¯æ–¹æ¡ˆåˆè¿­ä»£å¾—é£å¿«ã€‚å½“æˆ‘ä»¬ä¸çŸ¥é“æ€ä¹ˆåˆ‡å…¥çš„æ—¶å€™ï¼Œæˆ–è€…è¯´å½“æˆ‘ä»¬é¢å¯¹ä¸€ä¸ªå…·ä½“çš„é—®é¢˜æ— ä»ä¸‹æ‰‹çš„æ—¶å€™ï¼Œé™¤äº†ç¿»é˜…æ‰‹ä¸­çš„ä¹¦æœ¬ï¼ˆå¾ˆå¯èƒ½æ˜¯å·²ç»è¿‡æ—¶çš„ï¼‰å’Œç½‘ç»œä¸Šæ”¶è—çš„æ–‡ç« ï¼ˆä¹Ÿè®¸æ²¡é‚£ä¹ˆæƒå¨ï¼‰ï¼Œç°åœ¨æ˜¯ä¸æ˜¯åˆå¤šäº†â€œæ‰“å¼€é‚£äº›ä¼˜ç§€çš„ç½‘ç«™çœ‹ä¸€çœ‹â€è¿™æ¡è·¯å¯ä»¥èµ°äº†å‘¢ï¼Ÿ</li><li>å¥½äº†ï¼Œè‡³æ­¤ï¼Œæˆ‘ä»¬ç»ˆäºç»“æŸäº†å›¾ç‰‡ä¼˜åŒ–çš„å¾ç¨‹ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬ä»¥å­˜å‚¨ç¯‡ä¸ºè¿‡æ¸¡ï¼Œè¿›å…¥ JS å’Œ CSS çš„ä¸–ç•Œï¼</li></ul><h2 id="å››ã€å­˜å‚¨ç¯‡-1-æµè§ˆå™¨ç¼“å­˜æœºåˆ¶ä»‹ç»ä¸ç¼“å­˜ç­–ç•¥å‰–æ" tabindex="-1"><a class="header-anchor" href="#å››ã€å­˜å‚¨ç¯‡-1-æµè§ˆå™¨ç¼“å­˜æœºåˆ¶ä»‹ç»ä¸ç¼“å­˜ç­–ç•¥å‰–æ"><span>å››ã€å­˜å‚¨ç¯‡ 1ï¼šæµè§ˆå™¨ç¼“å­˜æœºåˆ¶ä»‹ç»ä¸ç¼“å­˜ç­–ç•¥å‰–æ</span></a></h2><blockquote><p>ç¼“å­˜å¯ä»¥å‡å°‘ç½‘ç»œ <code>IO</code> æ¶ˆè€—ï¼Œæé«˜è®¿é—®é€Ÿåº¦ã€‚æµè§ˆå™¨ç¼“å­˜æ˜¯ä¸€ç§æ“ä½œç®€å•ã€æ•ˆæœæ˜¾è‘—çš„å‰ç«¯æ€§èƒ½ä¼˜åŒ–æ‰‹æ®µã€‚å¯¹äºè¿™ä¸ªæ“ä½œçš„å¿…è¦æ€§ï¼ŒChrome å®˜æ–¹ç»™å‡ºçš„è§£é‡Šä¼¼ä¹æ›´æœ‰è¯´æœåŠ›ä¸€äº›ï¼š</p></blockquote><blockquote><p>é€šè¿‡ç½‘ç»œè·å–å†…å®¹æ—¢é€Ÿåº¦ç¼“æ…¢åˆå¼€é”€å·¨å¤§ã€‚è¾ƒå¤§çš„å“åº”éœ€è¦åœ¨å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´è¿›è¡Œå¤šæ¬¡å¾€è¿”é€šä¿¡ï¼Œè¿™ä¼šå»¶è¿Ÿæµè§ˆå™¨è·å¾—å’Œå¤„ç†å†…å®¹çš„æ—¶é—´ï¼Œè¿˜ä¼šå¢åŠ è®¿é—®è€…çš„æµé‡è´¹ç”¨ã€‚å› æ­¤ï¼Œç¼“å­˜å¹¶é‡å¤åˆ©ç”¨ä¹‹å‰è·å–çš„èµ„æºçš„èƒ½åŠ›æˆä¸ºæ€§èƒ½ä¼˜åŒ–çš„ä¸€ä¸ªå…³é”®æ–¹é¢ã€‚</p></blockquote><ul><li>å¾ˆå¤šæ—¶å€™ï¼Œå¤§å®¶å€¾å‘äºå°†æµè§ˆå™¨ç¼“å­˜ç®€å•åœ°ç†è§£ä¸ºâ€œHTTP ç¼“å­˜â€ã€‚ä½†äº‹å®ä¸Šï¼Œæµè§ˆå™¨ç¼“å­˜æœºåˆ¶æœ‰å››ä¸ªæ–¹é¢ï¼Œå®ƒä»¬æŒ‰ç…§è·å–èµ„æºæ—¶è¯·æ±‚çš„ä¼˜å…ˆçº§ä¾æ¬¡æ’åˆ—å¦‚ä¸‹ï¼š</li></ul><ol><li><code>Memory Cache</code></li><li><code>Service Worker Cache</code></li><li><code>HTTP Cache</code></li><li><code>Push Cache</code></li></ol><blockquote><p>å¤§å®¶å¯¹ <code>HTTP Cache</code>ï¼ˆå³ <code>Cache-Control</code>ã€<code>expires</code> ç­‰å­—æ®µæ§åˆ¶çš„ç¼“å­˜ï¼‰åº”è¯¥æ¯”è¾ƒç†Ÿæ‚‰ï¼Œå¦‚æœå¯¹å…¶å®ƒå‡ ç§ç¼“å­˜å¯èƒ½è¿˜æ²¡ä»€ä¹ˆæ¦‚å¿µï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæ¥çœ‹ä¸€å¼ çº¿ä¸Šç½‘ç«™çš„ <code>Network</code> é¢æ¿æˆªå›¾ï¼š</p></blockquote><p><img src="`+_+'" alt=""></p><p>æˆ‘ä»¬ç»™ <code>size</code> è¿™ä¸€æ ä¸€ä¸ªç‰¹å†™ï¼š</p><p><img src="'+f+'" alt=""></p><blockquote><p>å¤§å®¶æ³¨æ„ä¸€ä¸‹éæ•°å­—â€”â€”å³å½¢å¦‚â€œï¼ˆ<code>from xxx</code>ï¼‰â€è¿™æ ·çš„æè¿°â€”â€”å¯¹åº”çš„èµ„æºï¼Œè¿™äº›èµ„æºå°±æ˜¯æˆ‘ä»¬é€šè¿‡ç¼“å­˜è·å–åˆ°çš„ã€‚å…¶ä¸­ï¼Œâ€œfrom memory cacheâ€å¯¹æ ‡åˆ° <code>Memory Cache</code> ç±»å‹ï¼Œâ€œ<code>from ServiceWorker</code>â€å¯¹æ ‡åˆ° <code>Service Worker Cache</code> ç±»å‹ã€‚è‡³äº <code>Push Cache</code>ï¼Œè¿™ä¸ªæ¯”è¾ƒç‰¹æ®Šï¼Œæ˜¯ <code>HTTP2</code> çš„æ–°ç‰¹æ€§ã€‚</p></blockquote><p>æœ¬èŠ‚å°†ä¼šé’ˆå¯¹è¿™å››ä¸ªæ–¹é¢å„ä¸ªå‡»ç ´ã€‚è€ƒè™‘åˆ° HTTP ç¼“å­˜æ˜¯æœ€ä¸»è¦ã€æœ€å…·æœ‰ä»£è¡¨æ€§çš„ç¼“å­˜ç­–ç•¥ï¼Œä¹Ÿæ˜¯æ¯ä¸€ä½å‰ç«¯å·¥ç¨‹å¸ˆéƒ½åº”è¯¥æ·±åˆ»ç†è§£æŒæ¡çš„æ€§èƒ½ä¼˜åŒ–çŸ¥è¯†ç‚¹ï¼Œæˆ‘ä»¬ä¸‹é¢ä¼˜å…ˆé’ˆå¯¹ HTTP ç¼“å­˜æœºåˆ¶è¿›è¡Œå‰–æã€‚</p><h3 id="http-ç¼“å­˜æœºåˆ¶æ¢ç§˜" tabindex="-1"><a class="header-anchor" href="#http-ç¼“å­˜æœºåˆ¶æ¢ç§˜"><span>HTTP ç¼“å­˜æœºåˆ¶æ¢ç§˜</span></a></h3><p>HTTP ç¼“å­˜æ˜¯æˆ‘ä»¬æ—¥å¸¸å¼€å‘ä¸­æœ€ä¸ºç†Ÿæ‚‰çš„ä¸€ç§ç¼“å­˜æœºåˆ¶ã€‚å®ƒåˆåˆ†ä¸º<strong>å¼ºç¼“å­˜</strong> å’Œ<strong>åå•†ç¼“å­˜</strong> ã€‚ä¼˜å…ˆçº§è¾ƒé«˜çš„æ˜¯å¼ºç¼“å­˜ï¼Œåœ¨å‘½ä¸­å¼ºç¼“å­˜å¤±è´¥çš„æƒ…å†µä¸‹ï¼Œæ‰ä¼šèµ°åå•†ç¼“å­˜ã€‚</p><p><strong>1. å¼ºç¼“å­˜çš„ç‰¹å¾</strong></p><blockquote><p>å¼ºç¼“å­˜æ˜¯åˆ©ç”¨ <code>http</code> å¤´ä¸­çš„ <code>Expires</code> å’Œ <code>Cache-Control</code> ä¸¤ä¸ªå­—æ®µæ¥æ§åˆ¶çš„ã€‚å¼ºç¼“å­˜ä¸­ï¼Œå½“è¯·æ±‚å†æ¬¡å‘å‡ºæ—¶ï¼Œæµè§ˆå™¨ä¼šæ ¹æ®å…¶ä¸­çš„ <code>expires</code> å’Œ <code>cache-control</code> åˆ¤æ–­ç›®æ ‡èµ„æºæ˜¯å¦â€œå‘½ä¸­â€å¼ºç¼“å­˜ï¼Œè‹¥å‘½ä¸­åˆ™ç›´æ¥ä»ç¼“å­˜ä¸­è·å–èµ„æºï¼Œ<strong>ä¸ä¼šå†ä¸æœåŠ¡ç«¯å‘ç”Ÿé€šä¿¡ã€‚</strong></p></blockquote><p>å‘½ä¸­å¼ºç¼“å­˜çš„æƒ…å†µä¸‹ï¼Œè¿”å›çš„ <code>HTTP</code> çŠ¶æ€ç ä¸º <code>200</code> ï¼ˆå¦‚ä¸‹å›¾ï¼‰ã€‚</p><p><img src="'+q+'" alt=""></p><p><strong>2. å¼ºç¼“å­˜çš„å®ç°ï¼šä» expires åˆ° cache-control</strong></p><ul><li>å®ç°å¼ºç¼“å­˜ï¼Œè¿‡å»æˆ‘ä»¬ä¸€ç›´ç”¨ <code>expires</code>ã€‚</li><li>å½“æœåŠ¡å™¨è¿”å›å“åº”æ—¶ï¼Œåœ¨ <code>Response Headers</code> ä¸­å°†è¿‡æœŸæ—¶é—´å†™å…¥ <code>expires</code> å­—æ®µã€‚åƒè¿™æ ·ï¼š</li></ul><p><img src="'+y+`" alt=""></p><p>æˆ‘ä»¬ç»™ <code>expires</code> ä¸€ä¸ªç‰¹å†™ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token literal-property property">expires</span><span class="token operator">:</span> Wed<span class="token punctuation">,</span> <span class="token number">11</span> Sep <span class="token number">2019</span> <span class="token number">16</span><span class="token operator">:</span><span class="token number">12</span><span class="token operator">:</span><span class="token number">18</span> <span class="token constant">GMT</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>å¯ä»¥çœ‹åˆ°ï¼Œ<code>expires</code> æ˜¯ä¸€ä¸ªæ—¶é—´æˆ³ï¼Œæ¥ä¸‹æ¥å¦‚æœæˆ‘ä»¬è¯•å›¾å†æ¬¡å‘æœåŠ¡å™¨è¯·æ±‚èµ„æºï¼Œæµè§ˆå™¨å°±ä¼šå…ˆå¯¹æ¯”æœ¬åœ°æ—¶é—´å’Œ <code>expires</code> çš„æ—¶é—´æˆ³ï¼Œå¦‚æœæœ¬åœ°æ—¶é—´å°äº <code>expires</code> è®¾å®šçš„è¿‡æœŸæ—¶é—´ï¼Œé‚£ä¹ˆå°±ç›´æ¥å»ç¼“å­˜ä¸­å–è¿™ä¸ªèµ„æºã€‚</li><li>ä»è¿™æ ·çš„æè¿°ä¸­å¤§å®¶ä¹Ÿä¸éš¾çŒœæµ‹ï¼Œ<code>expires</code> æ˜¯æœ‰é—®é¢˜çš„ï¼Œå®ƒæœ€å¤§çš„é—®é¢˜åœ¨äºå¯¹â€œæœ¬åœ°æ—¶é—´â€çš„ä¾èµ–ã€‚å¦‚æœæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„æ—¶é—´è®¾ç½®å¯èƒ½ä¸åŒï¼Œæˆ–è€…æˆ‘ç›´æ¥æ‰‹åŠ¨å»æŠŠå®¢æˆ·ç«¯çš„æ—¶é—´æ”¹æ‰ï¼Œé‚£ä¹ˆ <code>expires</code> å°†æ— æ³•è¾¾åˆ°æˆ‘ä»¬çš„é¢„æœŸã€‚</li><li>è€ƒè™‘åˆ° <code>expires</code> çš„å±€é™æ€§ï¼Œ<code>HTTP1.1</code> æ–°å¢äº† <code>Cache-Control</code> å­—æ®µæ¥å®Œæˆ <code>expires</code> çš„ä»»åŠ¡ã€‚<br> expires èƒ½åšçš„äº‹æƒ…ï¼ŒCache-Control éƒ½èƒ½åšï¼›<code>expires</code> å®Œæˆä¸äº†çš„äº‹æƒ…ï¼Œ<code>Cache-Control</code> ä¹Ÿèƒ½åšã€‚å› æ­¤ï¼Œ<code>Cache-Control</code> å¯ä»¥è§†ä½œæ˜¯ <code>expires</code> çš„<strong>å®Œå…¨æ›¿ä»£æ–¹æ¡ˆ</strong> ã€‚åœ¨å½“ä¸‹çš„å‰ç«¯å®è·µé‡Œï¼Œæˆ‘ä»¬ç»§ç»­ä½¿ç”¨ <code>expires</code> çš„å”¯ä¸€ç›®çš„å°±æ˜¯<strong>å‘ä¸‹å…¼å®¹</strong> ã€‚</li></ul><blockquote><p>ç°åœ¨æˆ‘ä»¬ç»™ <code>Cache-Control</code> å­—æ®µä¸€ä¸ªç‰¹å†™ï¼š</p></blockquote><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    cache<span class="token operator">-</span>control<span class="token operator">:</span> max<span class="token operator">-</span>age<span class="token operator">=</span><span class="token number">31536000</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>å¦‚å¤§å®¶æ‰€è§ï¼Œåœ¨ <code>Cache-Control</code> ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ <code>max-age</code> æ¥æ§åˆ¶èµ„æºçš„æœ‰æ•ˆæœŸã€‚<code>max-age</code> ä¸æ˜¯ä¸€ä¸ªæ—¶é—´æˆ³ï¼Œè€Œæ˜¯ä¸€ä¸ªæ—¶é—´é•¿åº¦ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œ<code>max-age</code> æ˜¯ 31536000 ç§’ï¼Œå®ƒæ„å‘³ç€è¯¥èµ„æºåœ¨ 31536000 ç§’ä»¥å†…éƒ½æ˜¯æœ‰æ•ˆçš„ï¼Œå®Œç¾åœ°è§„é¿äº†æ—¶é—´æˆ³å¸¦æ¥çš„æ½œåœ¨é—®é¢˜ã€‚</p></blockquote><p><strong>Cache-Control ç›¸å¯¹äº expires æ›´åŠ å‡†ç¡®ï¼Œå®ƒçš„ä¼˜å…ˆçº§ä¹Ÿæ›´é«˜ã€‚å½“ Cache-Control ä¸ expires åŒæ—¶å‡ºç°æ—¶ï¼Œæˆ‘ä»¬ä»¥ Cache-Control ä¸ºå‡†ã€‚</strong></p><p><strong>3. Cache-Control åº”ç”¨åˆ†æ</strong></p><blockquote><p><code>Cache-Control</code> çš„ç¥é€šï¼Œå¯ä¸æ­¢äºè¿™ä¸€ä¸ªå°å°çš„ <code>max-age</code>ã€‚å¦‚ä¸‹çš„ç”¨æ³•ä¹Ÿéå¸¸å¸¸è§ï¼š</p></blockquote><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    cache<span class="token operator">-</span>control<span class="token operator">:</span> max<span class="token operator">-</span>age<span class="token operator">=</span><span class="token number">3600</span><span class="token punctuation">,</span> s<span class="token operator">-</span>maxage<span class="token operator">=</span><span class="token number">31536000</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>s-maxage ä¼˜å…ˆçº§é«˜äº max-ageï¼Œä¸¤è€…åŒæ—¶å‡ºç°æ—¶ï¼Œä¼˜å…ˆè€ƒè™‘ s-maxageã€‚å¦‚æœ s-maxage æœªè¿‡æœŸï¼Œåˆ™å‘ä»£ç†æœåŠ¡å™¨è¯·æ±‚å…¶ç¼“å­˜å†…å®¹ã€‚</strong></p><blockquote><p>è¿™ä¸ª <code>s-maxage</code> ä¸åƒ <code>max-age</code> ä¸€æ ·ä¸ºå¤§å®¶æ‰€ç†ŸçŸ¥ã€‚çš„ç¡®ï¼Œåœ¨é¡¹ç›®ä¸æ˜¯ç‰¹åˆ«å¤§çš„åœºæ™¯ä¸‹ï¼Œ<code>max-age</code> è¶³å¤Ÿç”¨äº†ã€‚ä½†åœ¨ä¾èµ–å„ç§<strong>ä»£ç†</strong> çš„å¤§å‹æ¶æ„ä¸­ï¼Œæˆ‘ä»¬ä¸å¾—ä¸è€ƒè™‘<strong>ä»£ç†æœåŠ¡å™¨</strong> çš„ç¼“å­˜é—®é¢˜ã€‚<code>s-maxage</code> å°±æ˜¯ç”¨äºè¡¨ç¤º <code>cache</code> æœåŠ¡å™¨ä¸Šï¼ˆæ¯”å¦‚ <code>cache CDN</code>ï¼‰çš„ç¼“å­˜çš„æœ‰æ•ˆæ—¶é—´çš„ï¼Œå¹¶åªå¯¹ <code>public</code> ç¼“å­˜æœ‰æ•ˆã€‚</p></blockquote><ul><li>æ­¤å¤„åº”æ³¨æ„è¿™æ ·ä¸€ä¸ªç»†èŠ‚ï¼š<code>s-maxage</code>ä»…åœ¨ä»£ç†æœåŠ¡å™¨ä¸­ç”Ÿæ•ˆï¼Œå®¢æˆ·ç«¯ä¸­æˆ‘ä»¬åªè€ƒè™‘<code>max-age</code></li><li>é‚£ä¹ˆä»€ä¹ˆæ˜¯ <code>public</code> ç¼“å­˜å‘¢ï¼Ÿè¯´åˆ°è¿™é‡Œï¼Œ<code>Cache-Control</code> ä¸­æœ‰ä¸€äº›é€‚åˆæ”¾åœ¨ä¸€èµ·ç†è§£çš„çŸ¥è¯†ç‚¹ï¼Œæˆ‘ä»¬é›†ä¸­æ¢³ç†ä¸€ä¸‹ï¼š</li></ul><p><strong>3.1 public ä¸ private</strong></p><ul><li><code>public</code> ä¸ <code>private</code> æ˜¯é’ˆå¯¹èµ„æºæ˜¯å¦èƒ½å¤Ÿè¢«ä»£ç†æœåŠ¡ç¼“å­˜è€Œå­˜åœ¨çš„ä¸€ç»„å¯¹ç«‹æ¦‚å¿µã€‚</li><li>å¦‚æœæˆ‘ä»¬ä¸ºèµ„æºè®¾ç½®äº† <code>public</code>ï¼Œé‚£ä¹ˆå®ƒæ—¢å¯ä»¥è¢«æµè§ˆå™¨ç¼“å­˜ï¼Œä¹Ÿå¯ä»¥è¢«ä»£ç†æœåŠ¡å™¨ç¼“å­˜ï¼›å¦‚æœæˆ‘ä»¬è®¾ç½®äº† <code>private</code>ï¼Œåˆ™è¯¥èµ„æºåªèƒ½è¢«æµè§ˆå™¨ç¼“å­˜ã€‚<code>private</code> ä¸º<strong>é»˜è®¤å€¼</strong> ã€‚ä½†å¤šæ•°æƒ…å†µä¸‹ï¼Œ<code>public</code> å¹¶ä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨è®¾ç½®ï¼Œæ¯”å¦‚æœ‰å¾ˆå¤šçº¿ä¸Šç½‘ç«™çš„ <code>cache-control</code> æ˜¯è¿™æ ·çš„ï¼š</li></ul><p><img src="`+w+'" alt=""></p><blockquote><p>è®¾ç½®äº† <code>s-maxage</code>ï¼Œæ²¡è®¾ç½® <code>public</code>ï¼Œé‚£ä¹ˆ <code>CDN</code> è¿˜å¯ä»¥ç¼“å­˜è¿™ä¸ªèµ„æºå—ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚å› ä¸ºæ˜ç¡®çš„ç¼“å­˜ä¿¡æ¯ï¼ˆä¾‹å¦‚â€œ<code>max- age</code>â€ï¼‰å·²è¡¨ç¤ºå“åº”æ˜¯å¯ä»¥ç¼“å­˜çš„ã€‚</p></blockquote><p><strong>3.2 no-storeä¸no-cache</strong></p><ul><li><code>no-cache</code> ç»•å¼€äº†æµè§ˆå™¨ï¼šæˆ‘ä»¬ä¸ºèµ„æºè®¾ç½®äº† <code>no-cache</code> åï¼Œæ¯ä¸€æ¬¡å‘èµ·è¯·æ±‚éƒ½ä¸ä¼šå†å»è¯¢é—®æµè§ˆå™¨çš„ç¼“å­˜æƒ…å†µï¼Œè€Œæ˜¯ç›´æ¥å‘æœåŠ¡ç«¯å»ç¡®è®¤è¯¥èµ„æºæ˜¯å¦è¿‡æœŸï¼ˆå³èµ°æˆ‘ä»¬ä¸‹æ–‡å³å°†è®²è§£çš„åå•†ç¼“å­˜çš„è·¯çº¿ï¼‰ã€‚</li><li><code>no-store</code> æ¯”è¾ƒç»æƒ…ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯ä¸ä½¿ç”¨ä»»ä½•ç¼“å­˜ç­–ç•¥ã€‚åœ¨ <code>no-cache</code> çš„åŸºç¡€ä¸Šï¼Œå®ƒè¿æœåŠ¡ç«¯çš„ç¼“å­˜ç¡®è®¤ä¹Ÿç»•å¼€äº†ï¼Œåªå…è®¸ä½ ç›´æ¥å‘æœåŠ¡ç«¯å‘é€è¯·æ±‚ã€å¹¶ä¸‹è½½å®Œæ•´çš„å“åº”ã€‚</li></ul><p><strong>4. åå•†ç¼“å­˜ï¼šæµè§ˆå™¨ä¸æœåŠ¡å™¨åˆä½œä¹‹ä¸‹çš„ç¼“å­˜ç­–ç•¥</strong></p><ul><li>åå•†ç¼“å­˜ä¾èµ–äºæœåŠ¡ç«¯ä¸æµè§ˆå™¨ä¹‹é—´çš„é€šä¿¡ã€‚</li></ul><blockquote><p>åå•†ç¼“å­˜æœºåˆ¶ä¸‹ï¼Œæµè§ˆå™¨éœ€è¦å‘æœåŠ¡å™¨å»è¯¢é—®ç¼“å­˜çš„ç›¸å…³ä¿¡æ¯ï¼Œè¿›è€Œåˆ¤æ–­æ˜¯é‡æ–°å‘èµ·è¯·æ±‚ã€ä¸‹è½½å®Œæ•´çš„å“åº”ï¼Œè¿˜æ˜¯ä»æœ¬åœ°è·å–ç¼“å­˜çš„èµ„æºã€‚</p></blockquote><p>å¦‚æœæœåŠ¡ç«¯æç¤ºç¼“å­˜èµ„æºæœªæ”¹åŠ¨ï¼ˆ<code>Not Modified</code>ï¼‰ï¼Œèµ„æºä¼šè¢«<strong>é‡å®šå‘</strong> åˆ°æµè§ˆå™¨ç¼“å­˜ï¼Œ<strong>è¿™ç§æƒ…å†µä¸‹ç½‘ç»œè¯·æ±‚å¯¹åº”çš„çŠ¶æ€ç æ˜¯ 304</strong> ï¼ˆå¦‚ä¸‹å›¾ï¼‰ã€‚</p><p><img src="'+S+`" alt=""></p><p><strong>5. åå•†ç¼“å­˜çš„å®ç°ï¼šä» Last-Modified åˆ° Etag</strong></p><blockquote><p><code>Last-Modified</code> æ˜¯ä¸€ä¸ªæ—¶é—´æˆ³ï¼Œå¦‚æœæˆ‘ä»¬å¯ç”¨äº†åå•†ç¼“å­˜ï¼Œå®ƒä¼šåœ¨é¦–æ¬¡è¯·æ±‚æ—¶éšç€ <code>Response Headers</code> è¿”å›ï¼š</p></blockquote><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    Last<span class="token operator">-</span>Modified<span class="token operator">:</span> Fri<span class="token punctuation">,</span> <span class="token number">27</span> Oct <span class="token number">2017</span> <span class="token number">06</span><span class="token operator">:</span><span class="token number">35</span><span class="token operator">:</span><span class="token number">57</span> <span class="token constant">GMT</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>éšåæˆ‘ä»¬æ¯æ¬¡è¯·æ±‚æ—¶ï¼Œä¼šå¸¦ä¸Šä¸€ä¸ªå« <code>If-Modified-Since</code> çš„æ—¶é—´æˆ³å­—æ®µï¼Œå®ƒçš„å€¼æ­£æ˜¯ä¸Šä¸€æ¬¡ <code>response</code> è¿”å›ç»™å®ƒçš„ <code>last- modified</code> å€¼ï¼š</p></blockquote><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    If<span class="token operator">-</span>Modified<span class="token operator">-</span>Since<span class="token operator">:</span> Fri<span class="token punctuation">,</span> <span class="token number">27</span> Oct <span class="token number">2017</span> <span class="token number">06</span><span class="token operator">:</span><span class="token number">35</span><span class="token operator">:</span><span class="token number">57</span> <span class="token constant">GMT</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>æœåŠ¡å™¨æ¥æ”¶åˆ°è¿™ä¸ªæ—¶é—´æˆ³åï¼Œä¼šæ¯”å¯¹è¯¥æ—¶é—´æˆ³å’Œèµ„æºåœ¨æœåŠ¡å™¨ä¸Šçš„æœ€åä¿®æ”¹æ—¶é—´æ˜¯å¦ä¸€è‡´ï¼Œä»è€Œåˆ¤æ–­èµ„æºæ˜¯å¦å‘ç”Ÿäº†å˜åŒ–ã€‚å¦‚æœå‘ç”Ÿäº†å˜åŒ–ï¼Œå°±ä¼šè¿”å›ä¸€ä¸ªå®Œæ•´çš„å“åº”å†…å®¹ï¼Œå¹¶åœ¨ <code>Response Headers</code> ä¸­æ·»åŠ æ–°çš„ <code>Last-Modified</code>å€¼ï¼›å¦åˆ™ï¼Œè¿”å›å¦‚ä¸Šå›¾çš„ <code>304</code> å“åº”ï¼Œ<code>Response Headers</code> ä¸ä¼šå†æ·»åŠ  <code>Last-Modified</code> å­—æ®µã€‚</p></blockquote><p><strong>ä½¿ç”¨ Last-Modified å­˜åœ¨ä¸€äº›å¼Šç«¯ï¼Œè¿™å…¶ä¸­æœ€å¸¸è§çš„å°±æ˜¯è¿™æ ·ä¸¤ä¸ªåœºæ™¯ï¼š</strong></p><ul><li>æˆ‘ä»¬ç¼–è¾‘äº†æ–‡ä»¶ï¼Œä½†æ–‡ä»¶çš„å†…å®¹æ²¡æœ‰æ”¹å˜ã€‚æœåŠ¡ç«¯å¹¶ä¸æ¸…æ¥šæˆ‘ä»¬æ˜¯å¦çœŸæ­£æ”¹å˜äº†æ–‡ä»¶ï¼Œå®ƒä»ç„¶é€šè¿‡æœ€åç¼–è¾‘æ—¶é—´è¿›è¡Œåˆ¤æ–­ã€‚å› æ­¤è¿™ä¸ªèµ„æºåœ¨å†æ¬¡è¢«è¯·æ±‚æ—¶ï¼Œä¼šè¢«å½“åšæ–°èµ„æºï¼Œè¿›è€Œå¼•å‘ä¸€æ¬¡å®Œæ•´çš„å“åº”â€”â€”ä¸è¯¥é‡æ–°è¯·æ±‚çš„æ—¶å€™ï¼Œä¹Ÿä¼šé‡æ–°è¯·æ±‚ã€‚</li><li>å½“æˆ‘ä»¬ä¿®æ”¹æ–‡ä»¶çš„é€Ÿåº¦è¿‡å¿«æ—¶ï¼ˆæ¯”å¦‚èŠ±äº† <code>100ms</code> å®Œæˆäº†æ”¹åŠ¨ï¼‰ï¼Œç”±äº <code>If-Modified-Since</code> åªèƒ½æ£€æŸ¥åˆ°ä»¥ç§’ä¸ºæœ€å°è®¡é‡å•ä½çš„æ—¶é—´å·®ï¼Œæ‰€ä»¥å®ƒæ˜¯æ„ŸçŸ¥ä¸åˆ°è¿™ä¸ªæ”¹åŠ¨çš„â€”â€”è¯¥é‡æ–°è¯·æ±‚çš„æ—¶å€™ï¼Œåè€Œæ²¡æœ‰é‡æ–°è¯·æ±‚äº†ã€‚</li></ul><blockquote><p>è¿™ä¸¤ä¸ªåœºæ™¯å…¶å®æŒ‡å‘äº†åŒä¸€ä¸ª <code>bug</code>â€”â€”æœåŠ¡å™¨å¹¶æ²¡æœ‰æ­£ç¡®æ„ŸçŸ¥æ–‡ä»¶çš„å˜åŒ–ã€‚ä¸ºäº†è§£å†³è¿™æ ·çš„é—®é¢˜ï¼Œ<code>Etag</code> ä½œä¸º <code>Last-Modified</code> çš„è¡¥å……å‡ºç°äº†ã€‚</p></blockquote><ul><li><code>Etag</code> æ˜¯ç”±æœåŠ¡å™¨ä¸ºæ¯ä¸ªèµ„æºç”Ÿæˆçš„å”¯ä¸€çš„<strong>æ ‡è¯†å­—ç¬¦ä¸²</strong> ï¼Œè¿™ä¸ªæ ‡è¯†å­—ç¬¦ä¸²æ˜¯åŸºäºæ–‡ä»¶å†…å®¹ç¼–ç çš„ï¼Œåªè¦æ–‡ä»¶å†…å®¹ä¸åŒï¼Œå®ƒä»¬å¯¹åº”çš„ <code>Etag</code> å°±æ˜¯ä¸åŒçš„ï¼Œåä¹‹äº¦ç„¶ã€‚å› æ­¤ <code>Etag</code> èƒ½å¤Ÿç²¾å‡†åœ°æ„ŸçŸ¥æ–‡ä»¶çš„å˜åŒ–ã€‚</li><li><code>Etag</code> å’Œ <code>Last-Modified</code> ç±»ä¼¼ï¼Œå½“é¦–æ¬¡è¯·æ±‚æ—¶ï¼Œæˆ‘ä»¬ä¼šåœ¨å“åº”å¤´é‡Œè·å–åˆ°ä¸€ä¸ªæœ€åˆçš„æ ‡è¯†ç¬¦å­—ç¬¦ä¸²ï¼Œä¸¾ä¸ªğŸŒ°ï¼Œå®ƒå¯ä»¥æ˜¯è¿™æ ·çš„ï¼š</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token literal-property property">ETag</span><span class="token operator">:</span> <span class="token constant">W</span><span class="token operator">/</span><span class="token string">&quot;2a3b-1602480f459&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>é‚£ä¹ˆä¸‹ä¸€æ¬¡è¯·æ±‚æ—¶ï¼Œè¯·æ±‚å¤´é‡Œå°±ä¼šå¸¦ä¸Šä¸€ä¸ªå€¼ç›¸åŒçš„ã€åä¸º <code>if-None-Match</code> çš„å­—ç¬¦ä¸²ä¾›æœåŠ¡ç«¯æ¯”å¯¹äº†ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    If<span class="token operator">-</span>None<span class="token operator">-</span>Match<span class="token operator">:</span> <span class="token constant">W</span><span class="token operator">/</span><span class="token string">&quot;2a3b-1602480f459&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p><code>Etag</code> çš„ç”Ÿæˆè¿‡ç¨‹éœ€è¦æœåŠ¡å™¨é¢å¤–ä»˜å‡ºå¼€é”€ï¼Œä¼šå½±å“æœåŠ¡ç«¯çš„æ€§èƒ½ï¼Œè¿™æ˜¯å®ƒçš„å¼Šç«¯ã€‚å› æ­¤å¯ç”¨ <code>Etag</code> éœ€è¦æˆ‘ä»¬å®¡æ—¶åº¦åŠ¿ã€‚æ­£å¦‚æˆ‘ä»¬åˆšåˆšæ‰€æåˆ°çš„â€”â€”<code>Etag</code> å¹¶ä¸èƒ½æ›¿ä»£ <code>Last-Modified</code>ï¼Œå®ƒåªèƒ½ä½œä¸º <code>Last-Modified</code> çš„è¡¥å……å’Œå¼ºåŒ–å­˜åœ¨ã€‚ <strong>Etag åœ¨æ„ŸçŸ¥æ–‡ä»¶å˜åŒ–ä¸Šæ¯” Last-Modified æ›´åŠ å‡†ç¡®ï¼Œä¼˜å…ˆçº§ä¹Ÿæ›´é«˜ã€‚å½“ Etag å’Œ Last-Modified åŒæ—¶å­˜åœ¨æ—¶ï¼Œä»¥ Etag ä¸ºå‡†ã€‚</strong></p></blockquote><h3 id="http-ç¼“å­˜å†³ç­–æŒ‡å—" tabindex="-1"><a class="header-anchor" href="#http-ç¼“å­˜å†³ç­–æŒ‡å—"><span>HTTP ç¼“å­˜å†³ç­–æŒ‡å—</span></a></h3><blockquote><p>è¡Œæ–‡è‡³æ­¤ï¼Œå½“ä»£ HTTP ç¼“å­˜æŠ€æœ¯ç”¨åˆ°çš„çŸ¥è¯†ç‚¹ï¼Œæˆ‘ä»¬å·²ç»ä»å¤´åˆ°å°¾æŒ–æ˜äº†ä¸€éäº†ã€‚é‚£ä¹ˆåœ¨é¢å¯¹ä¸€ä¸ªå…·ä½“çš„ç¼“å­˜éœ€æ±‚æ—¶ï¼Œæˆ‘ä»¬åˆ°åº•è¯¥æ€ä¹ˆå†³ç­–å‘¢ï¼Ÿ</p></blockquote><p>èµ°åˆ°å†³ç­–å»ºè®®è¿™ä¸€æ­¥ï¼Œæˆ‘æœ¬æ¥æƒ³ç»™å¤§å®¶é‡æ–°ç”»ä¸€ä¸ªæµç¨‹å›¾ã€‚ä½†æ˜¯ç”»æ¥ç”»å»ç»ˆç©¶ä¸å¦‚ Chrome å®˜æ–¹ç»™å‡ºçš„è¿™å¼ æ¸…æ™°ã€æƒå¨ï¼š</p><p><img src="`+j+`" alt=""></p><p><strong>æˆ‘ä»¬ç°åœ¨ä¸€èµ·è§£è¯»ä¸€ä¸‹è¿™å¼ æµç¨‹å›¾ï¼š</strong></p><ul><li>å½“æˆ‘ä»¬çš„èµ„æºå†…å®¹ä¸å¯å¤ç”¨æ—¶ï¼Œç›´æ¥ä¸º <code>Cache-Control</code> è®¾ç½® <code>no-store</code>ï¼Œæ‹’ç»ä¸€åˆ‡å½¢å¼çš„ç¼“å­˜ï¼›å¦åˆ™è€ƒè™‘æ˜¯å¦æ¯æ¬¡éƒ½éœ€è¦å‘æœåŠ¡å™¨è¿›è¡Œç¼“å­˜æœ‰æ•ˆç¡®è®¤ï¼Œå¦‚æœéœ€è¦ï¼Œé‚£ä¹ˆè®¾ <code>Cache-Control</code> çš„å€¼ä¸º <code>no-cache</code>ï¼›å¦åˆ™è€ƒè™‘è¯¥èµ„æºæ˜¯å¦å¯ä»¥è¢«ä»£ç†æœåŠ¡å™¨ç¼“å­˜ï¼Œæ ¹æ®å…¶ç»“æœå†³å®šæ˜¯è®¾ç½®ä¸º <code>private</code> è¿˜æ˜¯ <code>public</code>ï¼›ç„¶åè€ƒè™‘è¯¥èµ„æºçš„è¿‡æœŸæ—¶é—´ï¼Œè®¾ç½®å¯¹åº”çš„ <code>max-age</code> å’Œ <code>s-maxage</code> å€¼ï¼›æœ€åï¼Œé…ç½®åå•†ç¼“å­˜éœ€è¦ç”¨åˆ°çš„ <code>Etag</code>ã€<code>Last-Modified</code> ç­‰å‚æ•°ã€‚</li><li>ä¸ªäººéå¸¸æ¨å´‡è¿™å¼ æµç¨‹å›¾ç»™å‡ºçš„å†³ç­–å»ºè®®ï¼Œä¹Ÿå¼ºçƒˆæ¨èå¤§å®¶åœ¨ç†è§£ä»¥ä¸ŠçŸ¥è¯†ç‚¹çš„åŸºç¡€ä¸Šï¼Œå°†è¿™å¼ å›¾ä¿å­˜ä¸‹æ¥ã€åœ¨æ—¥å¸¸å¼€å‘ä¸­ç”¨ç”¨çœ‹ï¼Œå®ƒçš„å¯è¡Œåº¦éå¸¸é«˜ã€‚</li></ul><p>OKï¼Œèµ°åˆ°è¿™é‡Œï¼Œæœ¬èŠ‚æœ€å¤§çš„ä¸€åº§å±±å·²ç»è¢«å¤§å®¶ç¿»è¿‡å»äº†ã€‚æ¥ä¸‹æ¥çš„å†…å®¹ä¼šç›¸å¯¹æ¯”è¾ƒè½»æ¾ï¼Œå¤§å®¶æ”¾æ¾å¿ƒæƒ…ï¼Œæˆ‘ä»¬ç»§ç»­å‰è¡Œï¼</p><h3 id="memorycache" tabindex="-1"><a class="header-anchor" href="#memorycache"><span>MemoryCache</span></a></h3><ul><li><code>MemoryCache</code>ï¼Œæ˜¯æŒ‡å­˜åœ¨å†…å­˜ä¸­çš„ç¼“å­˜ã€‚ä»ä¼˜å…ˆçº§ä¸Šæ¥è¯´ï¼Œå®ƒæ˜¯æµè§ˆå™¨æœ€å…ˆå°è¯•å»å‘½ä¸­çš„ä¸€ç§ç¼“å­˜ã€‚ä»æ•ˆç‡ä¸Šæ¥è¯´ï¼Œå®ƒæ˜¯å“åº”é€Ÿåº¦æœ€å¿«çš„ä¸€ç§ç¼“å­˜ã€‚</li><li>å†…å­˜ç¼“å­˜æ˜¯å¿«çš„ï¼Œä¹Ÿæ˜¯â€œçŸ­å‘½â€çš„ã€‚å®ƒå’Œæ¸²æŸ“è¿›ç¨‹â€œç”Ÿæ­»ç›¸ä¾â€ï¼Œå½“è¿›ç¨‹ç»“æŸåï¼Œä¹Ÿå°±æ˜¯ tab å…³é—­ä»¥åï¼Œå†…å­˜é‡Œçš„æ•°æ®ä¹Ÿå°†ä¸å¤å­˜åœ¨ã€‚</li></ul><p>é‚£ä¹ˆå“ªäº›æ–‡ä»¶ä¼šè¢«æ”¾å…¥å†…å­˜å‘¢ï¼Ÿ</p><ul><li>äº‹å®ä¸Šï¼Œè¿™ä¸ªåˆ’åˆ†è§„åˆ™ï¼Œä¸€ç›´ä»¥æ¥æ˜¯æ²¡æœ‰å®šè®ºçš„ã€‚ä¸è¿‡æƒ³æƒ³ä¹Ÿå¯ä»¥ç†è§£ï¼Œå†…å­˜æ˜¯æœ‰é™çš„ï¼Œå¾ˆå¤šæ—¶å€™éœ€è¦å…ˆè€ƒè™‘å³æ—¶å‘ˆç°çš„å†…å­˜ä½™é‡ï¼Œå†æ ¹æ®å…·ä½“çš„æƒ…å†µå†³å®šåˆ†é…ç»™å†…å­˜å’Œç£ç›˜çš„èµ„æºé‡çš„æ¯”é‡â€”â€”èµ„æºå­˜æ”¾çš„ä½ç½®å…·æœ‰ä¸€å®šçš„éšæœºæ€§ã€‚</li><li>è™½ç„¶åˆ’åˆ†è§„åˆ™æ²¡æœ‰å®šè®ºï¼Œä½†æ ¹æ®æ—¥å¸¸å¼€å‘ä¸­è§‚å¯Ÿçš„ç»“æœï¼ŒåŒ…æ‹¬æˆ‘ä»¬å¼€ç¯‡ç»™å¤§å®¶å±•ç¤ºçš„ <code>Network</code>æˆªå›¾ï¼Œæˆ‘ä»¬è‡³å°‘å¯ä»¥æ€»ç»“å‡ºè¿™æ ·çš„è§„å¾‹ï¼šèµ„æºå­˜ä¸å­˜å†…å­˜ï¼Œæµè§ˆå™¨ç§‰æ‰¿çš„æ˜¯â€œèŠ‚çº¦åŸåˆ™â€ã€‚æˆ‘ä»¬å‘ç°ï¼Œ<code>Base64</code> æ ¼å¼çš„å›¾ç‰‡ï¼Œå‡ ä¹æ°¸è¿œå¯ä»¥è¢«å¡è¿› <code>memory cache</code>ï¼Œè¿™å¯ä»¥è§†ä½œæµè§ˆå™¨ä¸ºèŠ‚çœæ¸²æŸ“å¼€é”€çš„â€œè‡ªä¿è¡Œä¸ºâ€ï¼›æ­¤å¤–ï¼Œä½“ç§¯ä¸å¤§çš„ <code>JS</code>ã€<code>CSS</code> æ–‡ä»¶ï¼Œä¹Ÿæœ‰è¾ƒå¤§åœ°è¢«å†™å…¥å†…å­˜çš„å‡ ç‡â€”â€”ç›¸æ¯”ä¹‹ä¸‹ï¼Œè¾ƒå¤§çš„ <code>JS</code>ã€<code>CSS</code> æ–‡ä»¶å°±æ²¡æœ‰è¿™ä¸ªå¾…é‡äº†ï¼Œå†…å­˜èµ„æºæ˜¯æœ‰é™çš„ï¼Œå®ƒä»¬å¾€å¾€è¢«ç›´æ¥ç”©è¿›ç£ç›˜ã€‚</li></ul><h3 id="service-worker-cache" tabindex="-1"><a class="header-anchor" href="#service-worker-cache"><span>Service Worker Cache</span></a></h3><blockquote><p><code>Service Worker</code> æ˜¯ä¸€ç§ç‹¬ç«‹äºä¸»çº¿ç¨‹ä¹‹å¤–çš„ Javascript çº¿ç¨‹ã€‚å®ƒè„±ç¦»äºæµè§ˆå™¨çª—ä½“ï¼Œå› æ­¤æ— æ³•ç›´æ¥è®¿é—® DOMã€‚è¿™æ ·ç‹¬ç«‹çš„ä¸ªæ€§ä½¿å¾— <code>Service Worker</code> çš„â€œä¸ªäººè¡Œä¸ºâ€æ— æ³•å¹²æ‰°é¡µé¢çš„æ€§èƒ½ï¼Œè¿™ä¸ªâ€œå¹•åå·¥ä½œè€…â€å¯ä»¥å¸®æˆ‘ä»¬å®ç°ç¦»çº¿ç¼“å­˜ã€æ¶ˆæ¯æ¨é€å’Œç½‘ç»œä»£ç†ç­‰åŠŸèƒ½ã€‚æˆ‘ä»¬å€ŸåŠ© <code>Service worker</code> å®ç°çš„ç¦»çº¿ç¼“å­˜å°±ç§°ä¸º <code>Service Worker Cache</code>ã€‚</p></blockquote><ul><li><code>Service Worker</code> çš„ç”Ÿå‘½å‘¨æœŸåŒ…æ‹¬ <code>install</code>ã€<code>active</code>ã€<code>working</code> ä¸‰ä¸ªé˜¶æ®µã€‚ä¸€æ—¦ <code>Service Worker</code> è¢« <code>install</code>ï¼Œå®ƒå°†å§‹ç»ˆå­˜åœ¨ï¼Œåªä¼šåœ¨ <code>active</code> ä¸ <code>working</code> ä¹‹é—´åˆ‡æ¢ï¼Œé™¤éæˆ‘ä»¬ä¸»åŠ¨ç»ˆæ­¢å®ƒã€‚è¿™æ˜¯å®ƒå¯ä»¥ç”¨æ¥å®ç°ç¦»çº¿å­˜å‚¨çš„é‡è¦å…ˆå†³æ¡ä»¶ã€‚</li><li>ä¸‹é¢æˆ‘ä»¬å°±é€šè¿‡å®æˆ˜çš„æ–¹å¼ï¼Œä¸€èµ·è§è¯†ä¸€ä¸‹ <code>Service Worker</code> å¦‚ä½•ä¸ºæˆ‘ä»¬å®ç°ç¦»çº¿ç¼“å­˜ï¼ˆæ³¨æ„çœ‹æ³¨é‡Šï¼‰ï¼š æˆ‘ä»¬é¦–å…ˆåœ¨å…¥å£æ–‡ä»¶ä¸­æ’å…¥è¿™æ ·ä¸€æ®µ JS ä»£ç ï¼Œç”¨ä»¥åˆ¤æ–­å’Œå¼•å…¥ <code>Service Worker</code>ï¼š</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    window<span class="token punctuation">.</span>navigator<span class="token punctuation">.</span>serviceWorker<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&#39;/test.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span></span>
<span class="line">       <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;æ³¨å†ŒæˆåŠŸ&#39;</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">          console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;æ³¨å†Œå¤±è´¥&quot;</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>åœ¨ <code>test.js</code> ä¸­ï¼Œæˆ‘ä»¬è¿›è¡Œç¼“å­˜çš„å¤„ç†ã€‚å‡è®¾æˆ‘ä»¬éœ€è¦ç¼“å­˜çš„æ–‡ä»¶åˆ†åˆ«æ˜¯ <code>test.html</code>,<code>test.css</code> å’Œ <code>test.js</code>ï¼š</p></blockquote><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token comment">// Service Workerä¼šç›‘å¬ installäº‹ä»¶ï¼Œæˆ‘ä»¬åœ¨å…¶å¯¹åº”çš„å›è°ƒé‡Œå¯ä»¥å®ç°åˆå§‹åŒ–çš„é€»è¾‘  </span></span>
<span class="line">    self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;install&#39;</span><span class="token punctuation">,</span> <span class="token parameter">event</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">      event<span class="token punctuation">.</span><span class="token function">waitUntil</span><span class="token punctuation">(</span></span>
<span class="line">        <span class="token comment">// è€ƒè™‘åˆ°ç¼“å­˜ä¹Ÿéœ€è¦æ›´æ–°ï¼Œopenå†…ä¼ å…¥çš„å‚æ•°ä¸ºç¼“å­˜çš„ç‰ˆæœ¬å·</span></span>
<span class="line">        caches<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&#39;test-v1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">cache</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token keyword">return</span> cache<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span><span class="token punctuation">[</span></span>
<span class="line">            <span class="token comment">// æ­¤å¤„ä¼ å…¥æŒ‡å®šçš„éœ€ç¼“å­˜çš„æ–‡ä»¶å</span></span>
<span class="line">            <span class="token string">&#39;/test.html&#39;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token string">&#39;/test.css&#39;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token string">&#39;/test.js&#39;</span></span>
<span class="line">          <span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// Service Workerä¼šç›‘å¬æ‰€æœ‰çš„ç½‘ç»œè¯·æ±‚ï¼Œç½‘ç»œè¯·æ±‚çš„äº§ç”Ÿè§¦å‘çš„æ˜¯fetchäº‹ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å…¶å¯¹åº”çš„ç›‘å¬å‡½æ•°ä¸­å®ç°å¯¹è¯·æ±‚çš„æ‹¦æˆªï¼Œè¿›è€Œåˆ¤æ–­æ˜¯å¦æœ‰å¯¹åº”åˆ°è¯¥è¯·æ±‚çš„ç¼“å­˜ï¼Œå®ç°ä»Service Workerä¸­å–åˆ°ç¼“å­˜çš„ç›®çš„</span></span>
<span class="line">    self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;fetch&#39;</span><span class="token punctuation">,</span> <span class="token parameter">event</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">      event<span class="token punctuation">.</span><span class="token function">respondWith</span><span class="token punctuation">(</span></span>
<span class="line">        <span class="token comment">// å°è¯•åŒ¹é…è¯¥è¯·æ±‚å¯¹åº”çš„ç¼“å­˜å€¼</span></span>
<span class="line">        caches<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>request<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token comment">// å¦‚æœåŒ¹é…åˆ°äº†ï¼Œè°ƒç”¨Server Workerç¼“å­˜</span></span>
<span class="line">          <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">return</span> res<span class="token punctuation">;</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">          <span class="token comment">// å¦‚æœæ²¡åŒ¹é…åˆ°ï¼Œå‘æœåŠ¡ç«¯å‘èµ·è¿™ä¸ªèµ„æºè¯·æ±‚</span></span>
<span class="line">          <span class="token keyword">return</span> <span class="token function">fetch</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>request<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>response <span class="token operator">||</span> response<span class="token punctuation">.</span>status <span class="token operator">!==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">              <span class="token keyword">return</span> response<span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">            <span class="token comment">// è¯·æ±‚æˆåŠŸçš„è¯ï¼Œå°†è¯·æ±‚ç¼“å­˜èµ·æ¥ã€‚</span></span>
<span class="line">            caches<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&#39;test-v1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">cache</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">              cache<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>PS</strong> ï¼šå¤§å®¶æ³¨æ„ <code>Server Worker</code> å¯¹åè®®æ˜¯æœ‰è¦æ±‚çš„ï¼Œå¿…é¡»ä»¥ <code>https</code> åè®®ä¸ºå‰æã€‚</p><h3 id="push-cache" tabindex="-1"><a class="header-anchor" href="#push-cache"><span>Push Cache</span></a></h3><blockquote><p>é¢„å‘Šï¼šæœ¬å°èŠ‚å®šä½ä¸ºåŸºç¡€ç§‘æ™®å‘ï¼Œå¯¹ Push Cache æœ‰æ·±å…¥æŒ–æ˜å…´è¶£çš„åŒå­¦ï¼Œå¼ºçƒˆæ¨èæ‹“å±•é˜…è¯» Chrome å·¥ç¨‹å¸ˆ Jake Archibald çš„è¿™ç¯‡ <a href="https://jakearchibald.com/2017/h2-push-tougher-than-i-thought/" target="_blank" rel="noopener noreferrer">HTTP/2 push is tougher than I thought (opens new window)</a>ã€‚</p></blockquote><ul><li><p><code>Push Cache</code> æ˜¯æŒ‡ <code>HTTP2</code> åœ¨ <code>server push</code> é˜¶æ®µå­˜åœ¨çš„ç¼“å­˜ã€‚è¿™å—çš„çŸ¥è¯†æ¯”è¾ƒæ–°ï¼Œåº”ç”¨ä¹Ÿè¿˜å¤„äºèŒèŠ½é˜¶æ®µï¼Œæˆ‘æ‰¾äº†å¥½å‡ ä¸ªç½‘ç«™ä¹Ÿæ²¡æ‰¾åˆ°ä¸€ä¸ªåˆé€‚çš„æ¡ˆä¾‹æ¥ç»™å¤§å®¶åšå…·ä½“çš„ä»‹ç»ã€‚ä½†åº”ç”¨èŒƒå›´æœ‰é™ä¸ä»£è¡¨ä¸é‡è¦â€”â€”<code>HTTP2</code> æ˜¯è¶‹åŠ¿ã€æ˜¯æœªæ¥ã€‚åœ¨å®ƒè¿˜æœªè¢«æ¨è€Œå¹¿ä¹‹çš„æ­¤æ—¶æ­¤åˆ»ï¼Œæˆ‘ä»å¸Œæœ›å¤§å®¶èƒ½å¯¹ <code>Push Cache</code> çš„å…³é”®ç‰¹æ€§æœ‰æ‰€äº†è§£ï¼š</p></li><li><p><code>Push Cache</code> æ˜¯ç¼“å­˜çš„æœ€åä¸€é“é˜²çº¿ã€‚æµè§ˆå™¨åªæœ‰åœ¨ <code>Memory Cache</code>ã€<code>HTTP Cache</code> å’Œ <code>Service Worker Cache</code> å‡æœªå‘½ä¸­çš„æƒ…å†µä¸‹æ‰ä¼šå»è¯¢é—® <code>Push Cache</code>ã€‚</p></li><li><p><code>Push Cache</code> æ˜¯ä¸€ç§å­˜åœ¨äºä¼šè¯é˜¶æ®µçš„ç¼“å­˜ï¼Œå½“ <code>session</code> ç»ˆæ­¢æ—¶ï¼Œç¼“å­˜ä¹Ÿéšä¹‹é‡Šæ”¾ã€‚</p></li><li><p>ä¸åŒçš„é¡µé¢åªè¦å…±äº«äº†åŒä¸€ä¸ª <code>HTTP2</code> è¿æ¥ï¼Œé‚£ä¹ˆå®ƒä»¬å°±å¯ä»¥å…±äº«åŒä¸€ä¸ª <code>Push Cache</code>ã€‚</p></li></ul><p>æ›´å¤šçš„ç‰¹æ€§å’Œåº”ç”¨ï¼ŒæœŸå¾…å¤§å®¶å¯ä»¥åœ¨æ—¥åçš„å¼€å‘è¿‡ç¨‹ä¸­å»æŒ–æ˜å’Œå®è·µã€‚</p><h3 id="å°ç»“-1" tabindex="-1"><a class="header-anchor" href="#å°ç»“-1"><span>å°ç»“</span></a></h3><blockquote><p>å°å»ºè®®ï¼å¾ˆå¤šäººåœ¨å­¦ä¹ ç¼“å­˜è¿™å—çŸ¥è¯†çš„æ—¶å€™å¯èƒ½å¤šå°‘ä¼šæœ‰è¿™æ ·çš„æ„Ÿè§‰ï¼šå¯¹æµè§ˆå™¨ç¼“å­˜ï¼Œåªèƒ½æè¿°ä¸ªå¤§è‡´ï¼Œå´è¯´ä¸ä¸Šæ·±å±‚åŸç†ï¼›å¥½ä¸å®¹æ˜“è®°ä½äº†æ¯ä¸ªå­—æ®µæ€ä¹ˆç”¨ï¼Œè¿‡å‡ å¤©åˆç»™å¿˜äº†ã€‚è¿™æ˜¯å› ä¸ºç¼“å­˜éƒ¨åˆ†çš„çŸ¥è¯†ï¼Œå…·æœ‰â€œç»†ç¢ã€è¿­ä»£å¿«â€çš„ç‰¹ç‚¹ã€‚å¯¹äºè¿™æ ·çš„çŸ¥è¯†ï¼Œæˆ‘ä»¬åº”è¯¥å°è¯•å…ˆåˆ’åˆ†å‡ºå±‚æ¬¡å’Œé‡ç‚¹ï¼Œå½’çº³å‡ºå®Œæ•´çš„ä½“ç³»ï¼Œç„¶åé’ˆå¯¹æ¯ä¸ªçŸ¥è¯†ç‚¹å»å„ä¸ªå‡»ç ´ã€‚</p></blockquote><ul><li>ç»ˆäºç»“æŸäº†å¯¹ç¼“å­˜ä¸–ç•Œçš„æ¢ç´¢ï¼Œä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰ä¸€ç§æ„çŠ¹æœªå°½çš„æ„Ÿè§‰ã€‚å¼€ç¯‡æˆ‘ä»¬è°ˆè¿‡ï¼Œç¼“å­˜éå¸¸é‡è¦ï¼Œå®ƒå‡ ä¹æ˜¯æˆ‘ä»¬æ€§èƒ½ä¼˜åŒ–çš„é¦–é€‰æ–¹æ¡ˆã€‚</li><li>ä½†é¡µé¢çš„æ•°æ®å­˜å‚¨æ–¹æ¡ˆé™¤äº†ç¼“å­˜ï¼Œè¿˜æœ‰æœ¬åœ°å­˜å‚¨ã€‚åœ¨ä¸‹ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°±å°†å›´ç»•æœ¬åœ°å­˜å‚¨å±•å¼€æ¢ç´¢ã€‚</li></ul><h2 id="äº”ã€å­˜å‚¨ç¯‡-2-æœ¬åœ°å­˜å‚¨â€”â€”ä»-cookie-åˆ°-web-storageã€indexdb" tabindex="-1"><a class="header-anchor" href="#äº”ã€å­˜å‚¨ç¯‡-2-æœ¬åœ°å­˜å‚¨â€”â€”ä»-cookie-åˆ°-web-storageã€indexdb"><span>äº”ã€å­˜å‚¨ç¯‡ 2ï¼šæœ¬åœ°å­˜å‚¨â€”â€”ä» Cookie åˆ° Web Storageã€IndexDB</span></a></h2><blockquote><p>éšç€ç§»åŠ¨ç½‘ç»œçš„å‘å±•ä¸æ¼”åŒ–ï¼Œæˆ‘ä»¬æ‰‹æœºä¸Šç°åœ¨é™¤äº†æœ‰åŸç”Ÿ Appï¼Œè¿˜èƒ½è·‘â€œWebAppâ€â€”â€”å®ƒå³å¼€å³ç”¨ï¼Œç”¨å®Œå³èµ°ã€‚ä¸€ä¸ªä¼˜ç§€çš„ WebApp ç”šè‡³å¯ä»¥æ‹¥æœ‰å’ŒåŸç”Ÿ App åª²ç¾çš„åŠŸèƒ½å’Œä½“éªŒã€‚</p></blockquote><p>æˆ‘è®¤ä¸ºï¼Œ<code>WebApp</code> å°±æ˜¯æˆ‘ä»¬å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„äº§ç‰©ï¼Œæ˜¯æˆ‘ä»¬å‰ç«¯å·¥ç¨‹å¸ˆå¯¹ä½“éªŒä¸æ‡ˆè¿½æ±‚çš„ç»“æœï¼Œæ˜¯ Web ç½‘é¡µåœ¨æ€§èƒ½ä¸Šå‘ <code>Native</code> åº”ç”¨çš„ä¸€æ¬¡â€œå®£æˆ˜â€ã€‚</p><blockquote><p><code>WebApp</code> ä¼˜å¼‚çš„æ€§èƒ½è¡¨ç°ï¼Œè¦å½’åŠŸäºæµè§ˆå™¨å­˜å‚¨æŠ€æœ¯çš„å¹¿æ³›åº”ç”¨â€”â€”è¿™å…¶ä¸­é™¤äº†æˆ‘ä»¬ä¸ŠèŠ‚æåˆ°çš„ç¼“å­˜ï¼Œæœ¬åœ°å­˜å‚¨æŠ€æœ¯ä¹ŸåŠŸä¸å¯æ²¡ã€‚</p></blockquote><h3 id="æ•…äº‹çš„å¼€å§‹-ä»-cookie-è¯´èµ·" tabindex="-1"><a class="header-anchor" href="#æ•…äº‹çš„å¼€å§‹-ä»-cookie-è¯´èµ·"><span>æ•…äº‹çš„å¼€å§‹ï¼šä» Cookie è¯´èµ·</span></a></h3><ul><li><code>Cookie</code> çš„æœ¬èŒå·¥ä½œå¹¶éæœ¬åœ°å­˜å‚¨ï¼Œè€Œæ˜¯â€œç»´æŒçŠ¶æ€â€ã€‚</li><li>åœ¨ Web å¼€å‘çš„æ—©æœŸï¼Œäººä»¬äºŸéœ€è§£å†³çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯çŠ¶æ€ç®¡ç†çš„é—®é¢˜ï¼šHTTP åè®®æ˜¯ä¸€ä¸ªæ— çŠ¶æ€åè®®ï¼ŒæœåŠ¡å™¨æ¥æ”¶å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œè¿”å›ä¸€ä¸ªå“åº”ï¼Œæ•…äº‹åˆ°æ­¤å°±ç»“æŸäº†ï¼ŒæœåŠ¡å™¨å¹¶æ²¡æœ‰è®°å½•ä¸‹å…³äºå®¢æˆ·ç«¯çš„ä»»ä½•ä¿¡æ¯ã€‚é‚£ä¹ˆä¸‹æ¬¡è¯·æ±‚çš„æ—¶å€™ï¼Œå¦‚ä½•è®©æœåŠ¡å™¨çŸ¥é“â€œæˆ‘æ˜¯æˆ‘â€å‘¢ï¼Ÿ</li><li>åœ¨è¿™æ ·çš„èƒŒæ™¯ä¸‹ï¼ŒCookie åº”è¿è€Œç”Ÿã€‚</li><li><code>Cookie</code> è¯´ç™½äº†å°±æ˜¯ä¸€ä¸ªå­˜å‚¨åœ¨æµè§ˆå™¨é‡Œçš„ä¸€ä¸ªå°å°çš„æ–‡æœ¬æ–‡ä»¶ï¼Œå®ƒé™„ç€åœ¨ <code>HTTP</code> è¯·æ±‚ä¸Šï¼Œåœ¨æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´â€œé£æ¥é£å»â€ã€‚å®ƒå¯ä»¥æºå¸¦ç”¨æˆ·ä¿¡æ¯ï¼Œå½“æœåŠ¡å™¨æ£€æŸ¥ Cookie çš„æ—¶å€™ï¼Œä¾¿å¯ä»¥è·å–åˆ°å®¢æˆ·ç«¯çš„çŠ¶æ€ã€‚</li></ul><p>å…³äº Cookie çš„è¯¦ç»†å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ Chrome çš„ Application é¢æ¿ä¸­æŸ¥çœ‹åˆ°ï¼š</p><p><img src="`+x+`" alt=""></p><p>å¦‚å¤§å®¶æ‰€è§ï¼Œ<strong>Cookie ä»¥é”®å€¼å¯¹çš„å½¢å¼å­˜åœ¨</strong> ã€‚</p><h3 id="cookieçš„æ€§èƒ½åŠ£åŠ¿" tabindex="-1"><a class="header-anchor" href="#cookieçš„æ€§èƒ½åŠ£åŠ¿"><span>Cookieçš„æ€§èƒ½åŠ£åŠ¿</span></a></h3><p><strong>1. Cookie ä¸å¤Ÿå¤§</strong></p><blockquote><p>å¤§å®¶çŸ¥é“ï¼Œ<code>Cookie</code> æ˜¯æœ‰ä½“ç§¯ä¸Šé™çš„ï¼Œå®ƒæœ€å¤§åªèƒ½æœ‰ <code>4KB</code>ã€‚å½“ <code>Cookie</code> è¶…è¿‡ <code>4KB</code> æ—¶ï¼Œå®ƒå°†é¢ä¸´è¢«è£åˆ‡çš„å‘½è¿ã€‚è¿™æ ·çœ‹æ¥ï¼Œ<code>Cookie</code> åªèƒ½ç”¨æ¥å­˜å–å°‘é‡çš„ä¿¡æ¯ã€‚</p></blockquote><p><strong>2. è¿‡é‡çš„ Cookie ä¼šå¸¦æ¥å·¨å¤§çš„æ€§èƒ½æµªè´¹</strong></p><p><strong>Cookie æ˜¯ç´§è·ŸåŸŸåçš„</strong> ã€‚æˆ‘ä»¬é€šè¿‡å“åº”å¤´é‡Œçš„ <code>Set-Cookie</code> æŒ‡å®šè¦å­˜å‚¨çš„ <code>Cookie</code> å€¼ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>domain</code> è¢«è®¾ç½®ä¸ºè®¾ç½® <code>Cookie</code> é¡µé¢çš„ä¸»æœºåï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰‹åŠ¨è®¾ç½® <code>domain</code> çš„å€¼ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    Set<span class="token operator">-</span>Cookie<span class="token operator">:</span> name<span class="token operator">=</span>xiuyan<span class="token punctuation">;</span> domain<span class="token operator">=</span>xiuyan<span class="token punctuation">.</span>me</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>åŒä¸€ä¸ªåŸŸåä¸‹çš„æ‰€æœ‰è¯·æ±‚ï¼Œéƒ½ä¼šæºå¸¦ Cookie</strong> ã€‚å¤§å®¶è¯•æƒ³ï¼Œå¦‚æœæˆ‘ä»¬æ­¤åˆ»ä»…ä»…æ˜¯è¯·æ±‚ä¸€å¼ å›¾ç‰‡æˆ–è€…ä¸€ä¸ª CSS æ–‡ä»¶ï¼Œæˆ‘ä»¬ä¹Ÿè¦æºå¸¦ä¸€ä¸ª Cookie è·‘æ¥è·‘å»ï¼ˆå…³é”®æ˜¯ Cookie é‡Œå­˜å‚¨çš„ä¿¡æ¯æˆ‘ç°åœ¨å¹¶ä¸éœ€è¦ï¼‰ï¼Œè¿™æ˜¯ä¸€ä»¶å¤šä¹ˆåŠ³æ°‘ä¼¤è´¢çš„äº‹æƒ…ã€‚Cookie è™½ç„¶å°ï¼Œè¯·æ±‚å´å¯ä»¥æœ‰å¾ˆå¤šï¼Œéšç€è¯·æ±‚çš„å åŠ ï¼Œè¿™æ ·çš„ä¸å¿…è¦çš„ Cookie å¸¦æ¥çš„å¼€é”€å°†æ˜¯æ— æ³•æƒ³è±¡çš„ã€‚</p><p>éšç€å‰ç«¯åº”ç”¨å¤æ‚åº¦çš„æé«˜ï¼Œ<code>Cookie</code> ä¹Ÿæ¸æ¸æ¼”åŒ–ä¸ºäº†ä¸€ä¸ªâ€œå­˜å‚¨å¤šé¢æ‰‹â€â€”â€”å®ƒä¸ä»…ä»…è¢«ç”¨äºç»´æŒçŠ¶æ€ï¼Œè¿˜è¢«å¡å…¥äº†ä¸€äº›ä¹±ä¸ƒå…«ç³Ÿçš„å…¶å®ƒä¿¡æ¯ï¼Œè¢«è¿«æ‰¿æ‹…èµ·äº†æœ¬åœ°å­˜å‚¨çš„â€œé‡ä»»â€ã€‚åœ¨æ²¡æœ‰æ›´å¥½çš„æœ¬åœ°å­˜å‚¨è§£å†³æ–¹æ¡ˆçš„å¹´ä»£é‡Œï¼Œ<code>Cookie</code> å°å°çš„èº«ä½“é‡Œæ‰¿è½½äº† <code>4KB</code> å†…å­˜æ‰€ä¸èƒ½æ‰¿å—çš„å‹åŠ›ã€‚</p><p>ä¸ºäº†å¼¥è¡¥ <code>Cookie</code> çš„å±€é™æ€§ï¼Œè®©â€œä¸“ä¸šçš„äººåšä¸“ä¸šçš„äº‹æƒ…â€ï¼Œ<code>Web Storage</code> å‡ºç°äº†ã€‚</p><h3 id="å‘å‰ä¸€æ­¥-web-storage" tabindex="-1"><a class="header-anchor" href="#å‘å‰ä¸€æ­¥-web-storage"><span>å‘å‰ä¸€æ­¥ï¼šWeb Storage</span></a></h3><blockquote><p><code>Web Storage</code> æ˜¯ <code>HTML5</code> ä¸“é—¨ä¸ºæµè§ˆå™¨å­˜å‚¨è€Œæä¾›çš„æ•°æ®å­˜å‚¨æœºåˆ¶ã€‚å®ƒåˆåˆ†ä¸º <code>Local Storage</code> ä¸ <code>Session Storage</code>ã€‚è¿™ä¸¤ç»„æ¦‚å¿µéå¸¸ç›¸è¿‘ï¼Œæˆ‘ä»¬ä¸å¦¨å…ˆç†è§£å®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ï¼Œå†å¯¹å®ƒä»¬çš„å…±æ€§è¿›è¡Œç ”ç©¶ã€‚</p></blockquote><p><strong>1. Local Storage ä¸ Session Storage çš„åŒºåˆ«</strong></p><p>ä¸¤è€…çš„åŒºåˆ«åœ¨äº<strong>ç”Ÿå‘½å‘¨æœŸ</strong> ä¸<strong>ä½œç”¨åŸŸ</strong> çš„ä¸åŒã€‚</p><ul><li>ç”Ÿå‘½å‘¨æœŸï¼š<code>Local Storage</code> æ˜¯æŒä¹…åŒ–çš„æœ¬åœ°å­˜å‚¨ï¼Œå­˜å‚¨åœ¨å…¶ä¸­çš„æ•°æ®æ˜¯æ°¸è¿œä¸ä¼šè¿‡æœŸçš„ï¼Œä½¿å…¶æ¶ˆå¤±çš„å”¯ä¸€åŠæ³•æ˜¯æ‰‹åŠ¨åˆ é™¤ï¼›è€Œ <code>Session Storage</code> æ˜¯ä¸´æ—¶æ€§çš„æœ¬åœ°å­˜å‚¨ï¼Œå®ƒæ˜¯ä¼šè¯çº§åˆ«çš„å­˜å‚¨ï¼Œå½“ä¼šè¯ç»“æŸï¼ˆé¡µé¢è¢«å…³é—­ï¼‰æ—¶ï¼Œå­˜å‚¨å†…å®¹ä¹Ÿéšä¹‹è¢«é‡Šæ”¾ã€‚</li><li>ä½œç”¨åŸŸï¼š<code>Local Storage</code>ã€<code>Session Storage</code> å’Œ <code>Cookie</code> éƒ½éµå¾ªåŒæºç­–ç•¥ã€‚ä½† <code>Session Storage</code> ç‰¹åˆ«çš„ä¸€ç‚¹åœ¨äºï¼Œå³ä¾¿æ˜¯ç›¸åŒåŸŸåä¸‹çš„ä¸¤ä¸ªé¡µé¢ï¼Œåªè¦å®ƒä»¬<strong>ä¸åœ¨åŒä¸€ä¸ªæµè§ˆå™¨çª—å£ä¸­</strong> æ‰“å¼€ï¼Œé‚£ä¹ˆå®ƒä»¬çš„ <code>Session Storage</code> å†…å®¹ä¾¿æ— æ³•å…±äº«ã€‚</li></ul><p><strong>1. Web Storage çš„ç‰¹æ€§</strong></p><ul><li>å­˜å‚¨å®¹é‡å¤§ï¼š <code>Web Storage</code> æ ¹æ®æµè§ˆå™¨çš„ä¸åŒï¼Œå­˜å‚¨å®¹é‡å¯ä»¥è¾¾åˆ° <code>5-10M</code> ä¹‹é—´ã€‚</li><li>ä»…ä½äºæµè§ˆå™¨ç«¯ï¼Œä¸ä¸æœåŠ¡ç«¯å‘ç”Ÿé€šä¿¡ã€‚</li></ul><p><strong>2. Web Storage æ ¸å¿ƒ API ä½¿ç”¨ç¤ºä¾‹</strong></p><blockquote><p><code>Web Storage</code> ä¿å­˜çš„æ•°æ®å†…å®¹å’Œ <code>Cookie</code> ä¸€æ ·ï¼Œæ˜¯æ–‡æœ¬å†…å®¹ï¼Œä»¥é”®å€¼å¯¹çš„å½¢å¼å­˜åœ¨ã€‚<code>Local Storage</code> ä¸ <code>Session Storage</code> åœ¨ <code>API</code> æ–¹é¢æ— å¼‚ï¼Œè¿™é‡Œæˆ‘ä»¬ä»¥ <code>localStorage</code> ä¸ºä¾‹ï¼š</p></blockquote><ul><li>å­˜å‚¨æ•°æ®ï¼š<code>setItem()</code></li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">&#39;user_name&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;xiuyan&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>è¯»å–æ•°æ®ï¼š <code>getItem()</code></li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">&#39;user_name&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>åˆ é™¤æŸä¸€é”®åå¯¹åº”çš„æ•°æ®ï¼š <code>removeItem()</code></li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">&#39;user_name&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>æ¸…ç©ºæ•°æ®è®°å½•ï¼š<code>clear()</code></li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    localStorage<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="åº”ç”¨åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#åº”ç”¨åœºæ™¯"><span>åº”ç”¨åœºæ™¯</span></a></h3><p><strong>1. Local Storage</strong></p><blockquote><p><code>Local Storage</code> åœ¨å­˜å‚¨æ–¹é¢æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„é™åˆ¶ï¼Œç†è®ºä¸Š <code>Cookie</code> æ— æ³•èƒœä»»çš„ã€å¯ä»¥ç”¨ç®€å•çš„é”®å€¼å¯¹æ¥å­˜å–çš„æ•°æ®å­˜å‚¨ä»»åŠ¡ï¼Œéƒ½å¯ä»¥äº¤ç»™ <code>Local Storage</code> æ¥åšã€‚</p></blockquote><p>è¿™é‡Œç»™å¤§å®¶ä¸¾ä¸ªä¾‹å­ï¼Œè€ƒè™‘åˆ° <code>Local Storage</code> çš„ç‰¹ç‚¹ä¹‹ä¸€æ˜¯<strong>æŒä¹…</strong> ï¼Œæœ‰æ—¶æˆ‘ä»¬æ›´å€¾å‘äºç”¨å®ƒæ¥å­˜å‚¨ä¸€äº›å†…å®¹ç¨³å®šçš„èµ„æºã€‚æ¯”å¦‚å›¾ç‰‡å†…å®¹ä¸°å¯Œçš„ç”µå•†ç½‘ç«™ä¼šç”¨å®ƒæ¥å­˜å‚¨ <code>Base64</code> æ ¼å¼çš„å›¾ç‰‡å­—ç¬¦ä¸²ï¼š</p><p><img src="`+C+'" alt=""></p><p>æœ‰çš„ç½‘ç«™è¿˜ä¼šç”¨å®ƒå­˜å‚¨ä¸€äº›ä¸ç»å¸¸æ›´æ–°çš„ CSSã€JS ç­‰é™æ€èµ„æºã€‚</p><p><strong>2. Session Storage</strong></p><blockquote><p><code>Session Storage</code> æ›´é€‚åˆç”¨æ¥å­˜å‚¨ç”Ÿå‘½å‘¨æœŸå’Œå®ƒåŒæ­¥çš„<strong>ä¼šè¯çº§åˆ«</strong> çš„ä¿¡æ¯ã€‚è¿™äº›ä¿¡æ¯åªé€‚ç”¨äºå½“å‰ä¼šè¯ï¼Œå½“ä½ å¼€å¯æ–°çš„ä¼šè¯æ—¶ï¼Œå®ƒä¹Ÿéœ€è¦ç›¸åº”çš„æ›´æ–°æˆ–é‡Šæ”¾ã€‚æ¯”å¦‚å¾®åšçš„ <code>Session Storage</code> å°±ä¸»è¦æ˜¯å­˜å‚¨ä½ æœ¬æ¬¡ä¼šè¯çš„æµè§ˆè¶³è¿¹ï¼š</p></blockquote><p><img src="'+M+`" alt=""></p><ul><li><code>lasturl</code> å¯¹åº”çš„å°±æ˜¯ä½ ä¸Šä¸€æ¬¡è®¿é—®çš„ <code>URL</code> åœ°å€ï¼Œè¿™ä¸ªåœ°å€æ˜¯å³æ—¶çš„ã€‚å½“ä½ åˆ‡æ¢ <code>URL</code> æ—¶ï¼Œå®ƒéšä¹‹æ›´æ–°ï¼Œå½“ä½ å…³é—­é¡µé¢æ—¶ï¼Œç•™ç€å®ƒä¹Ÿç¡®å®æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰äº†ï¼Œå¹²è„†é‡Šæ”¾å§ã€‚è¿™æ ·çš„æ•°æ®ç”¨ <code>Session Storage</code> æ¥å¤„ç†å†åˆé€‚ä¸è¿‡ã€‚</li><li>è¿™æ ·çœ‹æ¥ï¼Œ<code>Web Storage</code> ç¡®å®ä¹Ÿå¤Ÿå¼ºå¤§äº†ã€‚é‚£ä¹ˆ <code>Web Storage</code> æ˜¯å¦èƒ½ hold ä½æ‰€æœ‰çš„å­˜å‚¨åœºæ™¯å‘¢ï¼Ÿ</li></ul><blockquote><p>ç­”æ¡ˆæ˜¯å¦å®šçš„ã€‚å¤§å®¶ä¹Ÿçœ‹åˆ°äº†ï¼Œ<code>Web Storage</code> æ˜¯ä¸€ä¸ªä»å®šä¹‰åˆ°ä½¿ç”¨éƒ½éå¸¸ç®€å•çš„ä¸œè¥¿ã€‚å®ƒä½¿ç”¨é”®å€¼å¯¹çš„å½¢å¼è¿›è¡Œå­˜å‚¨ï¼Œè¿™ç§æ¨¡å¼æœ‰ç‚¹ç±»ä¼¼äºå¯¹è±¡ï¼Œå´ç”šè‡³è¿å¯¹è±¡éƒ½ä¸æ˜¯â€”â€”å®ƒåªèƒ½å­˜å‚¨å­—ç¬¦ä¸²ï¼Œè¦æƒ³å¾—åˆ°å¯¹è±¡ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å…ˆå¯¹å­—ç¬¦ä¸²è¿›è¡Œä¸€è½®è§£æã€‚</p></blockquote><p>è¯´åˆ°åº•ï¼Œ<code>Web Storage</code> æ˜¯å¯¹ <code>Cookie</code> çš„æ‹“å±•ï¼Œå®ƒåªèƒ½ç”¨äºå­˜å‚¨å°‘é‡çš„ç®€å•æ•°æ®ã€‚å½“é‡åˆ°å¤§è§„æ¨¡çš„ã€ç»“æ„å¤æ‚çš„æ•°æ®æ—¶ï¼Œ<code>Web Storage</code> ä¹Ÿçˆ±è«èƒ½åŠ©äº†ã€‚è¿™æ—¶å€™æˆ‘ä»¬å°±è¦æ¸…æ¥šæˆ‘ä»¬çš„ç»ˆæå¤§ bossâ€”â€”<code>IndexDB</code>ï¼</p><h3 id="ç»ˆæå½¢æ€-indexdb" tabindex="-1"><a class="header-anchor" href="#ç»ˆæå½¢æ€-indexdb"><span>ç»ˆæå½¢æ€ï¼šIndexDB</span></a></h3><blockquote><p><code>IndexDB</code> æ˜¯ä¸€ä¸ª<strong>è¿è¡Œåœ¨æµè§ˆå™¨ä¸Šçš„éå…³ç³»å‹æ•°æ®åº“</strong> ã€‚æ—¢ç„¶æ˜¯æ•°æ®åº“äº†ï¼Œé‚£å°±ä¸æ˜¯ <code>5M</code>ã€<code>10M</code> è¿™æ ·å°æ‰“å°é—¹çº§åˆ«äº†ã€‚ç†è®ºä¸Šæ¥è¯´ï¼Œ<code>IndexDB</code> æ˜¯æ²¡æœ‰å­˜å‚¨ä¸Šé™çš„ï¼ˆä¸€èˆ¬æ¥è¯´ä¸ä¼šå°äº <code>250M</code>ï¼‰ã€‚å®ƒä¸ä»…å¯ä»¥å­˜å‚¨å­—ç¬¦ä¸²ï¼Œè¿˜å¯ä»¥å­˜å‚¨äºŒè¿›åˆ¶æ•°æ®ã€‚</p></blockquote><ul><li><code>IndexDB</code> ä»æ¨å‡ºä¹‹æ—¥èµ·ï¼Œå…¶ä¼˜è´¨æ•™ç¨‹å°±å±‚å‡ºä¸ç»ï¼Œæˆ‘ä»¬ä»Šå¤©ä¸å†ç€é‡è®²è§£å®ƒçš„è¯¦ç»†æ“ä½œã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éµå¾ª MDN æ¨èçš„æ“ä½œæ¨¡å¼ï¼Œé€šè¿‡ä¸€ä¸ªåŸºæœ¬çš„ IndexDB ä½¿ç”¨æµç¨‹ï¼Œæ—¨åœ¨å¯¹ <code>IndexDB</code> å½¢æˆä¸€ä¸ªæ„Ÿæ€§çš„è®¤çŸ¥ï¼š</li></ul><ol><li>æ‰“å¼€/åˆ›å»ºä¸€ä¸ª <code>IndexDB</code> æ•°æ®åº“ï¼ˆå½“è¯¥æ•°æ®åº“ä¸å­˜åœ¨æ—¶ï¼Œ<code>open</code> æ–¹æ³•ä¼šç›´æ¥åˆ›å»ºä¸€ä¸ªåä¸º xiaoceDB æ–°æ•°æ®åº“ï¼‰ã€‚</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">      <span class="token comment">// åé¢çš„å›è°ƒä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡event.target.resultæ‹¿åˆ°æ•°æ®åº“å®ä¾‹</span></span>
<span class="line">      <span class="token keyword">let</span> db</span>
<span class="line">      <span class="token comment">// å‚æ•°1ä½æ•°æ®åº“åï¼Œå‚æ•°2ä¸ºç‰ˆæœ¬å·</span></span>
<span class="line">      <span class="token keyword">const</span> request <span class="token operator">=</span> window<span class="token punctuation">.</span>indexedDB<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;xiaoceDB&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token comment">// ä½¿ç”¨IndexDBå¤±è´¥æ—¶çš„ç›‘å¬å‡½æ•°</span></span>
<span class="line">      request<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">         console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;æ— æ³•ä½¿ç”¨IndexDB&#39;</span><span class="token punctuation">)</span></span>
<span class="line">       <span class="token punctuation">}</span></span>
<span class="line">      <span class="token comment">// æˆåŠŸ</span></span>
<span class="line">      request<span class="token punctuation">.</span><span class="token function-variable function">onsuccess</span>  <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// æ­¤å¤„å°±å¯ä»¥è·å–åˆ°dbå®ä¾‹</span></span>
<span class="line">        db <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>result</span>
<span class="line">        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;ä½ æ‰“å¼€äº†IndexDB&quot;</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>åˆ›å»ºä¸€ä¸ª <code>object store</code>ï¼ˆobject store å¯¹æ ‡åˆ°æ•°æ®åº“ä¸­çš„â€œè¡¨â€å•ä½ï¼‰ã€‚</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token comment">// onupgradeneededäº‹ä»¶ä¼šåœ¨åˆå§‹åŒ–æ•°æ®åº“/ç‰ˆæœ¬å‘ç”Ÿæ›´æ–°æ—¶è¢«è°ƒç”¨ï¼Œæˆ‘ä»¬åœ¨å®ƒçš„ç›‘å¬å‡½æ•°ä¸­åˆ›å»ºobject store</span></span>
<span class="line">    request<span class="token punctuation">.</span><span class="token function-variable function">onupgradeneeded</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">let</span> objectStore</span>
<span class="line">      <span class="token comment">// å¦‚æœåŒåè¡¨æœªè¢«åˆ›å»ºè¿‡ï¼Œåˆ™æ–°å»ºtestè¡¨</span></span>
<span class="line">      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>db<span class="token punctuation">.</span>objectStoreNames<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&#39;test&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        objectStore <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">createObjectStore</span><span class="token punctuation">(</span><span class="token string">&#39;test&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">keyPath</span><span class="token operator">:</span> <span class="token string">&#39;id&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span>  </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>æ„å»ºä¸€ä¸ªäº‹åŠ¡æ¥æ‰§è¡Œä¸€äº›æ•°æ®åº“æ“ä½œï¼Œåƒå¢åŠ æˆ–æå–æ•°æ®ç­‰ã€‚</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">      <span class="token comment">// åˆ›å»ºäº‹åŠ¡ï¼ŒæŒ‡å®šè¡¨æ ¼åç§°å’Œè¯»å†™æƒé™</span></span>
<span class="line">      <span class="token keyword">const</span> transaction <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">transaction</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">&quot;readwrite&quot;</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token comment">// æ‹¿åˆ°Object Storeå¯¹è±¡</span></span>
<span class="line">      <span class="token keyword">const</span> objectStore <span class="token operator">=</span> transaction<span class="token punctuation">.</span><span class="token function">objectStore</span><span class="token punctuation">(</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token comment">// å‘è¡¨æ ¼å†™å…¥æ•°æ®</span></span>
<span class="line">      objectStore<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;xiuyan&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>é€šè¿‡ç›‘å¬æ­£ç¡®ç±»å‹çš„äº‹ä»¶ä»¥ç­‰å¾…æ“ä½œå®Œæˆã€‚</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">      <span class="token comment">// æ“ä½œæˆåŠŸæ—¶çš„ç›‘å¬å‡½æ•°</span></span>
<span class="line">      transaction<span class="token punctuation">.</span><span class="token function-variable function">oncomplete</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;æ“ä½œæˆåŠŸ&quot;</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">      <span class="token comment">// æ“ä½œå¤±è´¥æ—¶çš„ç›‘å¬å‡½æ•°</span></span>
<span class="line">      transaction<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;è¿™é‡Œæœ‰ä¸€ä¸ªError&quot;</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>IndexDB çš„åº”ç”¨åœºæ™¯</strong></p><blockquote><p>é€šè¿‡ä¸Šé¢çš„ç¤ºä¾‹å¤§å®¶å¯ä»¥çœ‹å‡ºï¼Œåœ¨ <code>IndexDB</code> ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºå¤šä¸ªæ•°æ®åº“ï¼Œä¸€ä¸ªæ•°æ®åº“ä¸­åˆ›å»ºå¤šå¼ è¡¨ï¼Œä¸€å¼ è¡¨ä¸­å­˜å‚¨å¤šæ¡æ•°æ®â€”â€”è¿™è¶³ä»¥ <code>hold</code> ä½å¤æ‚çš„ç»“æ„æ€§æ•°æ®ã€‚<code>IndexDB</code> å¯ä»¥çœ‹åšæ˜¯ <code>LocalStorage</code> çš„ä¸€ä¸ªå‡çº§ï¼Œå½“æ•°æ®çš„å¤æ‚åº¦å’Œè§„æ¨¡ä¸Šå‡åˆ°äº† <code>LocalStorage</code> æ— æ³•è§£å†³çš„ç¨‹åº¦ï¼Œæˆ‘ä»¬æ¯«æ— ç–‘é—®å¯ä»¥è¯·å‡º <code>IndexDB</code> æ¥å¸®å¿™ã€‚</p></blockquote><h3 id="å°ç»“-2" tabindex="-1"><a class="header-anchor" href="#å°ç»“-2"><span>å°ç»“</span></a></h3><blockquote><p>æµè§ˆå™¨ç¼“å­˜/å­˜å‚¨æŠ€æœ¯çš„å‡ºç°å’Œå‘å±•ï¼Œä¸ºæˆ‘ä»¬çš„å‰ç«¯åº”ç”¨å¸¦æ¥äº†æ— é™çš„è½¬æœºã€‚è¿‘å¹´æ¥åŸºäºç¼“å­˜/å­˜å‚¨æŠ€æœ¯çš„ç¬¬ä¸‰æ–¹åº“å±‚å‡ºä¸ç»ï¼Œæ­¤å¤–è¿˜è¡ç”Ÿå‡ºäº† <a href="https://lavas.baidu.com/pwa" target="_blank" rel="noopener noreferrer">PWA (opens new window)</a> è¿™æ ·ä¼˜ç§€çš„ Web åº”ç”¨æ¨¡å‹ã€‚å¯ä»¥è¯´ï¼Œç°ä»£å‰ç«¯åº”ç”¨ï¼Œå°¤å…¶æ˜¯ç§»åŠ¨ç«¯åº”ç”¨ï¼Œä¹‹æ‰€ä»¥å¯ä»¥å‘å±•åˆ°åœ¨ä½“éªŒä¸Šå«æ¿ Native çš„åœ°æ­¥ï¼Œä¸»è¦å°±æ˜¯ä»°ä»—ç¼“å­˜/å­˜å‚¨ç«‹ä¸‹çš„æ±—é©¬åŠŸåŠ³ã€‚</p></blockquote><h2 id="å…­ã€cdn-çš„ç¼“å­˜ä¸å›æºæœºåˆ¶è§£æ" tabindex="-1"><a class="header-anchor" href="#å…­ã€cdn-çš„ç¼“å­˜ä¸å›æºæœºåˆ¶è§£æ"><span>å…­ã€CDN çš„ç¼“å­˜ä¸å›æºæœºåˆ¶è§£æ</span></a></h2><h3 id="cdnçš„ç¼“å­˜ä¸å›æºæœºåˆ¶è§£æ" tabindex="-1"><a class="header-anchor" href="#cdnçš„ç¼“å­˜ä¸å›æºæœºåˆ¶è§£æ"><span>CDNçš„ç¼“å­˜ä¸å›æºæœºåˆ¶è§£æ</span></a></h3><blockquote><p>CDN ï¼ˆContent Delivery Networkï¼Œå³å†…å®¹åˆ†å‘ç½‘ç»œï¼‰æŒ‡çš„æ˜¯ä¸€ç»„åˆ†å¸ƒåœ¨å„ä¸ªåœ°åŒºçš„æœåŠ¡å™¨ã€‚è¿™äº›æœåŠ¡å™¨å­˜å‚¨ç€æ•°æ®çš„å‰¯æœ¬ï¼Œå› æ­¤æœåŠ¡å™¨å¯ä»¥æ ¹æ®å“ªäº›æœåŠ¡å™¨ä¸ç”¨æˆ·è·ç¦»æœ€è¿‘ï¼Œæ¥æ»¡è¶³æ•°æ®çš„è¯·æ±‚ã€‚ CDN æä¾›å¿«é€ŸæœåŠ¡ï¼Œè¾ƒå°‘å—é«˜æµé‡å½±å“ã€‚</p></blockquote><h3 id="ä¸ºä»€ä¹ˆè¦ç”¨-cdn" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆè¦ç”¨-cdn"><span>ä¸ºä»€ä¹ˆè¦ç”¨ CDN</span></a></h3><blockquote><p>æµè§ˆå™¨å­˜å‚¨çš„ç›¸å…³çŸ¥è¯†æ­¤åˆ»ç¦»æˆ‘ä»¬è¿˜ä¸å¤ªè¿œï¼Œå¤§å®¶è¶çƒ­å›å¿†ä¸€ä¸‹ï¼šç¼“å­˜ã€æœ¬åœ°å­˜å‚¨å¸¦æ¥çš„æ€§èƒ½æå‡ï¼Œæ˜¯ä¸æ˜¯åªèƒ½åœ¨â€œè·å–åˆ°èµ„æºå¹¶æŠŠå®ƒä»¬å­˜èµ·æ¥â€è¿™ä»¶äº‹æƒ…å‘ç”Ÿä¹‹åï¼Ÿä¹Ÿå°±æ˜¯è¯´ï¼Œé¦–æ¬¡è¯·æ±‚èµ„æºçš„æ—¶å€™ï¼Œè¿™äº›æ‹›æ•°éƒ½æ˜¯æ•‘ä¸äº†æˆ‘ä»¬çš„ã€‚è¦æå‡é¦–æ¬¡è¯·æ±‚çš„å“åº”èƒ½åŠ›ï¼Œé™¤äº†æˆ‘ä»¬ 2ã€3ã€4 èŠ‚æåˆ°çš„æ–¹æ¡ˆä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å€ŸåŠ© CDN çš„èƒ½åŠ›ã€‚</p></blockquote><h3 id="cdn-å¦‚ä½•å·¥ä½œ" tabindex="-1"><a class="header-anchor" href="#cdn-å¦‚ä½•å·¥ä½œ"><span>CDN å¦‚ä½•å·¥ä½œ</span></a></h3><p>å€Ÿä¸­å›½åœ°å›¾ä¸€è§’æ¥ç»™å¤§å®¶ä¸¾ä¸€ä¸ªç®€å•çš„ğŸŒ°ï¼š</p><p><img src="`+D+'" alt=""></p><p>å‡è®¾æˆ‘çš„æ ¹æœåŠ¡å™¨åœ¨æ­å·ï¼ŒåŒæ—¶åœ¨å›¾ç¤ºçš„äº”ä¸ªåŸå¸‚é‡Œéƒ½æœ‰è‡ªå·±å¯ç”¨çš„æœºæˆ¿ã€‚</p><p>æ­¤æ—¶æœ‰ä¸€ä½åŒ—äº¬çš„ç”¨æˆ·å‘æˆ‘è¯·æ±‚èµ„æºã€‚åœ¨ç½‘ç»œå¸¦å®½å°ã€ç”¨æˆ·è®¿é—®é‡å¤§çš„æƒ…å†µä¸‹ï¼Œæ­å·çš„è¿™ä¸€å°æœåŠ¡å™¨æˆ–è®¸ä¸é‚£ä¹ˆç»™åŠ›ï¼Œä¸èƒ½ç»™ç”¨æˆ·éå¸¸å¿«çš„å“åº”é€Ÿåº¦ã€‚äºæ˜¯æˆ‘çµæœºä¸€åŠ¨ï¼ŒæŠŠè¿™æ‰¹èµ„æº copy äº†ä¸€æ‰¹æ”¾åœ¨åŒ—äº¬çš„æœºæˆ¿é‡Œã€‚å½“ç”¨æˆ·è¯·æ±‚èµ„æºæ—¶ï¼Œå°±è¿‘è¯·æ±‚åŒ—äº¬çš„æœåŠ¡å™¨ï¼ŒåŒ—äº¬è¿™å°æœåŠ¡å™¨ä½å¤´ä¸€çœ‹ï¼Œè¿™ä¸ªèµ„æºæˆ‘å­˜äº†ï¼Œç¦»å¾—è¿™ä¹ˆè¿‘ï¼Œå“åº”é€Ÿåº¦è‚¯å®šå™Œå™Œçš„ï¼é‚£å¦‚æœåŒ—äº¬è¿™å°æœåŠ¡å™¨æ²¡æœ‰ copy è¿™æ‰¹èµ„æºå‘¢ï¼Ÿå®ƒä¼šå†å‘æ­å·çš„æ ¹æœåŠ¡å™¨å»è¦è¿™ä¸ªèµ„æºã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒåŒ—äº¬è¿™å°æœåŠ¡å™¨å°±æ‰®æ¼”ç€ CDN çš„è§’è‰²ã€‚</p><h3 id="cdnçš„æ ¸å¿ƒåŠŸèƒ½ç‰¹å†™" tabindex="-1"><a class="header-anchor" href="#cdnçš„æ ¸å¿ƒåŠŸèƒ½ç‰¹å†™"><span>CDNçš„æ ¸å¿ƒåŠŸèƒ½ç‰¹å†™</span></a></h3><blockquote><p>CDN çš„æ ¸å¿ƒç‚¹æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯<strong>ç¼“å­˜</strong> ï¼Œä¸€ä¸ªæ˜¯<strong>å›æº</strong> ã€‚</p></blockquote><p>è¿™ä¸¤ä¸ªæ¦‚å¿µéƒ½éå¸¸å¥½ç†è§£ã€‚å¯¹æ ‡åˆ°ä¸Šé¢æè¿°çš„è¿‡ç¨‹ï¼Œâ€œç¼“å­˜â€å°±æ˜¯è¯´æˆ‘ä»¬æŠŠèµ„æº copy ä¸€ä»½åˆ° CDN æœåŠ¡å™¨ä¸Šè¿™ä¸ªè¿‡ç¨‹ï¼Œâ€œå›æºâ€å°±æ˜¯è¯´ CDN å‘ç°è‡ªå·±æ²¡æœ‰è¿™ä¸ªèµ„æºï¼ˆä¸€èˆ¬æ˜¯ç¼“å­˜çš„æ•°æ®è¿‡æœŸäº†ï¼‰ï¼Œè½¬å¤´å‘æ ¹æœåŠ¡å™¨ï¼ˆæˆ–è€…å®ƒçš„ä¸Šå±‚æœåŠ¡å™¨ï¼‰å»è¦è¿™ä¸ªèµ„æºçš„è¿‡ç¨‹ã€‚</p><h3 id="cdn-ä¸å‰ç«¯æ€§èƒ½ä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#cdn-ä¸å‰ç«¯æ€§èƒ½ä¼˜åŒ–"><span>CDN ä¸å‰ç«¯æ€§èƒ½ä¼˜åŒ–</span></a></h3><ul><li><code>CDN</code> å¾€å¾€æ˜¯è¢«å‰ç«¯è®¤ä¸ºå‰ç«¯ä¸éœ€è¦äº†è§£çš„ä¸œè¥¿ã€‚</li><li>å…·ä½“æ¥è¯´ï¼Œæˆ‘èº«è¾¹è®¸å¤šåŒå­¦å¯¹å…¶çš„äº†è§£æ­¢æ­¥äºï¼šéƒ¨ç½²ç•Œé¢ä¸Šæœ‰ä¸€ä¸ªâ€œéƒ¨ç½²åˆ°CDNâ€æŒ‰é’®ï¼Œæˆ‘å»ç‚¹ä¸€ä¸‹ï¼Œèµ„æºå°±åœ¨ CDN ä¸Šå•¦ï¼</li></ul><p>â€œçœ¼ä¸‹ä¸šåŠ¡å¼€å‘ç”¨ä¸åˆ°çš„å¯ä»¥æš‚ç¼“äº†è§£â€ï¼Œè¿™æ˜¯æ²¡æ¯›ç—…çš„ã€‚ä½†æ­£å¦‚æˆ‘å°å†Œå¼€ç¯‡æ‰€è¯´çš„ï¼Œå‰ç«¯å·¥ç¨‹å¸ˆé¦–å…ˆæ˜¯è½¯ä»¶å·¥ç¨‹å¸ˆã€‚å¯¹æ•´ä¸ªæŠ€æœ¯æ¶æ„çš„ç†è§£ï¼Œå°†ä¼šåå“ºæˆ‘ä»¬å¯¹æŸä¸€å…·ä½“ç¯èŠ‚çš„ç†è§£ï¼›çŸ¥è¯†ç‚¹çš„é€‚å½“æ‹“å±•ï¼Œä¹Ÿä¼šå¯¹å¤§å®¶æŠ€æœ¯é«˜åº¦å’ŒæŠ€æœ¯å¹¿åº¦çš„æå‡å¤§æœ‰è£¨ç›Šã€‚</p><p>é‚£ä¹ˆï¼Œæˆ‘ä»¬äº†è§£ä¸€ä¸‹ CDN æ˜¯æ€ä¹ˆå¸®åŠ©å‰ç«¯çš„ã€‚</p><p><strong>CDN å¾€å¾€è¢«ç”¨æ¥å­˜æ”¾é™æ€èµ„æº</strong> ã€‚ä¸Šæ–‡ä¸­æˆ‘ä»¬ä¸¾ä¾‹æ‰€æåˆ°çš„â€œæ ¹æœåŠ¡å™¨â€æœ¬è´¨ä¸Šæ˜¯ä¸šåŠ¡æœåŠ¡å™¨ï¼Œå®ƒçš„æ ¸å¿ƒä»»åŠ¡åœ¨äº<strong>ç”ŸæˆåŠ¨æ€é¡µé¢æˆ–è¿”å›éçº¯é™æ€é¡µé¢</strong> ï¼Œè¿™ä¸¤ç§è¿‡ç¨‹éƒ½æ˜¯éœ€è¦è®¡ç®—çš„ã€‚ä¸šåŠ¡æœåŠ¡å™¨ä»¿ä½›ä¸€ä¸ªè½¦é—´ï¼Œè½¦é—´é‡Œè¿è½¬çš„æœºå™¨è½°é¸£ç€ä¸ºæˆ‘ä»¬äº§å‡ºæ‰€éœ€çš„èµ„æºï¼›ç›¸æ¯”ä¹‹ä¸‹ï¼ŒCDN æœåŠ¡å™¨åˆ™åƒä¸€ä¸ªä»“åº“ï¼Œå®ƒåªå……å½“èµ„æºçš„â€œæ –æ¯åœ°â€å’Œâ€œæ¬è¿å·¥â€ã€‚</p><p>æ‰€è°“â€œé™æ€èµ„æºâ€ï¼Œå°±æ˜¯åƒ JSã€CSSã€å›¾ç‰‡ç­‰<strong>ä¸éœ€è¦ä¸šåŠ¡æœåŠ¡å™¨è¿›è¡Œè®¡ç®—å³å¾—çš„èµ„æº</strong> ã€‚è€Œâ€œåŠ¨æ€èµ„æºâ€ï¼Œé¡¾åæ€ä¹‰æ˜¯éœ€è¦<strong>åç«¯å®æ—¶åŠ¨æ€ç”Ÿæˆçš„èµ„æº</strong> ï¼Œè¾ƒä¸ºå¸¸è§çš„å°±æ˜¯ JSPã€ASP æˆ–è€…ä¾èµ–æœåŠ¡ç«¯æ¸²æŸ“å¾—åˆ°çš„ HTML é¡µé¢ã€‚</p><p>ä»€ä¹ˆæ˜¯â€œéçº¯é™æ€èµ„æºâ€å‘¢ï¼Ÿå®ƒæ˜¯æŒ‡<strong>éœ€è¦æœåŠ¡å™¨åœ¨é¡µé¢ä¹‹å¤–ä½œé¢å¤–è®¡ç®—çš„ HTML é¡µé¢</strong> ã€‚å…·ä½“æ¥è¯´ï¼Œå½“æˆ‘æ‰“å¼€æŸä¸€ç½‘ç«™ä¹‹å‰ï¼Œè¯¥ç½‘ç«™éœ€è¦é€šè¿‡æƒé™è®¤è¯ç­‰ä¸€ç³»åˆ—æ‰‹æ®µç¡®è®¤æˆ‘çš„èº«ä»½ã€è¿›è€Œå†³å®šæ˜¯å¦è¦æŠŠ HTML é¡µé¢å‘ˆç°ç»™æˆ‘ã€‚è¿™ç§æƒ…å†µä¸‹ HTML ç¡®å®æ˜¯é™æ€çš„ï¼Œä½†å®ƒ<strong>å’Œä¸šåŠ¡æœåŠ¡å™¨çš„æ“ä½œè€¦åˆ</strong> ï¼Œæˆ‘ä»¬æŠŠå®ƒä¸¢åˆ°CDN ä¸Šæ˜¾ç„¶æ˜¯ä¸åˆé€‚çš„ã€‚</p><h3 id="cdn-çš„å®é™…åº”ç”¨" tabindex="-1"><a class="header-anchor" href="#cdn-çš„å®é™…åº”ç”¨"><span>CDN çš„å®é™…åº”ç”¨</span></a></h3><p>é™æ€èµ„æºæœ¬èº«å…·æœ‰è®¿é—®é¢‘ç‡é«˜ã€æ‰¿æ¥æµé‡å¤§çš„ç‰¹ç‚¹ï¼Œå› æ­¤é™æ€èµ„æºåŠ è½½é€Ÿåº¦å§‹ç»ˆæ˜¯å‰ç«¯æ€§èƒ½çš„ä¸€ä¸ªéå¸¸å…³é”®çš„æŒ‡æ ‡ã€‚CDN æ˜¯é™æ€èµ„æºæé€Ÿçš„é‡è¦æ‰‹æ®µï¼Œåœ¨è®¸å¤šä¸€çº¿çš„äº’è”ç½‘å…¬å¸ï¼Œâ€œé™æ€èµ„æºèµ° CDNâ€å¹¶ä¸æ˜¯ä¸€ä¸ªå»ºè®®ï¼Œè€Œæ˜¯ä¸€ä¸ªè§„å®šã€‚</p><p>æ¯”å¦‚ä»¥æ·˜å®ä¸ºä»£è¡¨çš„é˜¿é‡Œç³»äº§å“ï¼Œå°±éµå¾ªç€è¿™ä¸ªâ€œè§„å®šâ€ã€‚<br> æ‰“å¼€æ·˜å®é¦–é¡µï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ Network é¢æ¿ä¸­çœ‹åˆ°ï¼Œâ€œéçº¯é™æ€â€çš„ HTML é¡µé¢ï¼Œæ˜¯å‘ä¸šåŠ¡æœåŠ¡å™¨è¯·æ±‚æ¥çš„ï¼š</p><p><img src="'+P+'" alt=""></p><p>æˆ‘ä»¬ç‚¹å‡» previewï¼Œå¯ä»¥çœ‹åˆ°ä¸šåŠ¡æœåŠ¡å™¨ç¡®å®æ˜¯è¿”å›ç»™äº†æˆ‘ä»¬ä¸€ä¸ªå°šæœªè¢«é™æ€èµ„æºåŠ æŒè¿‡çš„ç®€å• HTML é¡µé¢ï¼Œæ‰€æœ‰çš„å›¾ç‰‡å†…å®¹éƒ½æ˜¯å…ˆä»¥ä¸€ä¸ª div å ä½ï¼š</p><p><img src="'+T+'" alt=""></p><p>ç›¸åº”åœ°ï¼Œæˆ‘ä»¬éšä¾¿ç‚¹å¼€ä¸€ä¸ªé™æ€èµ„æºï¼Œå¯ä»¥çœ‹åˆ°å®ƒéƒ½æ˜¯ä» CDN æœåŠ¡å™¨ä¸Šè¯·æ±‚æ¥çš„ã€‚</p><p>æ¯”å¦‚è¯´å›¾ç‰‡ï¼š</p><p><img src="'+O+'" alt=""></p><p>å†æ¯”å¦‚ JSã€CSS æ–‡ä»¶ï¼š</p><p><img src="'+L+'" alt=""><img src="'+E+`" alt=""></p><h3 id="cdn-ä¼˜åŒ–ç»†èŠ‚" tabindex="-1"><a class="header-anchor" href="#cdn-ä¼˜åŒ–ç»†èŠ‚"><span>CDN ä¼˜åŒ–ç»†èŠ‚</span></a></h3><blockquote><p>å¦‚ä½•è®© CDN çš„æ•ˆç”¨æœ€å¤§åŒ–ï¼Ÿè¿™åˆæ˜¯éœ€è¦å‰åç«¯ç¨‹åºå‘˜ä¸€èµ·æ€è€ƒçš„åºå¤§å‘½é¢˜ã€‚å®ƒæ¶‰åŠåˆ° CDN æœåŠ¡å™¨æœ¬èº«çš„æ€§èƒ½ä¼˜åŒ–ã€CDN èŠ‚ç‚¹çš„åœ°å€é€‰å–ç­‰ã€‚ä½†æˆ‘ä»¬ä»Šå¤©ä¸å†™é«˜æ·±çš„è®ºæ–‡ï¼Œåªè°ˆç¦»å‰ç«¯æœ€è¿‘çš„è¿™éƒ¨åˆ†ç»†èŠ‚ï¼šCDN çš„åŸŸåé€‰å–ã€‚</p></blockquote><p>å¤§å®¶å…ˆå›å¤´çœ‹ä¸€ä¸‹æˆ‘åˆšåˆšé€‰å–çš„æ·˜å®é¦–é¡µçš„ä¾‹å­ï¼Œæˆ‘ä»¬æ³¨æ„åˆ°ä¸šåŠ¡æœåŠ¡å™¨çš„åŸŸåæ˜¯è¿™ä¸ªï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    www<span class="token punctuation">.</span>taobao<span class="token punctuation">.</span>com</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è€Œ CDN æœåŠ¡å™¨çš„åŸŸåæ˜¯è¿™ä¸ªï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    g<span class="token punctuation">.</span>alicdn<span class="token punctuation">.</span>com</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æ²¡é”™ï¼Œæˆ‘ä»¬ä¸ä¸€æ ·ï¼</p><p>å†çœ‹å¦ä¸€æ–¹é¢ï¼Œæˆ‘ä»¬è®²åˆ° <code>Cookie</code> çš„æ—¶å€™ï¼Œä¸ºäº†å‡¸æ˜¾ <code>Local Storage</code> çš„ä¼˜è¶Šæ€§ï¼Œæ›¾ç»æåˆ°è¿‡ï¼š</p><blockquote><p><code>Cookie</code> æ˜¯ç´§è·ŸåŸŸåçš„ã€‚åŒä¸€ä¸ªåŸŸåä¸‹çš„æ‰€æœ‰è¯·æ±‚ï¼Œéƒ½ä¼šæºå¸¦ <code>Cookie</code>ã€‚å¤§å®¶è¯•æƒ³ï¼Œå¦‚æœæˆ‘ä»¬æ­¤åˆ»ä»…ä»…æ˜¯è¯·æ±‚ä¸€å¼ å›¾ç‰‡æˆ–è€…ä¸€ä¸ª <code>CSS</code> æ–‡ä»¶ï¼Œæˆ‘ä»¬ä¹Ÿè¦æºå¸¦ä¸€ä¸ª <code>Cookie</code> è·‘æ¥è·‘å»ï¼ˆå…³é”®æ˜¯ <code>Cookie</code> é‡Œå­˜å‚¨çš„ä¿¡æ¯æˆ‘ç°åœ¨å¹¶ä¸éœ€è¦ï¼‰ï¼Œè¿™æ˜¯ä¸€ä»¶å¤šä¹ˆåŠ³æ°‘ä¼¤è´¢çš„äº‹æƒ…ã€‚<code>Cookie</code> è™½ç„¶å°ï¼Œè¯·æ±‚å´å¯ä»¥æœ‰å¾ˆå¤šï¼Œéšç€è¯·æ±‚çš„å åŠ ï¼Œè¿™æ ·çš„ä¸å¿…è¦çš„ Cookie å¸¦æ¥çš„å¼€é”€å°†æ˜¯æ— æ³•æƒ³è±¡çš„â€¦â€¦</p></blockquote><ul><li>åŒä¸€ä¸ªåŸŸåä¸‹çš„è¯·æ±‚ä¼šä¸åˆ†é’çº¢çš‚ç™½åœ°æºå¸¦ <code>Cookie</code>ï¼Œè€Œé™æ€èµ„æºå¾€å¾€å¹¶ä¸éœ€è¦ <code>Cookie</code> æºå¸¦ä»€ä¹ˆè®¤è¯ä¿¡æ¯ã€‚æŠŠé™æ€èµ„æºå’Œä¸»é¡µé¢ç½®äºä¸åŒçš„åŸŸåä¸‹ï¼Œå®Œç¾åœ°é¿å…äº†ä¸å¿…è¦çš„ <code>Cookie</code> çš„å‡ºç°ï¼</li><li>çœ‹èµ·æ¥æ˜¯ä¸€ä¸ªä¸èµ·çœ¼çš„å°ç»†èŠ‚ï¼Œä½†å¸¦æ¥çš„æ•ˆç”¨å´æ˜¯æƒŠäººçš„ã€‚ä»¥ç”µå•†ç½‘ç«™é™æ€èµ„æºçš„æµé‡ä¹‹åºå¤§ï¼Œå¦‚æœæ²¡æŠŠè¿™ä¸ªå¤šä½™çš„ <code>Cookie</code> æ‹¿ä¸‹æ¥ï¼Œä¸ä»…ç”¨æˆ·ä½“éªŒä¼šå¤§æ‰“æŠ˜æ‰£ï¼Œæ¯å¹´å› æ€§èƒ½æµªè´¹å¸¦æ¥çš„ç»æµå¼€é”€ä¹Ÿå°†æ˜¯ä¸€ä¸ªéå¸¸ææ€–çš„æ•°å­—ã€‚</li></ul><h2 id="ä¸ƒã€æ¸²æŸ“ç¯‡-1-æœåŠ¡ç«¯æ¸²æŸ“çš„æ¢ç´¢ä¸å®è·µ" tabindex="-1"><a class="header-anchor" href="#ä¸ƒã€æ¸²æŸ“ç¯‡-1-æœåŠ¡ç«¯æ¸²æŸ“çš„æ¢ç´¢ä¸å®è·µ"><span>ä¸ƒã€æ¸²æŸ“ç¯‡ 1ï¼šæœåŠ¡ç«¯æ¸²æŸ“çš„æ¢ç´¢ä¸å®è·µ</span></a></h2><blockquote><p>æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰è¿‘ä¸¤å¹´ç‚’å¾—å¾ˆç«çƒ­ï¼Œç›¸ä¿¡å„ä½åŒå­¦å¯¹è¿™ä¸ªåè¯å¤šå°‘æœ‰æ‰€è€³é—»ã€‚æœ¬èŠ‚æˆ‘ä»¬å°†å›´ç»•â€œæ˜¯ä»€ä¹ˆâ€ï¼ˆæœåŠ¡ç«¯æ¸²æŸ“çš„è¿è¡Œæœºåˆ¶ï¼‰ã€â€œä¸ºä»€ä¹ˆâ€ï¼ˆæœåŠ¡ç«¯æ¸²æŸ“è§£å†³äº†ä»€ä¹ˆæ€§èƒ½é—®é¢˜ ï¼‰ã€â€œæ€ä¹ˆåšâ€ï¼ˆæœåŠ¡ç«¯æ¸²æŸ“çš„åº”ç”¨å®ä¾‹ä¸ä½¿ç”¨åœºæ™¯ï¼‰è¿™ä¸‰ä¸ªç‚¹ï¼Œå¯¹æœåŠ¡ç«¯æ¸²æŸ“è¿›è¡Œæ¢ç´¢ã€‚</p></blockquote><ul><li>æœåŠ¡ç«¯æ¸²æŸ“æ˜¯ä¸€ä¸ªç›¸å¯¹çš„æ¦‚å¿µï¼Œå®ƒçš„å¯¹ç«‹é¢æ˜¯â€œå®¢æˆ·ç«¯æ¸²æŸ“â€ã€‚åœ¨è¿è¡Œæœºåˆ¶è§£æè¿™éƒ¨åˆ†ï¼Œæˆ‘ä»¬ä¼šå€ŸåŠ›å®¢æˆ·ç«¯æ¸²æŸ“çš„æ¦‚å¿µï¼Œæ¥å¸®å¤§å®¶ç†è§£æœåŠ¡ç«¯æ¸²æŸ“çš„å·¥ä½œæ–¹å¼ã€‚åŸºäºå¯¹å·¥ä½œæ–¹å¼çš„äº†è§£ï¼Œå†å»æ·±æŒ–å®ƒçš„åŸç†ä¸ä¼˜åŠ¿ã€‚</li><li>ä»»ä½•çŸ¥è¯†ç‚¹éƒ½ä¸æ˜¯â€œä¸€åº§å­¤å²›â€ï¼ŒæœåŠ¡ç«¯æ¸²æŸ“çš„å®è·µå¾€å¾€ä¸å½“ä¸‹æµè¡Œçš„å‰ç«¯æŠ€æœ¯ï¼ˆè­¬å¦‚ Vueï¼ŒReactï¼ŒRedux ç­‰ï¼‰ç´§å¯†ç»“åˆã€‚æœ¬èŠ‚ä¸‹åŠåœºå°†ä»¥ React å’Œ Vue ä¸‹çš„æœåŠ¡ç«¯æ¸²æŸ“å®ç°ä¸ºä¾‹ï¼Œä¸ºå¤§å®¶å‘ˆç°ä¸€ä¸ªå®Œæ•´çš„ SSR å®ç°è¿‡ç¨‹ã€‚</li></ul><h3 id="æœåŠ¡ç«¯æ¸²æŸ“çš„è¿è¡Œæœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡ç«¯æ¸²æŸ“çš„è¿è¡Œæœºåˆ¶"><span>æœåŠ¡ç«¯æ¸²æŸ“çš„è¿è¡Œæœºåˆ¶</span></a></h3><p>ç›¸å¯¹äºæœåŠ¡ç«¯æ¸²æŸ“ï¼ŒåŒå­¦ä»¬æ™®éå¯¹å®¢æˆ·ç«¯æ¸²æŸ“æ¥å—åº¦æ›´é«˜ä¸€äº›ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆä»å¤§å®¶å–œé—»ä¹è§çš„å®¢æˆ·ç«¯æ¸²æŸ“è¯´èµ·ã€‚</p><p><strong>1. å®¢æˆ·ç«¯æ¸²æŸ“</strong></p><blockquote><p>å®¢æˆ·ç«¯æ¸²æŸ“æ¨¡å¼ä¸‹ï¼ŒæœåŠ¡ç«¯ä¼šæŠŠæ¸²æŸ“éœ€è¦çš„é™æ€æ–‡ä»¶å‘é€ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯åŠ è½½è¿‡æ¥ä¹‹åï¼Œè‡ªå·±åœ¨æµè§ˆå™¨é‡Œè·‘ä¸€é JSï¼Œæ ¹æ® JS çš„è¿è¡Œç»“æœï¼Œç”Ÿæˆç›¸åº”çš„ DOMã€‚è¿™ç§ç‰¹æ€§ä½¿å¾—å®¢æˆ·ç«¯æ¸²æŸ“çš„æºä»£ç æ€»æ˜¯ç‰¹åˆ«ç®€æ´ï¼Œå¾€å¾€æ˜¯è¿™ä¸ªå¾·è¡Œï¼š</p></blockquote><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html" data-title="html"><pre><code><span class="line">    <span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">doctype</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>æˆ‘æ˜¯å®¢æˆ·ç«¯æ¸²æŸ“çš„é¡µé¢<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>root<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>index.js<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ ¹èŠ‚ç‚¹ä¸‹åˆ°åº•æ˜¯ä»€ä¹ˆå†…å®¹å‘¢ï¼Ÿä½ ä¸çŸ¥é“ï¼Œæˆ‘ä¸çŸ¥é“ï¼Œåªæœ‰æµè§ˆå™¨æŠŠ index.js è·‘è¿‡ä¸€éåæ‰çŸ¥é“ï¼Œè¿™å°±æ˜¯å…¸å‹çš„å®¢æˆ·ç«¯æ¸²æŸ“ã€‚</p><p><strong>é¡µé¢ä¸Šå‘ˆç°çš„å†…å®¹ï¼Œä½ åœ¨ html æºæ–‡ä»¶é‡Œé‡Œæ‰¾ä¸åˆ°</strong> â€”â€”è¿™æ­£æ˜¯å®ƒçš„ç‰¹ç‚¹ã€‚</p><p><strong>2. æœåŠ¡ç«¯æ¸²æŸ“</strong></p><blockquote><p>æœåŠ¡ç«¯æ¸²æŸ“çš„æ¨¡å¼ä¸‹ï¼Œå½“ç”¨æˆ·ç¬¬ä¸€æ¬¡è¯·æ±‚é¡µé¢æ—¶ï¼Œç”±æœåŠ¡å™¨æŠŠéœ€è¦çš„ç»„ä»¶æˆ–é¡µé¢æ¸²æŸ“æˆ HTML å­—ç¬¦ä¸²ï¼Œç„¶åæŠŠå®ƒè¿”å›ç»™å®¢æˆ·ç«¯ã€‚å®¢æˆ·ç«¯æ‹¿åˆ°æ‰‹çš„ï¼Œæ˜¯å¯ä»¥ç›´æ¥æ¸²æŸ“ç„¶åå‘ˆç°ç»™ç”¨æˆ·çš„ HTML å†…å®¹ï¼Œä¸éœ€è¦ä¸ºäº†ç”Ÿæˆ DOM å†…å®¹è‡ªå·±å†å»è·‘ä¸€é JS ä»£ç ã€‚</p></blockquote><p>ä½¿ç”¨æœåŠ¡ç«¯æ¸²æŸ“çš„ç½‘ç«™ï¼Œå¯ä»¥è¯´æ˜¯â€œæ‰€è§å³æ‰€å¾—â€ï¼Œ<strong>é¡µé¢ä¸Šå‘ˆç°çš„å†…å®¹ï¼Œæˆ‘ä»¬åœ¨ html æºæ–‡ä»¶é‡Œä¹Ÿèƒ½æ‰¾åˆ°</strong> ã€‚</p><p>æ¯”å¦‚çŸ¥ä¹å°±æ˜¯å…¸å‹çš„æœåŠ¡ç«¯æ¸²æŸ“æ¡ˆä¾‹ï¼š</p><p><img src="`+B+`" alt=""></p><blockquote><p>zhihu.com è¿”å›çš„ HTML æ–‡ä»¶å·²ç»æ˜¯å¯ä»¥ç›´æ¥è¿›è¡Œæ¸²æŸ“çš„å†…å®¹äº†ã€‚</p></blockquote><h3 id="æœåŠ¡ç«¯æ¸²æŸ“è§£å†³äº†ä»€ä¹ˆæ€§èƒ½é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡ç«¯æ¸²æŸ“è§£å†³äº†ä»€ä¹ˆæ€§èƒ½é—®é¢˜"><span>æœåŠ¡ç«¯æ¸²æŸ“è§£å†³äº†ä»€ä¹ˆæ€§èƒ½é—®é¢˜</span></a></h3><ul><li>äº‹å®ä¸Šï¼Œå¾ˆå¤šç½‘ç«™æ˜¯å‡ºäºæ•ˆç›Šçš„è€ƒè™‘æ‰å¯ç”¨æœåŠ¡ç«¯æ¸²æŸ“ï¼Œæ€§èƒ½å€’æ˜¯åœ¨å…¶æ¬¡ã€‚</li><li>å‡è®¾ A ç½‘ç«™é¡µé¢ä¸­æœ‰ä¸€ä¸ªå…³é”®å­—å«â€œå‰ç«¯æ€§èƒ½ä¼˜åŒ–â€ï¼Œè¿™ä¸ªå…³é”®å­—æ˜¯ JS ä»£ç è·‘è¿‡ä¸€éåæ·»åŠ åˆ° HTML é¡µé¢ä¸­çš„ã€‚é‚£ä¹ˆå®¢æˆ·ç«¯æ¸²æŸ“æ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬åœ¨æœç´¢å¼•æ“æœç´¢è¿™ä¸ªå…³é”®å­—ï¼Œæ˜¯æ‰¾ä¸åˆ° A ç½‘ç«™çš„â€”â€”æœç´¢å¼•æ“åªä¼šæŸ¥æ‰¾ç°æˆçš„å†…å®¹ï¼Œä¸ä¼šå¸®ä½ è·‘ JS ä»£ç ã€‚A ç½‘ç«™çš„è¿è¥æ–¹è§æ­¤æƒ…å½¢ï¼Œæ„Ÿåˆ°å¾ˆå¤´å¤§ï¼šæœç´¢å¼•æ“æœä¸å‡ºæ¥ï¼Œç”¨æˆ·æ‰¾ä¸åˆ°æˆ‘ä»¬ï¼Œè°è¿˜ä¼šç”¨æˆ‘çš„ç½‘ç«™å‘¢ï¼Ÿä¸ºäº†æŠŠâ€œç°æˆçš„å†…å®¹â€æ‹¿ç»™æœç´¢å¼•æ“çœ‹ï¼ŒA ç½‘ç«™ä¸å¾—ä¸å¯ç”¨æœåŠ¡ç«¯æ¸²æŸ“ã€‚</li><li>ä½†æ€§èƒ½åœ¨å…¶æ¬¡ï¼Œä¸ä»£è¡¨æ€§èƒ½ä¸é‡è¦ã€‚æœåŠ¡ç«¯æ¸²æŸ“è§£å†³äº†ä¸€ä¸ªéå¸¸å…³é”®çš„æ€§èƒ½é—®é¢˜â€”â€”é¦–å±åŠ è½½é€Ÿåº¦è¿‡æ…¢ã€‚åœ¨å®¢æˆ·ç«¯æ¸²æŸ“æ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬é™¤äº†åŠ è½½ HTMLï¼Œè¿˜è¦ç­‰æ¸²æŸ“æ‰€éœ€çš„è¿™éƒ¨åˆ† JS åŠ è½½å®Œï¼Œä¹‹åè¿˜å¾—æŠŠè¿™éƒ¨åˆ† JS åœ¨æµè§ˆå™¨ä¸Šå†è·‘ä¸€éã€‚è¿™ä¸€åˆ‡éƒ½æ˜¯å‘ç”Ÿåœ¨ç”¨æˆ·ç‚¹å‡»äº†æˆ‘ä»¬çš„é“¾æ¥ä¹‹åçš„äº‹æƒ…ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ç»“æŸä¹‹å‰ï¼Œç”¨æˆ·å§‹ç»ˆè§ä¸åˆ°æˆ‘ä»¬ç½‘é¡µçš„åºå±±çœŸé¢ç›®ï¼Œä¹Ÿå°±æ˜¯è¯´ç”¨æˆ·ä¸€ç›´åœ¨ç­‰ï¼ç›¸æ¯”ä¹‹ä¸‹ï¼ŒæœåŠ¡ç«¯æ¸²æŸ“æ¨¡å¼ä¸‹ï¼ŒæœåŠ¡å™¨ç»™åˆ°å®¢æˆ·ç«¯çš„å·²ç»æ˜¯ä¸€ä¸ªç›´æ¥å¯ä»¥æ‹¿æ¥å‘ˆç°ç»™ç”¨æˆ·çš„ç½‘é¡µï¼Œä¸­é—´ç¯èŠ‚æ—©åœ¨æœåŠ¡ç«¯å°±å¸®æˆ‘ä»¬åšæ‰äº†ï¼Œç”¨æˆ·å²‚ä¸â€œç¾æ»‹æ»‹â€ï¼Ÿ</li></ul><h3 id="æœåŠ¡ç«¯æ¸²æŸ“çš„åº”ç”¨å®ä¾‹" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡ç«¯æ¸²æŸ“çš„åº”ç”¨å®ä¾‹"><span>æœåŠ¡ç«¯æ¸²æŸ“çš„åº”ç”¨å®ä¾‹</span></a></h3><p>ä¸‹é¢æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹åœ¨ä¸€ä¸ª React é¡¹ç›®é‡Œï¼ŒæœåŠ¡ç«¯æ¸²æŸ“æ˜¯æ€ä¹ˆå®ç°çš„ã€‚æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ Express æ­å»ºåç«¯æœåŠ¡ã€‚</p><p>é¡¹ç›®ä¸­æœ‰ä¸€ä¸ªå«åš <code>VDom</code> çš„ <code>React</code> ç»„ä»¶ï¼Œå®ƒçš„å†…å®¹å¦‚ä¸‹ã€‚</p><p>VDom.js:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">const</span> <span class="token function-variable function">VDom</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>æˆ‘æ˜¯ä¸€ä¸ªè¢«æ¸²æŸ“ä¸ºçœŸå®<span class="token constant">DOM</span>çš„è™šæ‹Ÿ<span class="token constant">DOM</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">export</span> <span class="token keyword">default</span> VDom</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨æœåŠ¡ç«¯çš„å…¥å£æ–‡ä»¶ä¸­ï¼Œæˆ‘å¼•å…¥è¿™ä¸ªç»„ä»¶ï¼Œå¯¹å®ƒè¿›è¡Œæ¸²æŸ“ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token keyword">import</span> express <span class="token keyword">from</span> <span class="token string">&#39;express&#39;</span></span>
<span class="line">    <span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span></span>
<span class="line">    <span class="token keyword">import</span> <span class="token punctuation">{</span> renderToString <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-dom/server&#39;</span></span>
<span class="line">    <span class="token keyword">import</span> VDom <span class="token keyword">from</span> <span class="token string">&#39;./VDom&#39;</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// åˆ›å»ºä¸€ä¸ªexpressåº”ç”¨</span></span>
<span class="line">    <span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment">// renderToString æ˜¯æŠŠè™šæ‹ŸDOMè½¬åŒ–ä¸ºçœŸå®DOMçš„å…³é”®æ–¹æ³•</span></span>
<span class="line">    <span class="token keyword">const</span> RDom <span class="token operator">=</span> <span class="token function">renderToString</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>VDom <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment">// ç¼–å†™HTMLæ¨¡æ¿ï¼Œæ’å…¥è½¬åŒ–åçš„çœŸå®DOMå†…å®¹</span></span>
<span class="line">    <span class="token keyword">const</span> Page <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string"></span>
<span class="line">                &lt;html&gt;</span>
<span class="line">                  &lt;head&gt;</span>
<span class="line">                    &lt;title&gt;test&lt;/title&gt;</span>
<span class="line">                  &lt;/head&gt;</span>
<span class="line">                  &lt;body&gt;</span>
<span class="line">                    &lt;span&gt;æœåŠ¡ç«¯æ¸²æŸ“å‡ºäº†çœŸå®DOM:  &lt;/span&gt;</span>
<span class="line">                    </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>RDom<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"></span>
<span class="line">                  &lt;/body&gt;</span>
<span class="line">                &lt;/html&gt;</span>
<span class="line">                </span><span class="token template-punctuation string">\`</span></span></span>
<span class="line">                </span>
<span class="line">    <span class="token comment">// é…ç½®HTMLå†…å®¹å¯¹åº”çš„è·¯ç”±</span></span>
<span class="line">    app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/index&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>Page<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// é…ç½®ç«¯å£å·</span></span>
<span class="line">    <span class="token keyword">const</span> server <span class="token operator">=</span> app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">8000</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ ¹æ®æˆ‘ä»¬çš„è·¯ç”±é…ç½®ï¼Œå½“æˆ‘è®¿é—® <a href="http://localhost:8000/index" target="_blank" rel="noopener noreferrer">http://localhost:8000/index</a><a href="http://localhost:8000/index" target="_blank" rel="noopener noreferrer"> (opens new window)</a> æ—¶ï¼Œå°±å¯ä»¥å‘ˆç°å‡ºæœåŠ¡ç«¯æ¸²æŸ“çš„ç»“æœäº†ï¼š</p><p><img src="`+H+`" alt=""></p><blockquote><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ<code>VDom</code> ç»„ä»¶å·²ç»è¢« <code>renderToString</code> è½¬åŒ–ä¸ºäº†ä¸€ä¸ªå†…å®¹ä¸º<code>&lt;div data- reactroot=&quot;&quot;&gt;æˆ‘æ˜¯ä¸€ä¸ªè¢«æ¸²æŸ“ä¸ºçœŸå®DOMçš„è™šæ‹ŸDOM&lt;/div&gt;</code>çš„å­—ç¬¦ä¸²ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²è¢«æ’å…¥ HTML ä»£ç ï¼Œæˆä¸ºäº†çœŸå® DOM æ ‘çš„ä¸€éƒ¨åˆ†ã€‚</p></blockquote><p>é‚£ä¹ˆ Vue æ˜¯å¦‚ä½•å®ç°æœåŠ¡ç«¯æ¸²æŸ“çš„å‘¢ï¼Ÿ</p><blockquote><p>å…¶å®æ˜¯ä¸€ä¸ªå¥—è·¯ï¼Œè¿™é‡ŒåŸºäº <a href="https://ssr.vuejs.org/zh/#%E4%BB%80%E4%B9%88%E6%98%AF%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E6%B8%B2%E6%9F%93-ssr-%EF%BC%9F" target="_blank" rel="noopener noreferrer">Vue SSR æŒ‡å— (opens new window)</a> ä¸­å®˜æ–¹ç»™å‡ºçš„ä¾‹å­ä¸ºå¤§å®¶è®²è§£ Vue ä¸­çš„å®ç°æ€è·¯ï¼ˆæ€è·¯è§æ³¨é‡Šï¼‰ã€‚</p></blockquote><p>è¯¥ç¤ºä¾‹ç›´æ¥å°† Vue å®ä¾‹æ•´åˆè¿›äº†æœåŠ¡ç«¯çš„å…¥å£æ–‡ä»¶ä¸­ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token keyword">const</span> Vue <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;vue&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment">// åˆ›å»ºä¸€ä¸ªexpressåº”ç”¨</span></span>
<span class="line">    <span class="token keyword">const</span> server <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;express&#39;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment">// æå–å‡ºrendererå®ä¾‹</span></span>
<span class="line">    <span class="token keyword">const</span> renderer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;vue-server-renderer&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">createRenderer</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    server<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;*&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">// ç¼–å†™Vueå®ä¾‹ï¼ˆè™šæ‹ŸDOMèŠ‚ç‚¹ï¼‰</span></span>
<span class="line">      <span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token literal-property property">url</span><span class="token operator">:</span> req<span class="token punctuation">.</span>url</span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token comment">// ç¼–å†™æ¨¡æ¿HTMLçš„å†…å®¹</span></span>
<span class="line">        <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">&lt;div&gt;è®¿é—®çš„ URL æ˜¯ï¼š {{ url }}&lt;/div&gt;</span><span class="token template-punctuation string">\`</span></span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">        </span>
<span class="line">      <span class="token comment">// renderToString æ˜¯æŠŠVueå®ä¾‹è½¬åŒ–ä¸ºçœŸå®DOMçš„å…³é”®æ–¹æ³•</span></span>
<span class="line">      renderer<span class="token punctuation">.</span><span class="token function">renderToString</span><span class="token punctuation">(</span>app<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> html</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">          res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&#39;Internal Server Error&#39;</span><span class="token punctuation">)</span></span>
<span class="line">          <span class="token keyword">return</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token comment">// æŠŠæ¸²æŸ“å‡ºæ¥çš„çœŸå®DOMå­—ç¬¦ä¸²æ’å…¥HTMLæ¨¡æ¿ä¸­</span></span>
<span class="line">        res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string"></span>
<span class="line">          &lt;!DOCTYPE html&gt;</span>
<span class="line">          &lt;html lang=&quot;en&quot;&gt;</span>
<span class="line">            &lt;head&gt;&lt;title&gt;Hello&lt;/title&gt;&lt;/head&gt;</span>
<span class="line">            &lt;body&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>html<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/body&gt;</span>
<span class="line">          &lt;/html&gt;</span>
<span class="line">        </span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">8080</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å¤§å®¶å¯¹æ¯”ä¸€ä¸‹ React é¡¹ç›®ä¸­çš„æ³¨é‡Šå†…å®¹ï¼Œæ˜¯ä¸æ˜¯å‘ç°è¿™ä¸¤æ®µä»£ç ä»æœ¬è´¨ä¸Šæ¥è¯´åŒºåˆ«ä¸å¤§å‘¢ï¼Ÿ</li></ul><p>ä»¥ä¸Šä¸¤ä¸ªå°ğŸŒ°ï¼Œä¸ºå¤§å®¶æ¼”ç¤ºäº†åŸºæœ¬çš„æœåŠ¡ç«¯æ¸²æŸ“å®ç°æµç¨‹ã€‚</p><blockquote><p>å®é™…é¡¹ç›®æ¯”è¿™äº›å¤æ‚å¾ˆå¤šï¼Œä½†ä¸‡å˜ä¸ç¦»å…¶å®—ã€‚å¼ºè°ƒçš„åªæœ‰ä¸¤ç‚¹ï¼šä¸€æ˜¯è¿™ä¸ª <code>renderToString()</code> æ–¹æ³•ï¼›äºŒæ˜¯æŠŠè½¬åŒ–ç»“æœâ€œå¡â€è¿›æ¨¡æ¿é‡Œçš„è¿™ä¸€æ­¥ã€‚è¿™ä¸¤ä¸ªæ“ä½œæ˜¯æœåŠ¡ç«¯æ¸²æŸ“çš„çµé­‚æ“ä½œã€‚åœ¨è™šæ‹Ÿ DOMâ€œæ¨ªè¡Œâ€çš„å½“ä¸‹ï¼ŒæœåŠ¡ç«¯æ¸²æŸ“ä¸å†æ˜¯æ—©å¹´ JSP é‡Œç®€å•ç²—æš´çš„å­—ç¬¦ä¸²æ‹¼æ¥è¿‡ç¨‹ï¼Œå®ƒè¿˜è¦æ±‚è¿™ä¸€ç«¯è¦å…·å¤‡å°†è™šæ‹Ÿ <code>DOM</code> è½¬åŒ–ä¸ºçœŸå® DOM çš„èƒ½åŠ›ã€‚ä¸å…¶è¯´æ˜¯â€œæŠŠ JS åœ¨æœåŠ¡å™¨ä¸Šå…ˆè·‘ä¸€éâ€ï¼Œä¸å¦‚è¯´æ˜¯â€œæŠŠ <code>Vue</code>ã€<code>React</code> ç­‰æ¡†æ¶ä»£ç å…ˆåœ¨ <code>Node</code> ä¸Šè·‘ä¸€éâ€ã€‚</p></blockquote><h3 id="æœåŠ¡ç«¯æ¸²æŸ“çš„åº”ç”¨åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#æœåŠ¡ç«¯æ¸²æŸ“çš„åº”ç”¨åœºæ™¯"><span>æœåŠ¡ç«¯æ¸²æŸ“çš„åº”ç”¨åœºæ™¯</span></a></h3><ul><li>æ‰“çœ¼ä¸€çœ‹ï¼Œè¿™ä¸ªæœåŠ¡ç«¯æ¸²æŸ“ç»™æµè§ˆå™¨çœäº†è¿™ä¹ˆå¤šäº‹å„¿ï¼Œæ€§èƒ½è‚¯å®šæ˜¯è´¨çš„é£è·ƒå•Šï¼å–œé—»ä¹è§ï¼ä½†æ˜¯å¤§å®¶æ‰“å¼€è‡ªå·±ç»å¸¸è®¿é—®çš„é‚£äº›ç½‘é¡µçœ‹ä¸€çœ‹ï¼Œä¼šå‘ç°ä»ç„¶æœ‰è®¸å¤šç½‘ç«™å‹æ ¹å„¿ä¸ç”¨æœåŠ¡ç«¯æ¸²æŸ“â€”â€”çœ‹æ¥è¿™ä¸ªä¸œè¥¿ä¹Ÿä¸æ˜¯ä¸‡èƒ½çš„ã€‚</li><li>æ ¹æ®æˆ‘ä»¬å‰é¢çš„æè¿°ï¼Œä¸éš¾çœ‹å‡ºï¼ŒæœåŠ¡ç«¯æ¸²æŸ“æœ¬è´¨ä¸Šæ˜¯<strong>æœ¬è¯¥æµè§ˆå™¨åšçš„äº‹æƒ…ï¼Œåˆ†æ‹…ç»™æœåŠ¡å™¨å»åš</strong> ã€‚è¿™æ ·å½“èµ„æºæŠµè¾¾æµè§ˆå™¨æ—¶ï¼Œå®ƒå‘ˆç°çš„é€Ÿåº¦å°±å¿«äº†ã€‚ä¹ä¸€çœ‹å¥½åƒå¾ˆåˆç†ï¼šæµè§ˆå™¨æ€§èƒ½æ¯•ç«Ÿæœ‰é™ï¼ŒæœåŠ¡å™¨å¤šç‰›é€¼ï¼èƒ½è€…å¤šåŠ³ï¼Œå°±è¯¥è®©æœåŠ¡å™¨å¤šå¹²ç‚¹æ´»ï¼</li><li>ä½†ä»”ç»†æƒ³æƒ³ï¼Œåœ¨è¿™ä¸ªç½‘æ°‘éåœ°çš„æ—¶ä»£ï¼Œå‡ ä¹æœ‰å¤šå°‘ä¸ªç”¨æˆ·å°±æœ‰å¤šå°‘å°æµè§ˆå™¨ã€‚ç”¨æˆ·æ‹¥æœ‰çš„æµè§ˆå™¨æ€»é‡å¤šåˆ°æ•°ä¸æ¸…ï¼Œé‚£ä¹ˆä¸€ä¸ªå…¬å¸çš„æœåŠ¡å™¨åˆæœ‰å¤šå°‘å°å‘¢ï¼Ÿæˆ‘ä»¬æŠŠè¿™ä¹ˆå¤šå°æµè§ˆå™¨çš„æ¸²æŸ“å‹åŠ›é›†ä¸­èµ·æ¥ï¼Œåˆ†æ•£ç»™ç›¸æ¯”ä¹‹ä¸‹æ•°é‡å¹¶ä¸å¤šçš„æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨è‚¯å®šæ˜¯æ‰¿å—ä¸ä½çš„ã€‚</li><li>è¿™æ ·åˆ†æä¸‹æ¥ï¼ŒæœåŠ¡ç«¯æ¸²æŸ“ä¹Ÿå¹¶éä¸‡å…¨ä¹‹ç­–ã€‚åœ¨å®è·µä¸­ï¼Œæˆ‘ä¸€èˆ¬ä¼šå»ºè®®å¤§å®¶å…ˆå¿˜è®°æœåŠ¡ç«¯æ¸²æŸ“è¿™ä¸ªäº‹æƒ…â€”â€”æœåŠ¡å™¨ç¨€å°‘è€Œå®è´µï¼Œä½†é¦–å±æ¸²æŸ“ä½“éªŒå’Œ SEO çš„ä¼˜åŒ–æ–¹æ¡ˆå´å¾ˆå¤šâ€”â€”æˆ‘ä»¬æœ€å¥½å…ˆæŠŠèƒ½ç”¨çš„ä½æˆæœ¬â€œå¤§æ‹›â€éƒ½ç”¨å®Œã€‚é™¤éç½‘é¡µå¯¹æ€§èƒ½è¦æ±‚å¤ªé«˜äº†ï¼Œä»¥è‡³äºæ‰€æœ‰çš„æ‹›å¼éƒ½ç”¨å®Œäº†ï¼Œæ€§èƒ½è¡¨ç°è¿˜æ˜¯ä¸å°½äººæ„ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥è€ƒè™‘å‘è€æ¿å¤šç”³è¯·å‡ å°æœåŠ¡å™¨ï¼ŒæŠŠæœåŠ¡ç«¯æ¸²æŸ“æèµ·æ¥äº†~</li></ul><h2 id="å…«ã€æ¸²æŸ“ç¯‡-2-çŸ¥å·±çŸ¥å½¼â€”â€”è§£é”æµè§ˆå™¨èƒŒåçš„è¿è¡Œæœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#å…«ã€æ¸²æŸ“ç¯‡-2-çŸ¥å·±çŸ¥å½¼â€”â€”è§£é”æµè§ˆå™¨èƒŒåçš„è¿è¡Œæœºåˆ¶"><span>å…«ã€æ¸²æŸ“ç¯‡ 2ï¼šçŸ¥å·±çŸ¥å½¼â€”â€”è§£é”æµè§ˆå™¨èƒŒåçš„è¿è¡Œæœºåˆ¶</span></a></h2><blockquote><p>å¹³æ—¶æˆ‘ä»¬å‡ ä¹æ¯å¤©éƒ½åœ¨å’Œæµè§ˆå™¨æ‰“äº¤é“ï¼Œåœ¨ä¸€äº›å…¼å®¹ä»»åŠ¡æ¯”è¾ƒç¹é‡çš„å›¢é˜Ÿé‡Œï¼Œè‹¦é€¼çš„å‰ç«¯æ”»åŸå¸ˆä»¬ç”šè‡³ä¸ºäº†å…¼å®¹å„ä¸ªæµè§ˆå™¨è€Œä¸æ–­åœ°å»æµ‹è¯•å’Œè°ƒè¯•ï¼Œè¿˜è¦åœ¨è„‘å­ä¸­è®°ä¸‹å„ç§é‡åˆ°çš„ BUG åŠè§£å†³æ–¹æ¡ˆã€‚å³ä¾¿å¦‚æ­¤ï¼Œæˆ‘ä»¬å¥½åƒå¹¶æ²¡æœ‰å»ä¸»åŠ¨åœ°å…³æ³¨å’Œäº†è§£ä¸‹æµè§ˆå™¨çš„å·¥ä½œåŸç†ã€‚æˆ‘æƒ³å¦‚æœæˆ‘ä»¬å¯¹æ­¤åšä¸€ç‚¹äº†è§£ï¼Œåœ¨é¡¹ç›®è¿‡ç¨‹ä¸­å°±å¯ä»¥æœ‰æ•ˆåœ°é¿å…ä¸€äº›é—®é¢˜ï¼Œå¹¶å¯¹é¡µé¢æ€§èƒ½åšå‡ºç›¸åº”çš„æ”¹è¿›ã€‚</p></blockquote><p>â€œçŸ¥å·±çŸ¥å½¼ï¼Œç™¾æˆ˜ä¸æ®†â€ï¼Œä»Šå¤©ï¼Œæˆ‘ä»¬å°±ä¸€èµ·æ¥æ­å¼€æµè§ˆå™¨æ¸²æŸ“è¿‡ç¨‹çš„ç¥ç§˜é¢çº±ï¼</p><h3 id="æµè§ˆå™¨çš„-å¿ƒ" tabindex="-1"><a class="header-anchor" href="#æµè§ˆå™¨çš„-å¿ƒ"><span>æµè§ˆå™¨çš„â€œå¿ƒâ€</span></a></h3><ul><li>æµè§ˆå™¨çš„â€œå¿ƒâ€ï¼Œè¯´çš„å°±æ˜¯æµè§ˆå™¨çš„å†…æ ¸ã€‚åœ¨ç ”ç©¶æµè§ˆå™¨å¾®è§‚çš„è¿è¡Œæœºåˆ¶ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆè¦å¯¹æµè§ˆå™¨å†…æ ¸æœ‰ä¸€ä¸ªå®è§‚çš„æŠŠæ¡ã€‚</li><li>å¼€ç¯‡æåˆ°è®¸å¤šå·¥ç¨‹å¸ˆå› ä¸ºä¸šåŠ¡éœ€è¦ï¼Œå…ä¸äº†éœ€è¦å»å¤„ç†ä¸åŒæµè§ˆå™¨ä¸‹ä»£ç æ¸²æŸ“ç»“æœçš„å·®å¼‚æ€§ã€‚è¿™äº›å·®å¼‚æ€§æ­£æ˜¯å› ä¸ºæµè§ˆå™¨å†…æ ¸çš„ä¸åŒè€Œå¯¼è‡´çš„â€”â€”æµè§ˆå™¨å†…æ ¸å†³å®šäº†æµè§ˆå™¨è§£é‡Šç½‘é¡µè¯­æ³•çš„æ–¹å¼ã€‚<br> æµè§ˆå™¨å†…æ ¸å¯ä»¥åˆ†æˆä¸¤éƒ¨åˆ†ï¼šæ¸²æŸ“å¼•æ“ï¼ˆLayout Engine æˆ–è€… Rendering Engineï¼‰å’Œ JS å¼•æ“ã€‚æ—©æœŸæ¸²æŸ“å¼•æ“å’Œ JS å¼•æ“å¹¶æ²¡æœ‰ååˆ†æ˜ç¡®çš„åŒºåˆ†ï¼Œä½†éšç€ JS å¼•æ“è¶Šæ¥è¶Šç‹¬ç«‹ï¼Œå†…æ ¸ä¹Ÿæˆäº†æ¸²æŸ“å¼•æ“çš„ä»£ç§°ï¼ˆ<strong>ä¸‹æ–‡æˆ‘ä»¬å°†æ²¿ç”¨è¿™ç§å«æ³•</strong> ï¼‰ã€‚æ¸²æŸ“å¼•æ“åˆåŒ…æ‹¬äº† HTML è§£é‡Šå™¨ã€CSS è§£é‡Šå™¨ã€å¸ƒå±€ã€ç½‘ç»œã€å­˜å‚¨ã€å›¾å½¢ã€éŸ³è§†é¢‘ã€å›¾ç‰‡è§£ç å™¨ç­‰ç­‰é›¶éƒ¨ä»¶ã€‚</li></ul><p><img src="`+W+'" alt=""></p><p>ç›®å‰å¸‚é¢ä¸Šå¸¸è§çš„æµè§ˆå™¨å†…æ ¸å¯ä»¥åˆ†ä¸ºè¿™å››ç§ï¼šTridentï¼ˆIEï¼‰ã€Geckoï¼ˆç«ç‹ï¼‰ã€Blinkï¼ˆChromeã€Operaï¼‰ã€Webkitï¼ˆSafariï¼‰ã€‚</p><p>è¿™é‡Œé¢å¤§å®¶æœ€è€³ç†Ÿèƒ½è¯¦çš„å¯èƒ½å°±æ˜¯ Webkit å†…æ ¸äº†ã€‚å¾ˆå¤šåŒå­¦å¯èƒ½ä¼šå¬è¯´è¿‡ Chrome çš„å†…æ ¸å°±æ˜¯ Webkitï¼Œæ®Šä¸çŸ¥ Chrome å†…æ ¸æ—©å·²è¿­ä»£ä¸ºäº† Blinkã€‚ä½†æ˜¯æ¢æ±¤ä¸æ¢è¯ï¼ŒBlink å…¶å®ä¹Ÿæ˜¯åŸºäº Webkit è¡ç”Ÿè€Œæ¥çš„ä¸€ä¸ªåˆ†æ”¯ï¼Œå› æ­¤ï¼ŒWebkit å†…æ ¸ä»ç„¶æ˜¯å½“ä¸‹æµè§ˆå™¨ä¸–ç•ŒçœŸæ­£çš„éœ¸ä¸»ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬å°±ä»¥ Webkit ä¸ºä¾‹ï¼Œå¯¹ç°ä»£æµè§ˆå™¨çš„æ¸²æŸ“è¿‡ç¨‹è¿›è¡Œä¸€ä¸ªæ·±åº¦çš„å‰–æã€‚</p><h3 id="å¼€å¯æµè§ˆå™¨æ¸²æŸ“-é»‘ç›’" tabindex="-1"><a class="header-anchor" href="#å¼€å¯æµè§ˆå™¨æ¸²æŸ“-é»‘ç›’"><span>å¼€å¯æµè§ˆå™¨æ¸²æŸ“â€œé»‘ç›’â€</span></a></h3><p>ä»€ä¹ˆæ˜¯æ¸²æŸ“è¿‡ç¨‹ï¼Ÿç®€å•æ¥è¯´ï¼Œæ¸²æŸ“å¼•æ“æ ¹æ® HTML æ–‡ä»¶æè¿°æ„å»ºç›¸åº”çš„æ•°å­¦æ¨¡å‹ï¼Œè°ƒç”¨æµè§ˆå™¨å„ä¸ªé›¶éƒ¨ä»¶ï¼Œä»è€Œå°†ç½‘é¡µèµ„æºä»£ç è½¬æ¢ä¸ºå›¾åƒç»“æœï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯æ¸²æŸ“è¿‡ç¨‹ï¼ˆå¦‚ä¸‹å›¾ï¼‰ã€‚</p><p><img src="'+N+'" alt=""></p><blockquote><p>ä»è¿™ä¸ªæµç¨‹æ¥çœ‹ï¼Œæµè§ˆå™¨å‘ˆç°ç½‘é¡µè¿™ä¸ªè¿‡ç¨‹ï¼Œå®›å¦‚ä¸€ä¸ªé»‘ç›’ã€‚åœ¨è¿™ä¸ªç¥ç§˜çš„é»‘ç›’ä¸­ï¼Œæœ‰è®¸å¤šåŠŸèƒ½æ¨¡å—ï¼Œå†…æ ¸å†…éƒ¨çš„å®ç°æ­£æ˜¯è¿™äº›åŠŸèƒ½æ¨¡å—ç›¸äº’é…åˆååŒå·¥ä½œè¿›è¡Œçš„ã€‚å…¶ä¸­æˆ‘ä»¬æœ€éœ€è¦å…³æ³¨çš„ï¼Œå°±æ˜¯<strong>HTML è§£é‡Šå™¨</strong> ã€<strong>CSS è§£é‡Šå™¨</strong> ã€<strong>å›¾å±‚å¸ƒå±€è®¡ç®—æ¨¡å—</strong> ã€<strong>è§†å›¾ç»˜åˆ¶æ¨¡å—</strong> ä¸<strong>JavaScript å¼•æ“</strong> è¿™å‡ å¤§æ¨¡å—ï¼š</p></blockquote><ul><li><p>HTML è§£é‡Šå™¨ï¼šå°† HTML æ–‡æ¡£ç»è¿‡è¯æ³•åˆ†æè¾“å‡º DOM æ ‘ã€‚</p></li><li><p>CSS è§£é‡Šå™¨ï¼šè§£æ CSS æ–‡æ¡£, ç”Ÿæˆæ ·å¼è§„åˆ™ã€‚</p></li><li><p>å›¾å±‚å¸ƒå±€è®¡ç®—æ¨¡å—ï¼šå¸ƒå±€è®¡ç®—æ¯ä¸ªå¯¹è±¡çš„ç²¾ç¡®ä½ç½®å’Œå¤§å°ã€‚</p></li><li><p>è§†å›¾ç»˜åˆ¶æ¨¡å—ï¼šè¿›è¡Œå…·ä½“èŠ‚ç‚¹çš„å›¾åƒç»˜åˆ¶ï¼Œå°†åƒç´ æ¸²æŸ“åˆ°å±å¹•ä¸Šã€‚</p></li><li><p>JavaScript å¼•æ“ï¼šç¼–è¯‘æ‰§è¡Œ Javascript ä»£ç ã€‚</p></li></ul><h3 id="æµè§ˆå™¨æ¸²æŸ“è¿‡ç¨‹è§£æ" tabindex="-1"><a class="header-anchor" href="#æµè§ˆå™¨æ¸²æŸ“è¿‡ç¨‹è§£æ"><span>æµè§ˆå™¨æ¸²æŸ“è¿‡ç¨‹è§£æ</span></a></h3><blockquote><p>æœ‰äº†å¯¹é›¶éƒ¨ä»¶çš„äº†è§£æ‰“åº•ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä¸€èµ·æ¥èµ°ä¸€éæµè§ˆå™¨çš„æ¸²æŸ“æµç¨‹äº†ã€‚åœ¨æµè§ˆå™¨é‡Œï¼Œæ¯ä¸€ä¸ªé¡µé¢çš„é¦–æ¬¡æ¸²æŸ“éƒ½ç»å†äº†å¦‚ä¸‹é˜¶æ®µï¼ˆå›¾ä¸­ç®­å¤´ä¸ä»£è¡¨ä¸²è¡Œï¼Œæœ‰ä¸€äº›æ“ä½œæ˜¯å¹¶è¡Œè¿›è¡Œçš„ï¼Œä¸‹æ–‡ä¼šè¯´æ˜ï¼‰ï¼š</p></blockquote><p><img src="'+J+'" alt=""></p><ul><li><strong>è§£æ HTML</strong></li></ul><p>åœ¨è¿™ä¸€æ­¥æµè§ˆå™¨æ‰§è¡Œäº†æ‰€æœ‰çš„åŠ è½½è§£æé€»è¾‘ï¼Œåœ¨è§£æ HTML çš„è¿‡ç¨‹ä¸­å‘å‡ºäº†é¡µé¢æ¸²æŸ“æ‰€éœ€çš„å„ç§å¤–éƒ¨èµ„æºè¯·æ±‚ã€‚</p><ul><li><strong>è®¡ç®—æ ·å¼</strong></li></ul><p>æµè§ˆå™¨å°†è¯†åˆ«å¹¶åŠ è½½æ‰€æœ‰çš„ CSS æ ·å¼ä¿¡æ¯ä¸ DOM æ ‘åˆå¹¶ï¼Œæœ€ç»ˆç”Ÿæˆé¡µé¢ render æ ‘ï¼ˆ:after :before è¿™æ ·çš„ä¼ªå…ƒç´ ä¼šåœ¨è¿™ä¸ªç¯èŠ‚è¢«æ„å»ºåˆ° DOM æ ‘ä¸­ï¼‰ã€‚</p><ul><li><strong>è®¡ç®—å›¾å±‚å¸ƒå±€</strong></li></ul><p>é¡µé¢ä¸­æ‰€æœ‰å…ƒç´ çš„ç›¸å¯¹ä½ç½®ä¿¡æ¯ï¼Œå¤§å°ç­‰ä¿¡æ¯å‡åœ¨è¿™ä¸€æ­¥å¾—åˆ°è®¡ç®—ã€‚</p><ul><li><strong>ç»˜åˆ¶å›¾å±‚</strong></li></ul><p>åœ¨è¿™ä¸€æ­¥ä¸­æµè§ˆå™¨ä¼šæ ¹æ®æˆ‘ä»¬çš„ DOM ä»£ç ç»“æœï¼ŒæŠŠæ¯ä¸€ä¸ªé¡µé¢å›¾å±‚è½¬æ¢ä¸ºåƒç´ ï¼Œå¹¶å¯¹æ‰€æœ‰çš„åª’ä½“æ–‡ä»¶è¿›è¡Œè§£ç ã€‚</p><ul><li><strong>æ•´åˆå›¾å±‚ï¼Œå¾—åˆ°é¡µé¢</strong></li></ul><p>æœ€åä¸€æ­¥æµè§ˆå™¨ä¼šåˆå¹¶åˆå„ä¸ªå›¾å±‚ï¼Œå°†æ•°æ®ç”± CPU è¾“å‡ºç»™ GPU æœ€ç»ˆç»˜åˆ¶åœ¨å±å¹•ä¸Šã€‚ï¼ˆå¤æ‚çš„è§†å›¾å±‚ä¼šç»™è¿™ä¸ªé˜¶æ®µçš„ GPU è®¡ç®—å¸¦æ¥ä¸€äº›å‹åŠ›ï¼Œåœ¨å®é™…åº”ç”¨ä¸­ä¸ºäº†ä¼˜åŒ–åŠ¨ç”»æ€§èƒ½ï¼Œæˆ‘ä»¬æœ‰æ—¶ä¼šæ‰‹åŠ¨åŒºåˆ†ä¸åŒçš„å›¾å±‚ï¼‰ã€‚</p><h3 id="å‡ æ£µé‡è¦çš„-æ ‘" tabindex="-1"><a class="header-anchor" href="#å‡ æ£µé‡è¦çš„-æ ‘"><span>å‡ æ£µé‡è¦çš„â€œæ ‘â€</span></a></h3><p>ä¸Šé¢çš„å†…å®¹æ²¡æœ‰ç†è§£é€å½»ï¼Ÿåˆ«ç€æ€¥ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥æ‹ä¸€æ‹è¿™ä¸ªè¿‡ç¨‹ä¸­çš„é‡ç‚¹â€”â€”æ ‘ï¼</p><p>ä¸ºäº†ä½¿æ¸²æŸ“è¿‡ç¨‹æ›´æ˜æ™°ä¸€äº›ï¼Œæˆ‘ä»¬éœ€è¦ç»™è¿™äº›â€æ ‘â€œä»¬ä¸€ä¸ªç‰¹å†™:</p><p><img src="'+G+`" alt=""></p><ul><li><p>DOM æ ‘ï¼šè§£æ HTML ä»¥åˆ›å»ºçš„æ˜¯ DOM æ ‘ï¼ˆDOM tree ï¼‰ï¼šæ¸²æŸ“å¼•æ“å¼€å§‹è§£æ HTML æ–‡æ¡£ï¼Œè½¬æ¢æ ‘ä¸­çš„æ ‡ç­¾åˆ° DOM èŠ‚ç‚¹ï¼Œå®ƒè¢«ç§°ä¸ºâ€œå†…å®¹æ ‘â€ã€‚</p></li><li><p>CSSOM æ ‘ï¼šè§£æ CSSï¼ˆåŒ…æ‹¬å¤–éƒ¨ CSS æ–‡ä»¶å’Œæ ·å¼å…ƒç´ ï¼‰åˆ›å»ºçš„æ˜¯ CSSOM æ ‘ã€‚CSSOM çš„è§£æè¿‡ç¨‹ä¸ DOM çš„è§£æè¿‡ç¨‹æ˜¯<strong>å¹¶è¡Œçš„</strong> ã€‚</p></li><li><p>æ¸²æŸ“æ ‘ï¼šCSSOM ä¸ DOM ç»“åˆï¼Œä¹‹åæˆ‘ä»¬å¾—åˆ°çš„å°±æ˜¯æ¸²æŸ“æ ‘ï¼ˆRender tree ï¼‰ã€‚</p></li><li><p>å¸ƒå±€æ¸²æŸ“æ ‘ï¼šä»æ ¹èŠ‚ç‚¹é€’å½’è°ƒç”¨ï¼Œè®¡ç®—æ¯ä¸€ä¸ªå…ƒç´ çš„å¤§å°ã€ä½ç½®ç­‰ï¼Œç»™æ¯ä¸ªèŠ‚ç‚¹æ‰€åº”è¯¥å‡ºç°åœ¨å±å¹•ä¸Šçš„ç²¾ç¡®åæ ‡ï¼Œæˆ‘ä»¬ä¾¿å¾—åˆ°äº†åŸºäºæ¸²æŸ“æ ‘çš„å¸ƒå±€æ¸²æŸ“æ ‘ï¼ˆLayout of the render treeï¼‰ã€‚</p></li><li><p>ç»˜åˆ¶æ¸²æŸ“æ ‘: éå†æ¸²æŸ“æ ‘ï¼Œæ¯ä¸ªèŠ‚ç‚¹å°†ä½¿ç”¨ UI åç«¯å±‚æ¥ç»˜åˆ¶ã€‚æ•´ä¸ªè¿‡ç¨‹å«åšç»˜åˆ¶æ¸²æŸ“æ ‘ï¼ˆPainting the render treeï¼‰ã€‚</p></li></ul><p>åŸºäºè¿™äº›â€œæ ‘â€ï¼Œæˆ‘ä»¬å†æ¢³ç†ä¸€ç•ªï¼š</p><blockquote><p>æ¸²æŸ“è¿‡ç¨‹è¯´ç™½äº†ï¼Œé¦–å…ˆæ˜¯åŸºäº HTML æ„å»ºä¸€ä¸ª DOM æ ‘ï¼Œè¿™æ£µ DOM æ ‘ä¸ CSS è§£é‡Šå™¨è§£æå‡ºçš„ CSSOM ç›¸ç»“åˆï¼Œå°±æœ‰äº†å¸ƒå±€æ¸²æŸ“æ ‘ã€‚æœ€åæµè§ˆå™¨ä»¥å¸ƒå±€æ¸²æŸ“æ ‘ä¸ºè“æœ¬ï¼Œå»è®¡ç®—å¸ƒå±€å¹¶ç»˜åˆ¶å›¾åƒï¼Œæˆ‘ä»¬é¡µé¢çš„åˆæ¬¡æ¸²æŸ“å°±å¤§åŠŸå‘Šæˆäº†ã€‚</p></blockquote><ul><li>ä¹‹åæ¯å½“ä¸€ä¸ªæ–°å…ƒç´ åŠ å…¥åˆ°è¿™ä¸ª DOM æ ‘å½“ä¸­ï¼Œæµè§ˆå™¨ä¾¿ä¼šé€šè¿‡ CSS å¼•æ“æŸ¥é CSS æ ·å¼è¡¨ï¼Œæ‰¾åˆ°ç¬¦åˆè¯¥å…ƒç´ çš„æ ·å¼è§„åˆ™åº”ç”¨åˆ°è¿™ä¸ªå…ƒç´ ä¸Šï¼Œç„¶åå†é‡æ–°å»ç»˜åˆ¶å®ƒã€‚</li><li>æœ‰å¿ƒçš„åŒå­¦å¯èƒ½å·²ç»åœ¨æ€è€ƒäº†ï¼ŒæŸ¥è¡¨æ˜¯ä¸ªèŠ±æ—¶é—´çš„æ´»ï¼Œæˆ‘æ€ä¹ˆè®©æµè§ˆå™¨çš„æŸ¥è¯¢å·¥ä½œåˆå¿«åˆå¥½åœ°å®ç°å‘¢ï¼ŸOKï¼Œè®²äº†è¿™ä¹ˆå¤šåŸç†ï¼Œæˆ‘ä»¬ç»ˆäºå¼•å‡ºäº†æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªå¯è½¬åŒ–ä¸ºä»£ç çš„ä¼˜åŒ–ç‚¹â€”â€”CSS æ ·å¼è¡¨è§„åˆ™çš„ä¼˜åŒ–ï¼</li></ul><h2 id="ä¸åšæ— ç”¨åŠŸ-åŸºäºæ¸²æŸ“æµç¨‹çš„-css-ä¼˜åŒ–å»ºè®®" tabindex="-1"><a class="header-anchor" href="#ä¸åšæ— ç”¨åŠŸ-åŸºäºæ¸²æŸ“æµç¨‹çš„-css-ä¼˜åŒ–å»ºè®®"><span>ä¸åšæ— ç”¨åŠŸï¼šåŸºäºæ¸²æŸ“æµç¨‹çš„ CSS ä¼˜åŒ–å»ºè®®</span></a></h2><p>åœ¨ç»™å‡º CSS é€‰æ‹©å™¨æ–¹é¢çš„ä¼˜åŒ–å»ºè®®ä¹‹å‰ï¼Œå…ˆå‘Šè¯‰å¤§å®¶ä¸€ä¸ªå°çŸ¥è¯†ï¼šCSS å¼•æ“æŸ¥æ‰¾æ ·å¼è¡¨ï¼Œå¯¹æ¯æ¡è§„åˆ™éƒ½æŒ‰ä»å³åˆ°å·¦çš„é¡ºåºå»åŒ¹é…ã€‚ çœ‹å¦‚ä¸‹è§„åˆ™ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    #myList  li <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>è¿™æ ·çš„å†™æ³•å…¶å®å¾ˆå¸¸è§ã€‚å¤§å®¶å¹³æ—¶ä¹ æƒ¯äº†ä»å·¦åˆ°å³é˜…è¯»çš„æ–‡å­—é˜…è¯»æ–¹å¼ï¼Œä¼šæœ¬èƒ½åœ°ä»¥ä¸ºæµè§ˆå™¨ä¹Ÿæ˜¯ä»å·¦åˆ°å³åŒ¹é… CSS é€‰æ‹©å™¨çš„ï¼Œå› æ­¤ä¼šæ¨æµ‹è¿™ä¸ªé€‰æ‹©å™¨å¹¶ä¸ä¼šè´¹å¤šå°‘åŠ›æ°”ï¼š#myList æ˜¯ä¸€ä¸ª id é€‰æ‹©å™¨ï¼Œå®ƒå¯¹åº”çš„å…ƒç´ åªæœ‰ä¸€ä¸ªï¼ŒæŸ¥æ‰¾èµ·æ¥åº”è¯¥å¾ˆå¿«ã€‚å®šä½åˆ°äº† myList å…ƒç´ ï¼Œç­‰äºæ˜¯ç¼©å°äº†èŒƒå›´åå†å»æŸ¥æ‰¾å®ƒåä»£ä¸­çš„ li å…ƒç´ ï¼Œæ²¡æ¯›ç—…ã€‚</p></blockquote><p>äº‹å®ä¸Šï¼Œ<strong>CSS é€‰æ‹©ç¬¦æ˜¯ä»å³åˆ°å·¦è¿›è¡ŒåŒ¹é…çš„</strong> ã€‚æˆ‘ä»¬è¿™ä¸ªçœ‹ä¼¼â€œæ²¡æ¯›ç—…â€çš„é€‰æ‹©å™¨ï¼Œå®é™…å¼€é”€ç›¸å½“é«˜ï¼šæµè§ˆå™¨å¿…é¡»éå†é¡µé¢ä¸Šæ¯ä¸ª li å…ƒç´ ï¼Œå¹¶ä¸”æ¯æ¬¡éƒ½è¦å»ç¡®è®¤è¿™ä¸ª li å…ƒç´ çš„çˆ¶å…ƒç´  id æ˜¯ä¸æ˜¯ myListï¼Œä½ è¯´å‘ä¸å‘ï¼</p><p>è¯´åˆ°å‘ï¼Œä¸çŸ¥é“å¤§å®¶è¿˜è®°ä¸è®°å¾—è¿™ä¸ªç»å…¸çš„é€šé…ç¬¦ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token operator">*</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><p>å…¥é—¨ CSS çš„æ—¶å€™ï¼Œä¸å°‘åŒå­¦æ‹¿é€šé…ç¬¦æ¸…é™¤é»˜è®¤æ ·å¼ï¼ˆæˆ‘æ›¾ç»ä¹Ÿæ˜¯é€šé…ç¬¦ç”¨æˆ·çš„ä¸€å‘˜ï¼‰ã€‚ä½†è¿™ä¸ªå®¶ä¼™å¾ˆææ€–ï¼Œå®ƒä¼šåŒ¹é…æ‰€æœ‰å…ƒç´ ï¼Œæ‰€ä»¥æµè§ˆå™¨å¿…é¡»å»éå†æ¯ä¸€ä¸ªå…ƒç´ ï¼å¤§å®¶ä½å¤´çœ‹çœ‹è‡ªå·±é¡µé¢é‡Œçš„å…ƒç´ ä¸ªæ•°ï¼Œæ˜¯ä¸æ˜¯å¿ƒå‡‰äº†â€”â€”è¿™å¾—è®¡ç®—å¤šå°‘æ¬¡å‘€ï¼</p></li><li><p>è¿™æ ·ä¸€çœ‹ï¼Œä¸€ä¸ªå°å°çš„ CSS é€‰æ‹©å™¨ï¼Œä¹Ÿæœ‰ä¸å°‘çš„é—¨é“ï¼å¥½çš„ CSS é€‰æ‹©å™¨ä¹¦å†™ä¹ æƒ¯ï¼Œå¯ä»¥ä¸ºæˆ‘ä»¬å¸¦æ¥éå¸¸å¯è§‚çš„æ€§èƒ½æå‡ã€‚æ ¹æ®ä¸Šé¢çš„åˆ†æï¼Œæˆ‘ä»¬è‡³å°‘å¯ä»¥æ€»ç»“å‡ºå¦‚ä¸‹æ€§èƒ½æå‡çš„æ–¹æ¡ˆï¼š</p></li><li><p>é¿å…ä½¿ç”¨é€šé…ç¬¦ï¼Œåªå¯¹éœ€è¦ç”¨åˆ°çš„å…ƒç´ è¿›è¡Œé€‰æ‹©ã€‚</p></li><li><p>å…³æ³¨å¯ä»¥é€šè¿‡ç»§æ‰¿å®ç°çš„å±æ€§ï¼Œé¿å…é‡å¤åŒ¹é…é‡å¤å®šä¹‰ã€‚</p></li><li><p>å°‘ç”¨æ ‡ç­¾é€‰æ‹©å™¨ã€‚å¦‚æœå¯ä»¥ï¼Œç”¨ç±»é€‰æ‹©å™¨æ›¿ä»£ï¼Œä¸¾ä¸ªğŸŒ°ï¼š</p></li></ul><p>é”™è¯¯ç¤ºèŒƒï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    #myList li<span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è¯¾ä»£è¡¨ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token punctuation">.</span>myList_li <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>ä¸è¦ç”»è›‡æ·»è¶³ï¼Œid å’Œ class é€‰æ‹©å™¨ä¸åº”è¯¥è¢«å¤šä½™çš„æ ‡ç­¾é€‰æ‹©å™¨æ‹–åè…¿ã€‚ä¸¾ä¸ªğŸŒ°ï¼š</li></ul><p>é”™è¯¯ç¤ºèŒƒ</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token punctuation">.</span>myList#title</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è¯¾ä»£è¡¨</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    #title</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>å‡å°‘åµŒå¥—ã€‚åä»£é€‰æ‹©å™¨çš„å¼€é”€æ˜¯æœ€é«˜çš„ï¼Œå› æ­¤æˆ‘ä»¬åº”è¯¥å°½é‡å°†é€‰æ‹©å™¨çš„æ·±åº¦é™åˆ°æœ€ä½ï¼ˆæœ€é«˜ä¸è¦è¶…è¿‡ä¸‰å±‚ï¼‰ï¼Œå°½å¯èƒ½ä½¿ç”¨ç±»æ¥å…³è”æ¯ä¸€ä¸ªæ ‡ç­¾å…ƒç´ ã€‚</p></blockquote><p>æå®šäº† CSS é€‰æ‹©å™¨ï¼Œä¸‡é‡Œé•¿å¾æ‰åˆšåˆšå¼€å§‹çš„ç¬¬ä¸€æ­¥ã€‚ä½†ç°åœ¨ä½ å·²ç»ç†è§£äº†æµè§ˆå™¨çš„å·¥ä½œè¿‡ç¨‹ï¼Œæ¥ä¸‹æ¥çš„å¾ç¨‹å¯¹ä½ æ¥è¯´å¹¶ä¸å†æ˜¯ä»€ä¹ˆéš¾é¢˜~</p><h3 id="å‘Šåˆ«é˜»å¡-css-ä¸-js-çš„åŠ è½½é¡ºåºä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#å‘Šåˆ«é˜»å¡-css-ä¸-js-çš„åŠ è½½é¡ºåºä¼˜åŒ–"><span>å‘Šåˆ«é˜»å¡ï¼šCSS ä¸ JS çš„åŠ è½½é¡ºåºä¼˜åŒ–</span></a></h3><p>è¯´å®Œäº†è¿‡ç¨‹ï¼Œæˆ‘ä»¬æ¥è¯´ä¸€è¯´ç‰¹æ€§ã€‚</p><p>HTMLã€CSS å’Œ JSï¼Œéƒ½å…·æœ‰<strong>é˜»å¡æ¸²æŸ“</strong> çš„ç‰¹æ€§ã€‚</p><p>HTML é˜»å¡ï¼Œå¤©ç»åœ°ä¹‰â€”â€”æ²¡æœ‰ HTMLï¼Œä½•æ¥ DOMï¼Ÿæ²¡æœ‰ DOMï¼Œæ¸²æŸ“å’Œä¼˜åŒ–ï¼Œéƒ½æ˜¯ç©ºè°ˆã€‚</p><p>é‚£ä¹ˆ CSS å’Œ JS çš„é˜»å¡åˆæ˜¯æ€ä¹ˆå›äº‹å‘¢ï¼Ÿ</p><p><strong>1. CSS çš„é˜»å¡</strong></p><ul><li>åœ¨åˆšåˆšçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æåˆ° DOM å’Œ CSSOM åˆåŠ›æ‰èƒ½æ„å»ºæ¸²æŸ“æ ‘ã€‚è¿™ä¸€ç‚¹ä¼šç»™æ€§èƒ½é€ æˆä¸¥é‡å½±å“ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼ŒCSS æ˜¯é˜»å¡çš„èµ„æºã€‚æµè§ˆå™¨åœ¨æ„å»º CSSOM çš„è¿‡ç¨‹ä¸­ï¼Œ<strong>ä¸ä¼šæ¸²æŸ“ä»»ä½•å·²å¤„ç†çš„å†…å®¹</strong> ã€‚å³ä¾¿ DOM å·²ç»è§£æå®Œæ¯•äº†ï¼Œåªè¦ CSSOM ä¸ OKï¼Œé‚£ä¹ˆæ¸²æŸ“è¿™ä¸ªäº‹æƒ…å°±ä¸ OKï¼ˆè¿™ä¸»è¦æ˜¯ä¸ºäº†é¿å…æ²¡æœ‰ CSS çš„ HTML é¡µé¢ä¸‘é™‹åœ°â€œè£¸å¥”â€åœ¨ç”¨æˆ·çœ¼å‰ï¼‰ã€‚</li><li>æˆ‘ä»¬çŸ¥é“ï¼Œåªæœ‰å½“æˆ‘ä»¬å¼€å§‹è§£æ HTML åã€è§£æåˆ° link æ ‡ç­¾æˆ–è€… style æ ‡ç­¾æ—¶ï¼ŒCSS æ‰ç™»åœºï¼ŒCSSOM çš„æ„å»ºæ‰å¼€å§‹ã€‚å¾ˆå¤šæ—¶å€™ï¼ŒDOM ä¸å¾—ä¸ç­‰å¾… CSSOMã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥è¿™æ ·æ€»ç»“ï¼š</li></ul><blockquote><p>CSS æ˜¯é˜»å¡æ¸²æŸ“çš„èµ„æºã€‚éœ€è¦å°†å®ƒå°½æ—©ã€å°½å¿«åœ°ä¸‹è½½åˆ°å®¢æˆ·ç«¯ï¼Œä»¥ä¾¿ç¼©çŸ­é¦–æ¬¡æ¸²æŸ“çš„æ—¶é—´ã€‚</p></blockquote><p>äº‹å®ä¸Šï¼Œç°åœ¨å¾ˆå¤šå›¢é˜Ÿéƒ½å·²ç»åšåˆ°äº†å°½æ—©ï¼ˆå°† CSS æ”¾åœ¨ head æ ‡ç­¾é‡Œï¼‰å’Œå°½å¿«ï¼ˆå¯ç”¨ CDN å®ç°é™æ€èµ„æºåŠ è½½é€Ÿåº¦çš„ä¼˜åŒ–ï¼‰ã€‚è¿™ä¸ªâ€œæŠŠ CSS å¾€å‰æ”¾â€çš„åŠ¨ä½œï¼Œå¯¹å¾ˆå¤šåŒå­¦æ¥è¯´å·²ç»å†…åŒ–ä¸ºä¸€ç§ç¼–ç ä¹ æƒ¯ã€‚é‚£ä¹ˆç°åœ¨æˆ‘ä»¬è¿˜åº”è¯¥çŸ¥é“ï¼Œè¿™ä¸ªâ€œä¹ æƒ¯â€ä¸æ˜¯ç©ºç©´æ¥é£ï¼Œå®ƒæ˜¯ç”± CSS çš„ç‰¹æ€§å†³å®šçš„ã€‚</p><p><strong>2. JS çš„é˜»å¡</strong></p><ul><li><p>ä¸çŸ¥é“å¤§å®¶æ³¨æ„åˆ°æ²¡æœ‰ï¼Œå‰é¢æˆ‘ä»¬è¯´è¿‡ç¨‹çš„æ—¶å€™ï¼ŒèŠ±äº†å¾ˆå¤šç¬”å¢¨å»è¯´ HTMLã€è¯´ CSSã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒJS çš„å‡ºé•œç‡ä¹Ÿå¤ªä½äº†ç‚¹ã€‚<br> è¿™å½“ç„¶ä¸æ˜¯å› ä¸º JS ä¸é‡è¦ã€‚è€Œæ˜¯å› ä¸ºï¼Œåœ¨é¦–æ¬¡æ¸²æŸ“è¿‡ç¨‹ä¸­ï¼ŒJS å¹¶ä¸æ˜¯ä¸€ä¸ªéç™»åœºä¸å¯çš„è§’è‰²â€”â€”æ²¡æœ‰ JSï¼ŒCSSOM å’Œ DOM ç…§æ ·å¯ä»¥ç»„æˆæ¸²æŸ“æ ‘ï¼Œé¡µé¢ä¾ç„¶ä¼šå‘ˆç°â€”â€”å³ä½¿å®ƒæ­»æ°”æ²‰æ²‰ã€æ¯«æ— äº¤äº’ã€‚</p></li><li><p>JS çš„ä½œç”¨åœ¨äº<strong>ä¿®æ”¹</strong> ï¼Œå®ƒå¸®åŠ©æˆ‘ä»¬ä¿®æ”¹ç½‘é¡µçš„æ–¹æ–¹é¢é¢ï¼šå†…å®¹ã€æ ·å¼ä»¥åŠå®ƒå¦‚ä½•å“åº”ç”¨æˆ·äº¤äº’ã€‚è¿™â€œæ–¹æ–¹é¢é¢â€çš„ä¿®æ”¹ï¼Œæœ¬è´¨ä¸Šéƒ½æ˜¯å¯¹ DOM å’Œ CSSDOM è¿›è¡Œä¿®æ”¹ã€‚å› æ­¤ JS çš„æ‰§è¡Œä¼šé˜»æ­¢ CSSOMï¼Œåœ¨æˆ‘ä»¬ä¸ä½œæ˜¾å¼å£°æ˜çš„æƒ…å†µä¸‹ï¼Œå®ƒä¹Ÿä¼šé˜»å¡ DOMã€‚</p></li></ul><p>æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªğŸŒ°æ¥ç†è§£ä¸€ä¸‹è¿™ä¸ªæœºåˆ¶ï¼š</p><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html" data-title="html"><pre><code><span class="line">    <span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ie=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>JSé˜»å¡æµ‹è¯•<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css"></span>
<span class="line">        <span class="token selector">#container</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">background-color</span><span class="token punctuation">:</span> yellow<span class="token punctuation">;</span></span>
<span class="line">          <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span></span>
<span class="line">          <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>
<span class="line">        <span class="token comment">// å°è¯•è·å–containerå…ƒç´ </span></span>
<span class="line">        <span class="token keyword">var</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;container&quot;</span><span class="token punctuation">)</span></span>
<span class="line">        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;container&#39;</span><span class="token punctuation">,</span> container<span class="token punctuation">)</span></span>
<span class="line">      </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>
<span class="line">        <span class="token comment">// å°è¯•è·å–containerå…ƒç´ </span></span>
<span class="line">        <span class="token keyword">var</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;container&quot;</span><span class="token punctuation">)</span></span>
<span class="line">        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;container&#39;</span><span class="token punctuation">,</span> container<span class="token punctuation">)</span></span>
<span class="line">        <span class="token comment">// è¾“å‡ºcontainerå…ƒç´ æ­¤åˆ»çš„èƒŒæ™¯è‰²</span></span>
<span class="line">        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;container bgColor&#39;</span><span class="token punctuation">,</span> <span class="token function">getComputedStyle</span><span class="token punctuation">(</span>container<span class="token punctuation">)</span><span class="token punctuation">.</span>backgroundColor<span class="token punctuation">)</span></span>
<span class="line">      </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css"></span>
<span class="line">        <span class="token selector">#container</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">background-color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸‰ä¸ª console çš„ç»“æœåˆ†åˆ«ä¸ºï¼š</p><p><img src="`+A+`" alt=""></p><ul><li>æ³¨ï¼šæœ¬ä¾‹ä»…ä½¿ç”¨äº†å†…è” JS åšæµ‹è¯•ã€‚æ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥æŠŠè¿™éƒ¨åˆ† JS å½“åšå¤–éƒ¨æ–‡ä»¶å¼•å…¥çœ‹çœ‹æ•ˆæœâ€”â€”å®ƒä»¬çš„è¡¨ç°ä¸€è‡´ã€‚</li><li>ç¬¬ä¸€æ¬¡å°è¯•è·å– id ä¸º container çš„ DOM å¤±è´¥ï¼Œè¿™è¯´æ˜ JS æ‰§è¡Œæ—¶é˜»å¡äº† DOMï¼Œåç»­çš„ DOM æ— æ³•æ„å»ºï¼›ç¬¬äºŒæ¬¡æ‰æˆåŠŸï¼Œè¿™è¯´æ˜è„šæœ¬å—åªèƒ½æ‰¾åˆ°åœ¨å®ƒå‰é¢æ„å»ºå¥½çš„å…ƒç´ ã€‚è¿™ä¸¤è€…ç»“åˆèµ·æ¥ï¼Œâ€œé˜»å¡ DOMâ€å¾—åˆ°äº†éªŒè¯ã€‚å†çœ‹ç¬¬ä¸‰ä¸ª consoleï¼Œå°è¯•è·å– CSS æ ·å¼ï¼Œè·å–åˆ°çš„æ˜¯åœ¨ JS ä»£ç æ‰§è¡Œå‰çš„èƒŒæ™¯è‰²ï¼ˆyellowï¼‰ï¼Œè€Œéåç»­è®¾å®šçš„æ–°æ ·å¼ï¼ˆblueï¼‰ï¼Œè¯´æ˜ CSSOM ä¹Ÿè¢«é˜»å¡äº†ã€‚é‚£ä¹ˆåœ¨é˜»å¡çš„èƒŒåï¼Œåˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆå‘¢ï¼Ÿ</li><li>æˆ‘ä»¬å‰é¢è¯´è¿‡ï¼Œ<strong>JS å¼•æ“æ˜¯ç‹¬ç«‹äºæ¸²æŸ“å¼•æ“å­˜åœ¨çš„</strong> ã€‚æˆ‘ä»¬çš„ JS ä»£ç åœ¨æ–‡æ¡£çš„ä½•å¤„æ’å…¥ï¼Œå°±åœ¨ä½•å¤„æ‰§è¡Œã€‚å½“ HTML è§£æå™¨é‡åˆ°ä¸€ä¸ª script æ ‡ç­¾æ—¶ï¼Œå®ƒä¼šæš‚åœæ¸²æŸ“è¿‡ç¨‹ï¼Œå°†æ§åˆ¶æƒäº¤ç»™ JS å¼•æ“ã€‚JS å¼•æ“å¯¹å†…è”çš„ JS ä»£ç ä¼šç›´æ¥æ‰§è¡Œï¼Œå¯¹å¤–éƒ¨ JS æ–‡ä»¶è¿˜è¦å…ˆè·å–åˆ°è„šæœ¬ã€å†è¿›è¡Œæ‰§è¡Œã€‚ç­‰ JS å¼•æ“è¿è¡Œå®Œæ¯•ï¼Œæµè§ˆå™¨åˆä¼šæŠŠæ§åˆ¶æƒè¿˜ç»™æ¸²æŸ“å¼•æ“ï¼Œç»§ç»­ CSSOM å’Œ DOM çš„æ„å»ºã€‚ å› æ­¤ä¸å…¶è¯´æ˜¯ JS æŠŠ CSS å’Œ HTML é˜»å¡äº†ï¼Œä¸å¦‚è¯´æ˜¯ JS å¼•æ“æŠ¢èµ°äº†æ¸²æŸ“å¼•æ“çš„æ§åˆ¶æƒã€‚</li><li>ç°åœ¨ç†è§£äº†é˜»å¡çš„è¡¨ç°ä¸åŸç†ï¼Œæˆ‘ä»¬å¼€å§‹æ€è€ƒä¸€ä¸ªé—®é¢˜ã€‚æµè§ˆå™¨ä¹‹æ‰€ä»¥è®© JS é˜»å¡å…¶å®ƒçš„æ´»åŠ¨ï¼Œæ˜¯å› ä¸ºå®ƒä¸çŸ¥é“ JS ä¼šåšä»€ä¹ˆæ”¹å˜ï¼Œæ‹…å¿ƒå¦‚æœä¸é˜»æ­¢åç»­çš„æ“ä½œï¼Œä¼šé€ æˆæ··ä¹±ã€‚ä½†æ˜¯æˆ‘ä»¬æ˜¯å†™ JS çš„äººï¼Œæˆ‘ä»¬çŸ¥é“ JS ä¼šåšä»€ä¹ˆæ”¹å˜ã€‚å‡å¦‚æˆ‘ä»¬å¯ä»¥ç¡®è®¤ä¸€ä¸ª JS æ–‡ä»¶çš„æ‰§è¡Œæ—¶æœºå¹¶ä¸ä¸€å®šéè¦æ˜¯æ­¤æ—¶æ­¤åˆ»ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡å¯¹å®ƒä½¿ç”¨ defer å’Œ async æ¥é¿å…ä¸å¿…è¦çš„é˜»å¡ï¼Œè¿™é‡Œæˆ‘ä»¬å°±å¼•å‡ºäº†å¤–éƒ¨ JS çš„ä¸‰ç§åŠ è½½æ–¹å¼ã€‚</li></ul><p><strong>3. JSçš„ä¸‰ç§åŠ è½½æ–¹å¼</strong></p><ul><li>æ­£å¸¸æ¨¡å¼ï¼š</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;index.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>è¿™ç§æƒ…å†µä¸‹ JS ä¼šé˜»å¡æµè§ˆå™¨ï¼Œæµè§ˆå™¨å¿…é¡»ç­‰å¾… <code>index.js</code> åŠ è½½å’Œæ‰§è¡Œå®Œæ¯•æ‰èƒ½å»åšå…¶å®ƒäº‹æƒ…ã€‚</p></blockquote><ul><li>async æ¨¡å¼ï¼š</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token operator">&lt;</span>script <span class="token keyword">async</span> src<span class="token operator">=</span><span class="token string">&quot;index.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p><code>async</code> æ¨¡å¼ä¸‹ï¼ŒJS ä¸ä¼šé˜»å¡æµè§ˆå™¨åšä»»ä½•å…¶å®ƒçš„äº‹æƒ…ã€‚å®ƒçš„åŠ è½½æ˜¯å¼‚æ­¥çš„ï¼Œå½“å®ƒåŠ è½½ç»“æŸï¼ŒJS è„šæœ¬ä¼š<strong>ç«‹å³æ‰§è¡Œ</strong> ã€‚</p></blockquote><ul><li>defer æ¨¡å¼ï¼š</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token operator">&lt;</span>script defer src<span class="token operator">=</span><span class="token string">&quot;index.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p><code>defer</code> æ¨¡å¼ä¸‹ï¼ŒJS çš„åŠ è½½æ˜¯å¼‚æ­¥çš„ï¼Œæ‰§è¡Œæ˜¯<strong>è¢«æ¨è¿Ÿçš„</strong> ã€‚ç­‰æ•´ä¸ªæ–‡æ¡£è§£æå®Œæˆã€<code>DOMContentLoaded</code> äº‹ä»¶å³å°†è¢«è§¦å‘æ—¶ï¼Œè¢«æ ‡è®°äº† <code>defer</code> çš„ JS æ–‡ä»¶æ‰ä¼šå¼€å§‹ä¾æ¬¡æ‰§è¡Œã€‚</p></blockquote><ul><li>ä»åº”ç”¨çš„è§’åº¦æ¥è¯´ï¼Œä¸€èˆ¬å½“æˆ‘ä»¬çš„è„šæœ¬ä¸ DOM å…ƒç´ å’Œå…¶å®ƒè„šæœ¬ä¹‹é—´çš„ä¾èµ–å…³ç³»ä¸å¼ºæ—¶ï¼Œæˆ‘ä»¬ä¼šé€‰ç”¨ <code>async</code>ï¼›å½“è„šæœ¬ä¾èµ–äº DOM å…ƒç´ å’Œå…¶å®ƒè„šæœ¬çš„æ‰§è¡Œç»“æœæ—¶ï¼Œæˆ‘ä»¬ä¼šé€‰ç”¨ <code>defer</code>ã€‚</li><li>é€šè¿‡å®¡æ—¶åº¦åŠ¿åœ°å‘ <code>script</code> æ ‡ç­¾æ·»åŠ  <code>async/defer</code>ï¼Œæˆ‘ä»¬å°±å¯ä»¥å‘Šè¯‰æµè§ˆå™¨åœ¨ç­‰å¾…è„šæœ¬å¯ç”¨æœŸé—´ä¸é˜»æ­¢å…¶å®ƒçš„å·¥ä½œï¼Œè¿™æ ·å¯ä»¥æ˜¾è‘—æå‡æ€§èƒ½ã€‚</li></ul><h3 id="å°ç»“-3" tabindex="-1"><a class="header-anchor" href="#å°ç»“-3"><span>å°ç»“</span></a></h3><ul><li>æˆ‘ä»¬çŸ¥é“ï¼Œå½“ <code>JS</code> ç™»åœºæ—¶ï¼Œå¾€å¾€æ„å‘³ç€å¯¹ <code>DOM</code> çš„æ“ä½œã€‚DOM æ“ä½œæ‰€å¯¼è‡´çš„æ€§èƒ½å¼€é”€çš„â€œæ˜‚è´µâ€ï¼Œå¤§å®¶å¯èƒ½æ—©å°±æœ‰æ‰€è€³é—»ï¼Œé›…è™å†›è§„é‡Œå¾ˆé‡è¦çš„ä¸€æ¡å°±æ˜¯â€œå°½é‡å‡å°‘ DOM è®¿é—®â€ã€‚</li><li>é‚£ä¹ˆ DOM åˆ°åº•ä¸ºä»€ä¹ˆæ…¢ï¼Œæˆ‘ä»¬å¦‚ä½•å»è§„é¿è¿™ç§æ…¢å‘¢ï¼Ÿè¿™é‡Œæˆ‘ä»¬å°±å¼•å‡ºäº†ä¸‹ä¸€ä¸ªç« èŠ‚éœ€è¦é‡ç‚¹è§£é‡Šçš„ä¸¤ä¸ªæ¦‚å¿µï¼šCSS ä¸­çš„å›æµï¼ˆReflowï¼‰ä¸é‡ç»˜ï¼ˆRepaintï¼‰ã€‚</li></ul><h2 id="ä¹ã€æ¸²æŸ“ç¯‡-3-å¯¹ç—‡ä¸‹è¯â€”â€”dom-ä¼˜åŒ–åŸç†ä¸åŸºæœ¬å®è·µ" tabindex="-1"><a class="header-anchor" href="#ä¹ã€æ¸²æŸ“ç¯‡-3-å¯¹ç—‡ä¸‹è¯â€”â€”dom-ä¼˜åŒ–åŸç†ä¸åŸºæœ¬å®è·µ"><span>ä¹ã€æ¸²æŸ“ç¯‡ 3ï¼šå¯¹ç—‡ä¸‹è¯â€”â€”DOM ä¼˜åŒ–åŸç†ä¸åŸºæœ¬å®è·µ</span></a></h2><p>ä»æœ¬èŠ‚å¼€å§‹ï¼Œæˆ‘ä»¬è¦å…³å¿ƒçš„ä¸¤å¤§æ ¸å¿ƒé—®é¢˜å°±æ˜¯ï¼šâ€œDOM ä¸ºä»€ä¹ˆè¿™ä¹ˆæ…¢â€ä»¥åŠâ€œå¦‚ä½•ä½¿ DOM å˜å¿«â€ã€‚</p><p>åè€…æ˜¯ä¸€ä¸ªæ¯”â€œç”Ÿå­˜è¿˜æ˜¯æ¯ç­â€æ›´åŠ ç»å…¸çš„é—®é¢˜ã€‚ä¸ä»…æˆ‘ä»¬ä¸ºå®ƒâ€œè‚è‚ å¯¸æ–­â€ï¼Œè®¸å¤šä¼˜ç§€å‰ç«¯æ¡†æ¶çš„ä½œè€…å¤§å¤§ä»¬ä¹Ÿæ›¾ä¸ºå…¶ç»å°½è„‘æ±ã€‚è¿™ä¸€ç‚¹å¯å–œå¯è´ºâ€”â€”ç ”ç©¶çš„äººè¶Šå¤šï¼Œäº§å‡ºä¼˜ç§€å®è·µçš„æ¦‚ç‡å°±è¶Šå¤§ã€‚å› æ­¤åœ¨æœ¬ç« çš„æ–¹æ³•è®ºç¯èŠ‚ï¼Œæˆ‘ä»¬ä¸ä»…ä¼šæ ¹æ® DOM ç‰¹æ€§åŠæ¸²æŸ“åŸç†ä¸ºå¤§å®¶è®²è§£åŸºæœ¬çš„ä¼˜åŒ–æ€è·¯ï¼Œè¿˜ä¼šæ¶‰åŠåˆ°ä¸€éƒ¨åˆ†ç”Ÿäº§å®è·µã€‚</p><p>å¾ªç€è¿™ä¸ªæ€è·¯ï¼Œæˆ‘ä»¬æŠŠ DOM ä¼˜åŒ–è¿™å—åˆ’åˆ†ä¸ºä¸‰ä¸ªå°ä¸“é¢˜ï¼šâ€œDOM ä¼˜åŒ–æ€è·¯â€ã€â€œå¼‚æ­¥æ›´æ–°ç­–ç•¥â€åŠâ€œå›æµä¸é‡ç»˜â€ã€‚æœ¬èŠ‚å¯¹åº”ç¬¬ä¸€ä¸ªå°ä¸“é¢˜ã€‚ä¸‰ä¸ªå°ä¸“é¢˜ä¼‘æˆšä¸å…±ã€ä½ ä¾¬æˆ‘ä¾¬ï¼Œåœ¨æ€è·¯ä¸Šç›¸äº’ä¾èµ–ã€ä¸€è„‰ç›¸æ‰¿ï¼Œå› æ­¤æ­¤å¤„<strong>ä¸¥æ ¼ç¦æ­¢ä»»ä½•å§¿åŠ¿çš„è·³è¯»è¡Œä¸º</strong> ã€‚</p><p>è€ƒè™‘åˆ°æœ¬èŠ‚å†…å®¹ä¸ä¸Šä¸€èŠ‚æœ‰ç€å¯†ä¸å¯åˆ†çš„å…³ç³»ï¼Œå› æ­¤<strong>å¼ºçƒˆä¸å»ºè®®æ²¡æœ‰è¯»å®Œä¸Šä¸€èŠ‚çš„åŒå­¦ç›´æ¥è·³è¯»æœ¬èŠ‚</strong> ã€‚</p><h3 id="æœ›é—»é—®åˆ‡-dom-ä¸ºä»€ä¹ˆè¿™ä¹ˆæ…¢" tabindex="-1"><a class="header-anchor" href="#æœ›é—»é—®åˆ‡-dom-ä¸ºä»€ä¹ˆè¿™ä¹ˆæ…¢"><span>æœ›é—»é—®åˆ‡ï¼šDOM ä¸ºä»€ä¹ˆè¿™ä¹ˆæ…¢</span></a></h3><p><strong>1. å› ä¸ºæ”¶äº†â€œè¿‡è·¯è´¹â€</strong></p><blockquote><p>æŠŠ DOM å’Œ JavaScript å„è‡ªæƒ³è±¡æˆä¸€ä¸ªå²›å±¿ï¼Œå®ƒä»¬ä¹‹é—´ç”¨æ”¶è´¹æ¡¥æ¢è¿æ¥ã€‚â€”â€”ã€Šé«˜æ€§èƒ½ JavaScriptã€‹</p></blockquote><p>JS æ˜¯å¾ˆå¿«çš„ï¼Œåœ¨ JS ä¸­ä¿®æ”¹ DOM å¯¹è±¡ä¹Ÿæ˜¯å¾ˆå¿«çš„ã€‚åœ¨JSçš„ä¸–ç•Œé‡Œï¼Œä¸€åˆ‡æ˜¯ç®€å•çš„ã€è¿…é€Ÿçš„ã€‚ä½† DOM æ“ä½œå¹¶é JS ä¸€ä¸ªäººçš„ç‹¬èˆï¼Œè€Œæ˜¯ä¸¤ä¸ªæ¨¡å—ä¹‹é—´çš„åä½œã€‚</p><p>ä¸Šä¸€èŠ‚æˆ‘ä»¬æåˆ°ï¼ŒJS å¼•æ“å’Œæ¸²æŸ“å¼•æ“ï¼ˆæµè§ˆå™¨å†…æ ¸ï¼‰æ˜¯ç‹¬ç«‹å®ç°çš„ã€‚å½“æˆ‘ä»¬ç”¨ JS å»æ“ä½œ DOM æ—¶ï¼Œæœ¬è´¨ä¸Šæ˜¯ JS å¼•æ“å’Œæ¸²æŸ“å¼•æ“ä¹‹é—´è¿›è¡Œäº†â€œè·¨ç•Œäº¤æµâ€ã€‚è¿™ä¸ªâ€œè·¨ç•Œäº¤æµâ€çš„å®ç°å¹¶ä¸ç®€å•ï¼Œå®ƒä¾èµ–äº†æ¡¥æ¥æ¥å£ä½œä¸ºâ€œæ¡¥æ¢â€ï¼ˆå¦‚ä¸‹å›¾ï¼‰ã€‚</p><p><img src="`+z+'" alt=""></p><p>è¿‡â€œæ¡¥â€è¦æ”¶è´¹â€”â€”è¿™ä¸ªå¼€é”€æœ¬èº«å°±æ˜¯ä¸å¯å¿½ç•¥çš„ã€‚æˆ‘ä»¬æ¯æ“ä½œä¸€æ¬¡ DOMï¼ˆä¸ç®¡æ˜¯ä¸ºäº†ä¿®æ”¹è¿˜æ˜¯ä»…ä»…ä¸ºäº†è®¿é—®å…¶å€¼ï¼‰ï¼Œéƒ½è¦è¿‡ä¸€æ¬¡â€œæ¡¥â€ã€‚è¿‡â€œæ¡¥â€çš„æ¬¡æ•°ä¸€å¤šï¼Œå°±ä¼šäº§ç”Ÿæ¯”è¾ƒæ˜æ˜¾çš„æ€§èƒ½é—®é¢˜ã€‚å› æ­¤â€œå‡å°‘ DOM æ“ä½œâ€çš„å»ºè®®ï¼Œå¹¶éç©ºç©´æ¥é£ã€‚</p><p><strong>2. å¯¹ DOM çš„ä¿®æ”¹å¼•å‘æ ·å¼çš„æ›´è¿­</strong></p><ul><li>è¿‡æ¡¥å¾ˆæ…¢ï¼Œåˆ°äº†æ¡¥å¯¹å²¸ï¼Œæˆ‘ä»¬çš„æ›´æ”¹æ“ä½œå¸¦æ¥çš„ç»“æœä¹Ÿå¾ˆæ…¢ã€‚</li><li>å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬å¯¹ DOM çš„æ“ä½œéƒ½ä¸ä¼šå±€é™äºè®¿é—®ï¼Œè€Œæ˜¯ä¸ºäº†ä¿®æ”¹å®ƒã€‚å½“æˆ‘ä»¬å¯¹ DOM çš„ä¿®æ”¹ä¼šå¼•å‘å®ƒå¤–è§‚ï¼ˆæ ·å¼ï¼‰ä¸Šçš„æ”¹å˜æ—¶ï¼Œå°±ä¼šè§¦å‘<strong>å›æµ</strong> æˆ–<strong>é‡ç»˜</strong> ã€‚</li><li>è¿™ä¸ªè¿‡ç¨‹æœ¬è´¨ä¸Šè¿˜æ˜¯å› ä¸ºæˆ‘ä»¬å¯¹ DOM çš„ä¿®æ”¹è§¦å‘äº†æ¸²æŸ“æ ‘ï¼ˆRender Treeï¼‰çš„å˜åŒ–æ‰€å¯¼è‡´çš„ï¼š</li></ul><p><img src="'+I+`" alt=""></p><ul><li><p>å›æµï¼šå½“æˆ‘ä»¬å¯¹ DOM çš„ä¿®æ”¹å¼•å‘äº† DOM å‡ ä½•å°ºå¯¸çš„å˜åŒ–ï¼ˆæ¯”å¦‚ä¿®æ”¹å…ƒç´ çš„å®½ã€é«˜æˆ–éšè—å…ƒç´ ç­‰ï¼‰æ—¶ï¼Œæµè§ˆå™¨éœ€è¦é‡æ–°è®¡ç®—å…ƒç´ çš„å‡ ä½•å±æ€§ï¼ˆå…¶ä»–å…ƒç´ çš„å‡ ä½•å±æ€§å’Œä½ç½®ä¹Ÿä¼šå› æ­¤å—åˆ°å½±å“ï¼‰ï¼Œç„¶åå†å°†è®¡ç®—çš„ç»“æœç»˜åˆ¶å‡ºæ¥ã€‚è¿™ä¸ªè¿‡ç¨‹å°±æ˜¯å›æµï¼ˆä¹Ÿå«é‡æ’ï¼‰ã€‚</p></li><li><p>é‡ç»˜ï¼šå½“æˆ‘ä»¬å¯¹ DOM çš„ä¿®æ”¹å¯¼è‡´äº†æ ·å¼çš„å˜åŒ–ã€å´å¹¶æœªå½±å“å…¶å‡ ä½•å±æ€§ï¼ˆæ¯”å¦‚ä¿®æ”¹äº†é¢œè‰²æˆ–èƒŒæ™¯è‰²ï¼‰æ—¶ï¼Œæµè§ˆå™¨ä¸éœ€é‡æ–°è®¡ç®—å…ƒç´ çš„å‡ ä½•å±æ€§ã€ç›´æ¥ä¸ºè¯¥å…ƒç´ ç»˜åˆ¶æ–°çš„æ ·å¼ï¼ˆè·³è¿‡äº†ä¸Šå›¾æ‰€ç¤ºçš„å›æµç¯èŠ‚ï¼‰ã€‚è¿™ä¸ªè¿‡ç¨‹å«åšé‡ç»˜ã€‚</p></li></ul><blockquote><p>ç”±æ­¤æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œ<strong>é‡ç»˜ä¸ä¸€å®šå¯¼è‡´å›æµï¼Œå›æµä¸€å®šä¼šå¯¼è‡´é‡ç»˜</strong> ã€‚ç¡¬è¦æ¯”è¾ƒçš„è¯ï¼Œå›æµæ¯”é‡ç»˜åšçš„äº‹æƒ…æ›´å¤šï¼Œå¸¦æ¥çš„å¼€é”€ä¹Ÿæ›´å¤§ã€‚ä½†è¿™ä¸¤ä¸ªè¯´åˆ°åº•éƒ½æ˜¯åƒæ€§èƒ½çš„ï¼Œæ‰€ä»¥éƒ½ä¸æ˜¯ä»€ä¹ˆå–„èŒ¬ã€‚æˆ‘ä»¬åœ¨å¼€å‘ä¸­ï¼Œè¦ä»ä»£ç å±‚é¢å‡ºå‘ï¼Œå°½å¯èƒ½æŠŠå›æµå’Œé‡ç»˜çš„æ¬¡æ•°æœ€å°åŒ–ã€‚</p></blockquote><h2 id="è¯åˆ°ç—…é™¤-ç»™ä½ çš„-dom-ææé€Ÿ" tabindex="-1"><a class="header-anchor" href="#è¯åˆ°ç—…é™¤-ç»™ä½ çš„-dom-ææé€Ÿ"><span>è¯åˆ°ç—…é™¤ï¼šç»™ä½ çš„ DOM â€œææé€Ÿâ€</span></a></h2><p>çŸ¥é“äº† DOM æ…¢çš„åŸå› ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¯¹ç—‡ä¸‹è¯äº†ã€‚</p><p><strong>1. å‡å°‘ DOM æ“ä½œï¼šå°‘äº¤â€œè¿‡è·¯è´¹â€ã€é¿å…è¿‡åº¦æ¸²æŸ“</strong></p><p>æˆ‘ä»¬æ¥çœ‹è¿™æ ·ä¸€ä¸ªğŸŒ°ï¼ŒHTML å†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html" data-title="html"><pre><code><span class="line">    <span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ie=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>DOMæ“ä½œæµ‹è¯•<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>æ­¤æ—¶æˆ‘æœ‰ä¸€ä¸ªå‡éœ€æ±‚â€”â€”æˆ‘æƒ³å¾€ <code>container</code> å…ƒç´ é‡Œå†™ <code>10000</code> å¥ä¸€æ ·çš„è¯ã€‚å¦‚æœæˆ‘è¿™ä¹ˆåšï¼š</p></blockquote><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> count<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>count<span class="token operator">&lt;</span><span class="token number">10000</span><span class="token punctuation">;</span>count<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span> </span>
<span class="line">      document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;container&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML<span class="token operator">+=</span><span class="token string">&#39;&lt;span&gt;æˆ‘æ˜¯ä¸€ä¸ªå°æµ‹è¯•&lt;/span&gt;&#39;</span></span>
<span class="line">    <span class="token punctuation">}</span> </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ®µä»£ç æœ‰ä¸¤ä¸ªæ˜æ˜¾çš„å¯ä¼˜åŒ–ç‚¹ã€‚</p><blockquote><p>ç¬¬ä¸€ç‚¹ï¼Œ<strong>è¿‡è·¯è´¹äº¤å¤ªå¤šäº†</strong> ã€‚æˆ‘ä»¬æ¯ä¸€æ¬¡å¾ªç¯éƒ½è°ƒç”¨ DOM æ¥å£é‡æ–°è·å–äº†ä¸€æ¬¡ container å…ƒç´ ï¼Œç›¸å½“äºæ¯æ¬¡å¾ªç¯éƒ½äº¤äº†ä¸€æ¬¡è¿‡è·¯è´¹ã€‚å‰åäº¤äº† 10000 æ¬¡è¿‡è·¯è´¹ï¼Œä½†å…¶ä¸­ 9999 æ¬¡è¿‡è·¯è´¹éƒ½å¯ä»¥ç”¨<strong>ç¼“å­˜å˜é‡</strong> çš„æ–¹å¼èŠ‚çœä¸‹æ¥ï¼š</p></blockquote><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token comment">// åªè·å–ä¸€æ¬¡container</span></span>
<span class="line">    <span class="token keyword">let</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;container&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> count<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>count<span class="token operator">&lt;</span><span class="token number">10000</span><span class="token punctuation">;</span>count<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span> </span>
<span class="line">      container<span class="token punctuation">.</span>innerHTML <span class="token operator">+=</span> <span class="token string">&#39;&lt;span&gt;æˆ‘æ˜¯ä¸€ä¸ªå°æµ‹è¯•&lt;/span&gt;&#39;</span></span>
<span class="line">    <span class="token punctuation">}</span> </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>ç¬¬äºŒç‚¹ï¼Œ<strong>ä¸å¿…è¦çš„ DOM æ›´æ”¹å¤ªå¤šäº†</strong> ã€‚æˆ‘ä»¬çš„ 10000 æ¬¡å¾ªç¯é‡Œï¼Œä¿®æ”¹äº† 10000 æ¬¡ DOM æ ‘ã€‚æˆ‘ä»¬å‰é¢è¯´è¿‡ï¼Œå¯¹ DOM çš„ä¿®æ”¹ä¼šå¼•å‘æ¸²æŸ“æ ‘çš„æ”¹å˜ã€è¿›è€Œå»èµ°ä¸€ä¸ªï¼ˆå¯èƒ½çš„ï¼‰å›æµæˆ–é‡ç»˜çš„è¿‡ç¨‹ï¼Œè€Œè¿™ä¸ªè¿‡ç¨‹çš„å¼€é”€æ˜¯å¾ˆâ€œè´µâ€çš„ã€‚è¿™ä¹ˆè´µçš„æ“ä½œï¼Œæˆ‘ä»¬ç«Ÿç„¶é‡å¤æ‰§è¡Œäº† N å¤šæ¬¡ï¼å…¶å®æˆ‘ä»¬å¯ä»¥é€šè¿‡<strong>å°±äº‹è®ºäº‹</strong> çš„æ–¹å¼èŠ‚çœä¸‹æ¥ä¸å¿…è¦çš„æ¸²æŸ“ï¼š</p></blockquote><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token keyword">let</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;container&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">let</span> content <span class="token operator">=</span> <span class="token string">&#39;&#39;</span></span>
<span class="line">    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> count<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>count<span class="token operator">&lt;</span><span class="token number">10000</span><span class="token punctuation">;</span>count<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span> </span>
<span class="line">      <span class="token comment">// å…ˆå¯¹å†…å®¹è¿›è¡Œæ“ä½œ</span></span>
<span class="line">      content <span class="token operator">+=</span> <span class="token string">&#39;&lt;span&gt;æˆ‘æ˜¯ä¸€ä¸ªå°æµ‹è¯•&lt;/span&gt;&#39;</span></span>
<span class="line">    <span class="token punctuation">}</span> </span>
<span class="line">    <span class="token comment">// å†…å®¹å¤„ç†å¥½äº†,æœ€åå†è§¦å‘DOMçš„æ›´æ”¹</span></span>
<span class="line">    container<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> content</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰€è°“â€œå°±äº‹è®ºäº‹â€ï¼Œå°±åƒå¤§å®¶æ‰€çœ‹åˆ°çš„ï¼šJS å±‚é¢çš„äº‹æƒ…ï¼ŒJS è‡ªå·±å»å¤„ç†ï¼Œå¤„ç†å¥½äº†ï¼Œå†æ¥æ‰¾ DOM æ‰“æŠ¥å‘Šã€‚</p><p>äº‹å®ä¸Šï¼Œè€ƒè™‘JS çš„è¿è¡Œé€Ÿåº¦ï¼Œæ¯” DOM å¿«å¾—å¤šè¿™ä¸ªç‰¹æ€§ã€‚æˆ‘ä»¬å‡å°‘ DOM æ“ä½œçš„æ ¸å¿ƒæ€è·¯ï¼Œå°±æ˜¯<strong>è®© JS å»ç»™ DOM åˆ†å‹</strong> ã€‚</p><p>è¿™ä¸ªæ€è·¯ï¼Œåœ¨ [DOM Fragment (opens new window)](https://developer.mozilla.org/zh- CN/docs/Web/API/DocumentFragment) ä¸­ä½“ç°å¾—æ·‹æ¼“å°½è‡´ã€‚</p><blockquote><p><code>DocumentFragment</code> æ¥å£è¡¨ç¤ºä¸€ä¸ªæ²¡æœ‰çˆ¶çº§æ–‡ä»¶çš„æœ€å°æ–‡æ¡£å¯¹è±¡ã€‚å®ƒè¢«å½“åšä¸€ä¸ªè½»é‡ç‰ˆçš„ <code>Document</code> ä½¿ç”¨ï¼Œç”¨äºå­˜å‚¨å·²æ’å¥½ç‰ˆçš„æˆ–å°šæœªæ‰“ç†å¥½æ ¼å¼çš„XMLç‰‡æ®µã€‚å› ä¸º <code>DocumentFragment</code> ä¸æ˜¯çœŸå® DOM æ ‘çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒçš„å˜åŒ–ä¸ä¼šå¼•èµ· DOM æ ‘çš„é‡æ–°æ¸²æŸ“çš„æ“ä½œï¼ˆ<code>reflow</code>ï¼‰ï¼Œä¸”ä¸ä¼šå¯¼è‡´æ€§èƒ½ç­‰é—®é¢˜ã€‚</p></blockquote><ul><li>åœ¨æˆ‘ä»¬ä¸Šé¢çš„ä¾‹å­é‡Œï¼Œå­—ç¬¦ä¸²å˜é‡ <code>content</code> å°±æ‰®æ¼”ç€ä¸€ä¸ª <code>DOM Fragment</code> çš„è§’è‰²ã€‚å…¶å®æ— è®ºå­—ç¬¦ä¸²å˜é‡ä¹Ÿå¥½ï¼Œ<code>DOM Fragment</code> ä¹Ÿç½¢ï¼Œå®ƒä»¬æœ¬è´¨ä¸Šéƒ½ä½œä¸ºè„±ç¦»äº†çœŸå® DOM æ ‘çš„<strong>å®¹å™¨</strong> å‡ºç°ï¼Œç”¨äºç¼“å­˜æ‰¹é‡åŒ–çš„ DOM æ“ä½œã€‚</li><li>å‰é¢æˆ‘ä»¬ç›´æ¥ç”¨ <code>innerHTML</code> å»æ‹¼æ¥ç›®æ ‡å†…å®¹ï¼Œè¿™æ ·åšå›ºç„¶æœ‰ç”¨ï¼Œä½†å´ä¸å¤Ÿä¼˜é›…ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œ<code>DOM Fragment</code> å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç”¨æ›´åŠ ç»“æ„åŒ–çš„æ–¹å¼å»è¾¾æˆåŒæ ·çš„ç›®çš„ï¼Œä»è€Œåœ¨ç»´æŒæ€§èƒ½çš„åŒæ—¶ï¼Œä¿ä½æˆ‘ä»¬ä»£ç çš„å¯æ‹“å±•å’Œå¯ç»´æŠ¤æ€§ã€‚æˆ‘ä»¬ç°åœ¨ç”¨ <code>DOM Fragment</code> æ¥æ”¹å†™ä¸Šé¢çš„ä¾‹å­ï¼š</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token keyword">let</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;container&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment">// åˆ›å»ºä¸€ä¸ªDOM Fragmentå¯¹è±¡ä½œä¸ºå®¹å™¨</span></span>
<span class="line">    <span class="token keyword">let</span> content <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createDocumentFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> count<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>count<span class="token operator">&lt;</span><span class="token number">10000</span><span class="token punctuation">;</span>count<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">// spanæ­¤æ—¶å¯ä»¥é€šè¿‡DOM APIå»åˆ›å»º</span></span>
<span class="line">      <span class="token keyword">let</span> oSpan <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;span&quot;</span><span class="token punctuation">)</span></span>
<span class="line">      oSpan<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&#39;æˆ‘æ˜¯ä¸€ä¸ªå°æµ‹è¯•&#39;</span></span>
<span class="line">      <span class="token comment">// åƒæ“ä½œçœŸå®DOMä¸€æ ·æ“ä½œDOM Fragmentå¯¹è±¡</span></span>
<span class="line">      content<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>oSpan<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token comment">// å†…å®¹å¤„ç†å¥½äº†,æœ€åå†è§¦å‘çœŸå®DOMçš„æ›´æ”¹</span></span>
<span class="line">    container<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>æˆ‘ä»¬è¿è¡Œè¿™æ®µä»£ç ï¼Œå¯ä»¥å¾—åˆ°ä¸å‰é¢ä¸¤ç§å†™æ³•ç›¸åŒçš„è¿è¡Œç»“æœã€‚</li><li>å¯ä»¥çœ‹å‡ºï¼ŒDOM Fragment å¯¹è±¡å…è®¸æˆ‘ä»¬åƒæ“ä½œçœŸå® DOM ä¸€æ ·å»è°ƒç”¨å„ç§å„æ ·çš„ DOM APIï¼Œæˆ‘ä»¬çš„ä»£ç è´¨é‡å› æ­¤å¾—åˆ°äº†ä¿è¯ã€‚å¹¶ä¸”å®ƒçš„èº«ä»½ä¹Ÿéå¸¸çº¯ç²¹ï¼šå½“æˆ‘ä»¬è¯•å›¾å°†å…¶ append è¿›çœŸå® DOM æ—¶ï¼Œå®ƒä¼šåœ¨ä¹–ä¹–äº¤å‡ºè‡ªèº«ç¼“å­˜çš„æ‰€æœ‰åä»£èŠ‚ç‚¹å<strong>å…¨èº«è€Œé€€</strong> ï¼Œå®Œç¾åœ°å®Œæˆä¸€ä¸ªå®¹å™¨çš„ä½¿å‘½ï¼Œè€Œä¸ä¼šå‡ºç°åœ¨çœŸå®çš„ DOM ç»“æ„ä¸­ã€‚è¿™ç§ç»“æ„åŒ–ã€å¹²å‡€åˆ©è½çš„ç‰¹æ€§ï¼Œä½¿å¾— DOM Fragment ä½œä¸ºç»å…¸çš„æ€§èƒ½ä¼˜åŒ–æ‰‹æ®µå¤§å—æ¬¢è¿ï¼Œè¿™ä¸€ç‚¹åœ¨ jQueryã€Vue ç­‰ä¼˜ç§€å‰ç«¯æ¡†æ¶çš„æºç ä¸­å‡æœ‰ä½“ç°ã€‚</li><li>ç›¸æ¯” DOM å‘½é¢˜çš„åšå¤§ç²¾æ·±ï¼Œä¸€ä¸ªç®€å•çš„å¾ªç¯ Demo æ˜¾ç„¶ä¸èƒ½è¯´æ˜æ‰€æœ‰é—®é¢˜ã€‚ä¸è¿‡ä¸ç”¨ç€æ€¥ï¼Œåœ¨æœ¬èŠ‚ï¼Œæˆ‘åªå¸Œæœ›å¤§å®¶èƒ½ç‰¢è®°åŸç†ä¸å®è§‚æ€è·¯ã€‚â€œè¯åˆ°ç—…é™¤â€åˆ°è¿™é‡Œæ‰åˆšåˆšå¼€äº†ä¸ªå¤´ï¼Œä¸‹ä¸ªå°èŠ‚ï¼Œæˆ‘ä»¬å°†æ·±æŒ–äº‹ä»¶å¾ªç¯æœºåˆ¶ï¼Œä»è€Œæ·±å…¥ JS å±‚é¢çš„ç”Ÿäº§å®è·µã€‚</li></ul><h2 id="åã€æ¸²æŸ“ç¯‡-4-åƒæ–¹ç™¾è®¡â€”â€”event-loop-ä¸å¼‚æ­¥æ›´æ–°ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#åã€æ¸²æŸ“ç¯‡-4-åƒæ–¹ç™¾è®¡â€”â€”event-loop-ä¸å¼‚æ­¥æ›´æ–°ç­–ç•¥"><span>åã€æ¸²æŸ“ç¯‡ 4ï¼šåƒæ–¹ç™¾è®¡â€”â€”Event Loop ä¸å¼‚æ­¥æ›´æ–°ç­–ç•¥</span></a></h2><blockquote><p>Vue å’Œ React éƒ½å®ç°äº†å¼‚æ­¥æ›´æ–°ç­–ç•¥ã€‚è™½ç„¶å®ç°çš„æ–¹å¼ä¸å°½ç›¸åŒï¼Œä½†éƒ½è¾¾åˆ°äº†å‡å°‘ DOM æ“ä½œã€é¿å…è¿‡åº¦æ¸²æŸ“çš„ç›®çš„ã€‚é€šè¿‡ç ”ç©¶æ¡†æ¶çš„è¿è¡Œæœºåˆ¶ï¼Œå…¶è®¾è®¡æ€è·¯å°†æ·±åŒ–æˆ‘ä»¬å¯¹ DOM ä¼˜åŒ–çš„ç†è§£ï¼Œå…¶å®ç°æ‰‹æ³•å°†æ‹“å®½æˆ‘ä»¬å¯¹ DOM å®è·µçš„è®¤çŸ¥ã€‚</p></blockquote><p>æœ¬èŠ‚æˆ‘ä»¬å°†åŸºäº Event Loop æœºåˆ¶ï¼Œå¯¹ Vue çš„å¼‚æ­¥æ›´æ–°ç­–ç•¥ä½œæ¢è®¨ã€‚</p><h3 id="å‰ç½®çŸ¥è¯†-event-loop-ä¸­çš„-æ¸²æŸ“æ—¶æœº" tabindex="-1"><a class="header-anchor" href="#å‰ç½®çŸ¥è¯†-event-loop-ä¸­çš„-æ¸²æŸ“æ—¶æœº"><span>å‰ç½®çŸ¥è¯†ï¼šEvent Loop ä¸­çš„â€œæ¸²æŸ“æ—¶æœºâ€</span></a></h3><p>ææ‡‚ <code>Event Loop</code>ï¼Œæ˜¯ç†è§£ <code>Vue</code> å¯¹ <code>DOM</code> æ“ä½œä¼˜åŒ–çš„ç¬¬ä¸€æ­¥ã€‚</p><h3 id="micro-task-ä¸-macro-task" tabindex="-1"><a class="header-anchor" href="#micro-task-ä¸-macro-task"><span>Micro-Task ä¸ Macro-Task</span></a></h3><ul><li>äº‹ä»¶å¾ªç¯ä¸­çš„å¼‚æ­¥é˜Ÿåˆ—æœ‰ä¸¤ç§ï¼š<code>macro</code>ï¼ˆå®ä»»åŠ¡ï¼‰é˜Ÿåˆ—å’Œ <code>micro</code>ï¼ˆå¾®ä»»åŠ¡ï¼‰é˜Ÿåˆ—ã€‚</li><li>å¸¸è§çš„ <code>macro-task</code> æ¯”å¦‚ï¼š <code>setTimeout</code>ã€<code>setInterval</code>ã€ <code>setImmediate</code>ã€<code>script</code>ï¼ˆæ•´ä½“ä»£ç ï¼‰ã€ <code>I/O</code> æ“ä½œã€<code>UI</code> æ¸²æŸ“ç­‰ã€‚</li><li>å¸¸è§çš„ <code>micro-task</code> æ¯”å¦‚: <code>process.nextTick</code>ã€<code>Promise</code>ã€<code>MutationObserver</code> ç­‰ã€‚</li></ul><h3 id="event-loop-è¿‡ç¨‹è§£æ" tabindex="-1"><a class="header-anchor" href="#event-loop-è¿‡ç¨‹è§£æ"><span>Event Loop è¿‡ç¨‹è§£æ</span></a></h3><p>åŸºäºå¯¹ micro å’Œ macro çš„è®¤çŸ¥ï¼Œæˆ‘ä»¬æ¥èµ°ä¸€éå®Œæ•´çš„äº‹ä»¶å¾ªç¯è¿‡ç¨‹ã€‚</p><p><strong>ä¸€ä¸ªå®Œæ•´çš„ Event Loop è¿‡ç¨‹ï¼Œå¯ä»¥æ¦‚æ‹¬ä¸ºä»¥ä¸‹é˜¶æ®µï¼š</strong></p><ul><li>åˆå§‹çŠ¶æ€ï¼šè°ƒç”¨æ ˆç©ºã€‚<code>micro</code> é˜Ÿåˆ—ç©ºï¼Œ<code>macro</code> é˜Ÿåˆ—é‡Œæœ‰ä¸”åªæœ‰ä¸€ä¸ª <code>script</code> è„šæœ¬ï¼ˆæ•´ä½“ä»£ç ï¼‰ã€‚</li><li>å…¨å±€ä¸Šä¸‹æ–‡ï¼ˆ<code>script</code> æ ‡ç­¾ï¼‰è¢«æ¨å…¥è°ƒç”¨æ ˆï¼ŒåŒæ­¥ä»£ç æ‰§è¡Œã€‚åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡å¯¹ä¸€äº›æ¥å£çš„è°ƒç”¨ï¼Œå¯ä»¥äº§ç”Ÿæ–°çš„ <code>macro-task</code> ä¸ <code>micro-task</code>ï¼Œå®ƒä»¬ä¼šåˆ†åˆ«è¢«æ¨å…¥å„è‡ªçš„ä»»åŠ¡é˜Ÿåˆ—é‡Œã€‚åŒæ­¥ä»£ç æ‰§è¡Œå®Œäº†ï¼Œ<code>script</code> è„šæœ¬ä¼šè¢«ç§»å‡º <code>macro</code> é˜Ÿåˆ—ï¼Œ<strong>è¿™ä¸ªè¿‡ç¨‹æœ¬è´¨ä¸Šæ˜¯é˜Ÿåˆ—çš„ macro-task çš„æ‰§è¡Œå’Œå‡ºé˜Ÿçš„è¿‡ç¨‹</strong> ã€‚</li><li>ä¸Šä¸€æ­¥æˆ‘ä»¬å‡ºé˜Ÿçš„æ˜¯ä¸€ä¸ª <code>macro-task</code>ï¼Œè¿™ä¸€æ­¥æˆ‘ä»¬å¤„ç†çš„æ˜¯ <code>micro-task</code>ã€‚ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼šå½“ <code>macro-task</code> å‡ºé˜Ÿæ—¶ï¼Œä»»åŠ¡æ˜¯<strong>ä¸€ä¸ªä¸€ä¸ª</strong> æ‰§è¡Œçš„ï¼›è€Œ <code>micro-task</code> å‡ºé˜Ÿæ—¶ï¼Œä»»åŠ¡æ˜¯<strong>ä¸€é˜Ÿä¸€é˜Ÿ</strong> æ‰§è¡Œçš„ï¼ˆå¦‚ä¸‹å›¾æ‰€ç¤ºï¼‰ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¤„ç† <code>micro</code> é˜Ÿåˆ—è¿™ä¸€æ­¥ï¼Œä¼šé€ä¸ªæ‰§è¡Œé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡å¹¶æŠŠå®ƒå‡ºé˜Ÿï¼Œç›´åˆ°é˜Ÿåˆ—è¢«æ¸…ç©ºã€‚</li></ul><p><img src="`+R+'" alt=""></p><ul><li><strong>æ‰§è¡Œæ¸²æŸ“æ“ä½œï¼Œæ›´æ–°ç•Œé¢</strong> ï¼ˆæ•²é»‘æ¿åˆ’é‡ç‚¹ï¼‰ã€‚</li><li>æ£€æŸ¥æ˜¯å¦å­˜åœ¨ <code>Web worker</code> ä»»åŠ¡ï¼Œå¦‚æœæœ‰ï¼Œåˆ™å¯¹å…¶è¿›è¡Œå¤„ç† ã€‚</li><li>ä¸Šè¿°è¿‡ç¨‹å¾ªç¯å¾€å¤ï¼Œç›´åˆ°ä¸¤ä¸ªé˜Ÿåˆ—éƒ½æ¸…ç©º</li></ul><p>æˆ‘ä»¬æ€»ç»“ä¸€ä¸‹ï¼Œæ¯ä¸€æ¬¡å¾ªç¯éƒ½æ˜¯ä¸€ä¸ªè¿™æ ·çš„è¿‡ç¨‹ï¼š</p><p><img src="'+U+`" alt=""></p><h3 id="æ¸²æŸ“çš„æ—¶æœº" tabindex="-1"><a class="header-anchor" href="#æ¸²æŸ“çš„æ—¶æœº"><span>æ¸²æŸ“çš„æ—¶æœº</span></a></h3><ul><li>å¤§å®¶ç°åœ¨æ€è€ƒä¸€ä¸ªè¿™æ ·çš„é—®é¢˜ï¼šå‡å¦‚æˆ‘æƒ³è¦åœ¨å¼‚æ­¥ä»»åŠ¡é‡Œè¿›è¡ŒDOMæ›´æ–°ï¼Œæˆ‘è¯¥æŠŠå®ƒåŒ…è£…æˆ micro è¿˜æ˜¯ macro å‘¢ï¼Ÿ</li><li>æˆ‘ä»¬å…ˆå‡è®¾å®ƒæ˜¯ä¸€ä¸ª macro ä»»åŠ¡ï¼Œæ¯”å¦‚æˆ‘åœ¨ script è„šæœ¬ä¸­ç”¨ setTimeout æ¥å¤„ç†å®ƒï¼š</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token comment">// taskæ˜¯ä¸€ä¸ªç”¨äºä¿®æ”¹DOMçš„å›è°ƒ</span></span>
<span class="line">    <span class="token function">setTimeout</span><span class="token punctuation">(</span>task<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ç°åœ¨ <code>task</code> è¢«æ¨å…¥çš„ <code>macro</code> é˜Ÿåˆ—ã€‚ä½†å› ä¸º <code>script</code> è„šæœ¬æœ¬èº«æ˜¯ä¸€ä¸ª <code>macro</code> ä»»åŠ¡ï¼Œæ‰€ä»¥æœ¬æ¬¡æ‰§è¡Œå®Œ <code>script</code> è„šæœ¬ä¹‹åï¼Œä¸‹ä¸€ä¸ªæ­¥éª¤å°±è¦å»å¤„ç† <code>micro</code> é˜Ÿåˆ—äº†ï¼Œå†å¾€ä¸‹å°±å»æ‰§è¡Œäº†ä¸€æ¬¡ <code>render</code>ï¼Œå¯¹ä¸å¯¹ï¼Ÿ</li><li>ä½†æœ¬æ¬¡renderæˆ‘çš„ç›®æ ‡taskå…¶å®å¹¶æ²¡æœ‰æ‰§è¡Œï¼Œæƒ³è¦ä¿®æ”¹çš„DOMä¹Ÿæ²¡æœ‰ä¿®æ”¹ï¼Œå› æ­¤è¿™ä¸€æ¬¡çš„<code>render</code>å…¶å®æ˜¯ä¸€æ¬¡æ— æ•ˆçš„<code>render</code>ã€‚</li></ul><blockquote><p><code>macro</code> ä¸ okï¼Œæˆ‘ä»¬è½¬å‘ <code>micro</code> è¯•è¯•çœ‹ã€‚æˆ‘ç”¨ <code>Promise</code> æ¥æŠŠ <code>task</code> åŒ…è£…æˆæ˜¯ä¸€ä¸ª <code>micro</code> ä»»åŠ¡ï¼š</p></blockquote><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>task<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>é‚£ä¹ˆæˆ‘ä»¬ç»“æŸäº†å¯¹ script è„šæœ¬çš„æ‰§è¡Œï¼Œæ˜¯ä¸æ˜¯ç´§æ¥ç€å°±å»å¤„ç† micro-task é˜Ÿåˆ—äº†ï¼Ÿmicro-task å¤„ç†å®Œï¼ŒDOM ä¿®æ”¹å¥½äº†ï¼Œç´§æ¥ç€å°±å¯ä»¥èµ° render æµç¨‹äº†â€”â€”ä¸éœ€è¦å†æ¶ˆè€—å¤šä½™çš„ä¸€æ¬¡æ¸²æŸ“ï¼Œä¸éœ€è¦å†ç­‰å¾…ä¸€è½®äº‹ä»¶å¾ªç¯ï¼Œç›´æ¥ä¸ºç”¨æˆ·å‘ˆç°æœ€å³æ—¶çš„æ›´æ–°ç»“æœã€‚</p></blockquote><p>å› æ­¤ï¼Œæˆ‘ä»¬æ›´æ–° DOM çš„æ—¶é—´ç‚¹ï¼Œåº”è¯¥å°½å¯èƒ½é è¿‘æ¸²æŸ“çš„æ—¶æœºã€‚<strong>å½“æˆ‘ä»¬éœ€è¦åœ¨å¼‚æ­¥ä»»åŠ¡ä¸­å®ç° DOM ä¿®æ”¹æ—¶ï¼ŒæŠŠå®ƒåŒ…è£…æˆ micro ä»»åŠ¡æ˜¯ç›¸å¯¹æ˜æ™ºçš„é€‰æ‹©</strong> ã€‚</p><h3 id="ç”Ÿäº§å®è·µ-å¼‚æ­¥æ›´æ–°ç­–ç•¥â€”â€”ä»¥-vue-ä¸ºä¾‹" tabindex="-1"><a class="header-anchor" href="#ç”Ÿäº§å®è·µ-å¼‚æ­¥æ›´æ–°ç­–ç•¥â€”â€”ä»¥-vue-ä¸ºä¾‹"><span>ç”Ÿäº§å®è·µï¼šå¼‚æ­¥æ›´æ–°ç­–ç•¥â€”â€”ä»¥ Vue ä¸ºä¾‹</span></a></h3><p>ä»€ä¹ˆæ˜¯å¼‚æ­¥æ›´æ–°ï¼Ÿ</p><blockquote><p>å½“æˆ‘ä»¬ä½¿ç”¨ Vue æˆ– React æä¾›çš„æ¥å£å»æ›´æ–°æ•°æ®æ—¶ï¼Œè¿™ä¸ªæ›´æ–°å¹¶ä¸ä¼šç«‹å³ç”Ÿæ•ˆï¼Œè€Œæ˜¯ä¼šè¢«æ¨å…¥åˆ°ä¸€ä¸ªé˜Ÿåˆ—é‡Œã€‚å¾…åˆ°é€‚å½“çš„æ—¶æœºï¼Œé˜Ÿåˆ—ä¸­çš„æ›´æ–°ä»»åŠ¡ä¼šè¢«<strong>æ‰¹é‡è§¦å‘</strong> ã€‚è¿™å°±æ˜¯å¼‚æ­¥æ›´æ–°ã€‚</p></blockquote><p>å¼‚æ­¥æ›´æ–°å¯ä»¥å¸®åŠ©æˆ‘ä»¬é¿å…è¿‡åº¦æ¸²æŸ“ï¼Œæ˜¯æˆ‘ä»¬ä¸ŠèŠ‚æåˆ°çš„â€œè®© JS ä¸º DOM åˆ†å‹â€çš„å…¸èŒƒä¹‹ä¸€ã€‚</p><p><strong>1. å¼‚æ­¥æ›´æ–°çš„ä¼˜è¶Šæ€§</strong></p><ul><li>å¼‚æ­¥æ›´æ–°çš„ç‰¹æ€§åœ¨äºå®ƒ<strong>åªçœ‹ç»“æœ</strong> ï¼Œå› æ­¤æ¸²æŸ“å¼•æ“<strong>ä¸éœ€è¦ä¸ºè¿‡ç¨‹ä¹°å•</strong> ã€‚</li><li>æœ€å…¸å‹çš„ä¾‹å­ï¼Œæ¯”å¦‚æœ‰æ—¶æˆ‘ä»¬ä¼šé‡åˆ°è¿™æ ·çš„æƒ…å†µï¼š</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token comment">// ä»»åŠ¡ä¸€</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>content <span class="token operator">=</span> <span class="token string">&#39;ç¬¬ä¸€æ¬¡æµ‹è¯•&#39;</span></span>
<span class="line">    <span class="token comment">// ä»»åŠ¡äºŒ</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>content <span class="token operator">=</span> <span class="token string">&#39;ç¬¬äºŒæ¬¡æµ‹è¯•&#39;</span></span>
<span class="line">    <span class="token comment">// ä»»åŠ¡ä¸‰</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>content <span class="token operator">=</span> <span class="token string">&#39;ç¬¬ä¸‰æ¬¡æµ‹è¯•&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬åœ¨ä¸‰ä¸ªæ›´æ–°ä»»åŠ¡ä¸­å¯¹åŒä¸€ä¸ªçŠ¶æ€ä¿®æ”¹äº†ä¸‰æ¬¡ï¼Œå¦‚æœæˆ‘ä»¬é‡‡å–ä¼ ç»Ÿçš„åŒæ­¥æ›´æ–°ç­–ç•¥ï¼Œé‚£ä¹ˆå°±è¦æ“ä½œä¸‰æ¬¡ DOMã€‚ä½†æœ¬è´¨ä¸Šéœ€è¦å‘ˆç°ç»™ç”¨æˆ·çš„ç›®æ ‡å†…å®¹å…¶å®åªæ˜¯ç¬¬ä¸‰æ¬¡çš„ç»“æœï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰ç¬¬ä¸‰æ¬¡çš„æ“ä½œæ˜¯æœ‰æ„ä¹‰çš„â€”â€”æˆ‘ä»¬ç™½ç™½æµªè´¹äº†ä¸¤æ¬¡è®¡ç®—ã€‚</p><p>ä½†å¦‚æœæˆ‘ä»¬æŠŠè¿™ä¸‰ä¸ªä»»åŠ¡å¡è¿›å¼‚æ­¥æ›´æ–°é˜Ÿåˆ—é‡Œï¼Œå®ƒä»¬ä¼šå…ˆåœ¨ JS çš„å±‚é¢ä¸Šè¢«<strong>æ‰¹é‡æ‰§è¡Œå®Œæ¯•</strong> ã€‚å½“æµç¨‹èµ°åˆ°æ¸²æŸ“è¿™ä¸€æ­¥æ—¶ï¼Œå®ƒä»…ä»…éœ€è¦é’ˆå¯¹æœ‰æ„ä¹‰çš„è®¡ç®—ç»“æœæ“ä½œä¸€æ¬¡ DOMâ€”â€”è¿™å°±æ˜¯å¼‚æ­¥æ›´æ–°çš„å¦™å¤„ã€‚</p><p><strong>2. VueçŠ¶æ€æ›´æ–°æ‰‹æ³•ï¼šnextTick</strong></p><blockquote><p>Vue æ¯æ¬¡æƒ³è¦æ›´æ–°ä¸€ä¸ªçŠ¶æ€çš„æ—¶å€™ï¼Œä¼šå…ˆæŠŠå®ƒè¿™ä¸ªæ›´æ–°æ“ä½œç»™åŒ…è£…æˆä¸€ä¸ªå¼‚æ­¥æ“ä½œæ´¾å‘å‡ºå»ã€‚è¿™ä»¶äº‹æƒ…ï¼Œåœ¨æºç ä¸­æ˜¯ç”±ä¸€ä¸ªå«åš <code>nextTick</code> çš„å‡½æ•°æ¥å®Œæˆçš„ï¼š</p></blockquote><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">nextTick</span> <span class="token punctuation">(</span><span class="token parameter">cb<span class="token operator">?</span><span class="token operator">:</span> Function<span class="token punctuation">,</span> ctx<span class="token operator">?</span><span class="token operator">:</span> Object</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">let</span> _resolve</span>
<span class="line">      callbacks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token function">cb</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span></span>
<span class="line">          <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token function">handleError</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> ctx<span class="token punctuation">,</span> <span class="token string">&#39;nextTick&#39;</span><span class="token punctuation">)</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>_resolve<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token function">_resolve</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token comment">// æ£€æŸ¥ä¸Šä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—ï¼ˆå³åä¸ºcallbacksçš„ä»»åŠ¡æ•°ç»„ï¼‰æ˜¯å¦æ´¾å‘å’Œæ‰§è¡Œå®Œæ¯•äº†ã€‚pendingæ­¤å¤„ç›¸å½“äºä¸€ä¸ªé”</span></span>
<span class="line">      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>pending<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// è‹¥ä¸Šä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—å·²ç»æ‰§è¡Œå®Œæ¯•ï¼Œåˆ™å°†pendingè®¾å®šä¸ºtrueï¼ˆæŠŠé”é”ä¸Šï¼‰</span></span>
<span class="line">        pending <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line">        <span class="token comment">// æ˜¯å¦è¦æ±‚ä¸€å®šè¦æ´¾å‘ä¸ºmacroä»»åŠ¡</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>useMacroTask<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token function">macroTimerFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token comment">// å¦‚æœä¸è¯´æ˜ä¸€å®šè¦macro ä½ ä»¬å°±å…¨éƒ½æ˜¯micro</span></span>
<span class="line">          <span class="token function">microTimerFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">      <span class="token comment">// $flow-disable-line</span></span>
<span class="line">      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>cb <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> Promise <span class="token operator">!==</span> <span class="token string">&#39;undefined&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">          _resolve <span class="token operator">=</span> resolve</span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>æˆ‘ä»¬çœ‹åˆ°ï¼ŒVue çš„å¼‚æ­¥ä»»åŠ¡é»˜è®¤æƒ…å†µä¸‹éƒ½æ˜¯ç”¨ <code>Promise</code> æ¥åŒ…è£…çš„ï¼Œä¹Ÿå°±æ˜¯æ˜¯è¯´å®ƒä»¬éƒ½æ˜¯ <code>micro-task</code>ã€‚è¿™ä¸€ç‚¹å’Œæˆ‘ä»¬â€œå‰ç½®çŸ¥è¯†â€ä¸­çš„æ¸²æŸ“æ—¶æœºçš„åˆ†æä¸è°‹è€Œåˆã€‚</li><li>ä¸ºäº†å¸¦å¤§å®¶ç†Ÿæ‚‰ä¸€ä¸‹å¸¸è§çš„ <code>macro</code> å’Œ <code>micro</code> æ´¾å‘æ–¹å¼ã€åŠ æ·±å¯¹ <code>Event Loop</code> çš„ç†è§£ï¼Œæˆ‘ä»¬ç»§ç»­ç»†åŒ–è§£æä¸€ä¸‹ <code>macroTimeFunc()</code> å’Œ <code>microTimeFunc()</code> ä¸¤ä¸ªæ–¹æ³•ã€‚</li></ul><p><code>macroTimeFunc()</code> æ˜¯è¿™ä¹ˆå®ç°çš„ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token comment">// macroé¦–é€‰setImmediate è¿™ä¸ªå…¼å®¹æ€§æœ€å·®</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> setImmediate <span class="token operator">!==</span> <span class="token string">&#39;undefined&#39;</span> <span class="token operator">&amp;&amp;</span> <span class="token function">isNative</span><span class="token punctuation">(</span>setImmediate<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token function-variable function">macroTimerFunc</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">setImmediate</span><span class="token punctuation">(</span>flushCallbacks<span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> MessageChannel <span class="token operator">!==</span> <span class="token string">&#39;undefined&#39;</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span></span>
<span class="line">        <span class="token function">isNative</span><span class="token punctuation">(</span>MessageChannel<span class="token punctuation">)</span> <span class="token operator">||</span></span>
<span class="line">        <span class="token comment">// PhantomJS</span></span>
<span class="line">        MessageChannel<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&#39;[object MessageChannelConstructor]&#39;</span></span>
<span class="line">      <span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">const</span> channel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MessageChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token keyword">const</span> port <span class="token operator">=</span> channel<span class="token punctuation">.</span>port2</span>
<span class="line">      channel<span class="token punctuation">.</span>port1<span class="token punctuation">.</span>onmessage <span class="token operator">=</span> flushCallbacks</span>
<span class="line">      <span class="token function-variable function">macroTimerFunc</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        port<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">// å…¼å®¹æ€§æœ€å¥½çš„æ´¾å‘æ–¹å¼æ˜¯setTimeout</span></span>
<span class="line">      <span class="token function-variable function">macroTimerFunc</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">setTimeout</span><span class="token punctuation">(</span>flushCallbacks<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>microTimeFunc()</code> æ˜¯è¿™ä¹ˆå®ç°çš„ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token comment">// ç®€å•ç²—æš´ ä¸æ˜¯ioså…¨éƒ½ç»™æˆ‘å»Promise å¦‚æœä¸å…¼å®¹promise é‚£ä¹ˆä½ åªèƒ½å°†å°±ä¸€ä¸‹å˜æˆmacroäº†</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> Promise <span class="token operator">!==</span> <span class="token string">&#39;undefined&#39;</span> <span class="token operator">&amp;&amp;</span> <span class="token function">isNative</span><span class="token punctuation">(</span>Promise<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">const</span> p <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token function-variable function">microTimerFunc</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>flushCallbacks<span class="token punctuation">)</span></span>
<span class="line">        <span class="token comment">// in problematic UIWebViews, Promise.then doesn&#39;t completely break, but</span></span>
<span class="line">        <span class="token comment">// it can get stuck in a weird state where callbacks are pushed into the</span></span>
<span class="line">        <span class="token comment">// microtask queue but the queue isn&#39;t being flushed, until the browser</span></span>
<span class="line">        <span class="token comment">// needs to do some other work, e.g. handle a timer. Therefore we can</span></span>
<span class="line">        <span class="token comment">// &quot;force&quot; the microtask queue to be flushed by adding an empty timer.</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>isIOS<span class="token punctuation">)</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>noop<span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">// å¦‚æœæ— æ³•æ´¾å‘microï¼Œå°±é€€è€Œæ±‚å…¶æ¬¡æ´¾å‘ä¸ºmacro</span></span>
<span class="line">      microTimerFunc <span class="token operator">=</span> macroTimerFunc</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬æ³¨æ„åˆ°ï¼Œæ— è®ºæ˜¯æ´¾å‘ <code>macro</code> ä»»åŠ¡è¿˜æ˜¯æ´¾å‘ <code>micro</code> ä»»åŠ¡ï¼Œæ´¾å‘çš„ä»»åŠ¡å¯¹è±¡éƒ½æ˜¯ä¸€ä¸ªå«åš <code>flushCallbacks</code> çš„ä¸œè¥¿ï¼Œè¿™ä¸ªä¸œè¥¿åšäº†ä»€ä¹ˆå‘¢ï¼Ÿ</p><p><code>flushCallbacks</code> æºç å¦‚ä¸‹ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token keyword">function</span> <span class="token function">flushCallbacks</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      pending <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line">      <span class="token comment">// callbacksåœ¨nextickä¸­å‡ºç°è¿‡ å®ƒæ˜¯ä»»åŠ¡æ•°ç»„ï¼ˆé˜Ÿåˆ—ï¼‰</span></span>
<span class="line">      <span class="token keyword">const</span> copies <span class="token operator">=</span> callbacks<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">      callbacks<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line">      <span class="token comment">// å°†callbacksä¸­çš„ä»»åŠ¡é€ä¸ªå–å‡ºæ‰§è¡Œ</span></span>
<span class="line">      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> copies<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        copies<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ç°åœ¨æˆ‘ä»¬ç†æ¸…æ¥šäº†ï¼š<code>Vue</code> ä¸­æ¯äº§ç”Ÿä¸€ä¸ªçŠ¶æ€æ›´æ–°ä»»åŠ¡ï¼Œå®ƒå°±ä¼šè¢«å¡è¿›ä¸€ä¸ªå« <code>callbacks</code> çš„æ•°ç»„ï¼ˆæ­¤å¤„æ˜¯ä»»åŠ¡é˜Ÿåˆ—çš„å®ç°å½¢å¼ï¼‰ä¸­ã€‚è¿™ä¸ªä»»åŠ¡é˜Ÿåˆ—åœ¨è¢«ä¸¢è¿› <code>micro</code> æˆ– <code>macro</code> é˜Ÿåˆ—ä¹‹å‰ï¼Œä¼šå…ˆå»æ£€æŸ¥å½“å‰æ˜¯å¦æœ‰å¼‚æ­¥æ›´æ–°ä»»åŠ¡æ­£åœ¨æ‰§è¡Œï¼ˆå³æ£€æŸ¥ <code>pending</code> é”ï¼‰ã€‚å¦‚æœç¡®è®¤ <code>pending</code> é”æ˜¯å¼€ç€çš„ï¼ˆ<code>false</code>ï¼‰ï¼Œå°±æŠŠå®ƒè®¾ç½®ä¸ºé”ä¸Šï¼ˆtrueï¼‰ï¼Œç„¶åå¯¹å½“å‰ <code>callbacks</code> æ•°ç»„çš„ä»»åŠ¡è¿›è¡Œæ´¾å‘ï¼ˆä¸¢è¿› <code>micro</code> æˆ– macro é˜Ÿåˆ—ï¼‰å’Œæ‰§è¡Œã€‚è®¾ç½® <code>pending</code> é”çš„æ„ä¹‰åœ¨äºä¿è¯çŠ¶æ€æ›´æ–°ä»»åŠ¡çš„æœ‰åºè¿›è¡Œï¼Œé¿å…å‘ç”Ÿæ··ä¹±ã€‚</li><li>æœ¬å°èŠ‚æˆ‘ä»¬ä»æ€§èƒ½ä¼˜åŒ–çš„è§’åº¦å‡ºå‘ï¼Œé€šè¿‡è§£æVueæºç ï¼Œå¯¹å¼‚æ­¥æ›´æ–°è¿™ä¸€é«˜æ•ˆçš„ <code>DOM</code> ä¼˜åŒ–æ‰‹æ®µæœ‰äº†æ„Ÿæ€§çš„è®¤çŸ¥ã€‚åŒæ—¶å¸®åŠ©å¤§å®¶è¿›ä¸€æ­¥ç†Ÿæ‚‰äº† <code>micro</code> ä¸ <code>macro</code> åœ¨ç”Ÿäº§ä¸­çš„åº”ç”¨ï¼ŒåŠ æ·±äº†å¯¹ <code>Event Loop</code> çš„ç†è§£ã€‚äº‹å®ä¸Šï¼ŒVue æºç ä¸­è¿˜æœ‰è®¸å¤šå€¼å¾—ç§°é“çš„ç”Ÿäº§å®è·µï¼Œå…¶è®¾è®¡æ¨¡å¼ä¸ç¼–ç ç»†èŠ‚éƒ½å€¼å¾—æˆ‘ä»¬å»ç»†ç»†å“å‘³ã€‚å¯¹è¿™ä¸ªè¯é¢˜æ„Ÿå…´è¶£çš„åŒå­¦ï¼Œè¯¾åä¸å¦¨ç§»æ­¥ <a href="https://juejin.im/book/5a36661851882538e2259c0f" target="_blank" rel="noopener noreferrer">Vueè¿è¡Œæœºåˆ¶è§£æ (opens new window)</a> è¿›è¡Œæ¢ç´¢ã€‚</li></ul><h3 id="å°ç»“-4" tabindex="-1"><a class="header-anchor" href="#å°ç»“-4"><span>å°ç»“</span></a></h3><ul><li>è‡³æ­¤ï¼Œæˆ‘ä»¬çš„ DOM ä¼˜åŒ–ä¹‹è·¯æ‰èµ°å®Œäº†ä¸€åŠã€‚</li><li>ä»¥ä¸Šæˆ‘ä»¬éƒ½åœ¨è®¨è®ºâ€œå¦‚ä½•å‡å°‘ DOM æ“ä½œâ€çš„è¯é¢˜ã€‚è¿™ä¸ªè¯é¢˜æ¯”è¾ƒå®è§‚â€”â€”DOM æ“ä½œä¹Ÿåˆ†å¾ˆå¤šç§ï¼Œå®ƒä»¬å¸¦æ¥çš„å˜åŒ–å„ä¸ç›¸åŒã€‚æœ‰çš„æ“ä½œåªè§¦å‘é‡ç»˜ï¼Œè¿™æ—¶æˆ‘ä»¬çš„æ€§èƒ½æŸè€—å°±å°ä¸€äº›ï¼›æœ‰çš„æ“ä½œä¼šè§¦å‘å›æµï¼Œè¿™æ—¶æˆ‘ä»¬æ›´â€œè‚‰ç–¼â€ä¸€äº›ã€‚é‚£ä¹ˆå¦‚ä½•ç†è§£å›æµä¸é‡ç»˜ï¼Œå¦‚ä½•å€ŸåŠ©è¿™äº›ç†è§£å»æå‡é¡µé¢æ¸²æŸ“æ•ˆç‡å‘¢ï¼Ÿ</li><li>ç»“æŸäº† JS çš„å¾ç¨‹ï¼Œæˆ‘ä»¬ä¸‹é¢å°±èµ°è¿› CSS çš„ä¸–ç•Œä¸€çª¥ç©¶ç«Ÿã€‚</li></ul><h2 id="åä¸€ã€æ¸²æŸ“ç¯‡-5-æœ€åä¸€å‡»â€”â€”å›æµ-reflow-ä¸é‡ç»˜-repaint" tabindex="-1"><a class="header-anchor" href="#åä¸€ã€æ¸²æŸ“ç¯‡-5-æœ€åä¸€å‡»â€”â€”å›æµ-reflow-ä¸é‡ç»˜-repaint"><span>åä¸€ã€æ¸²æŸ“ç¯‡ 5ï¼šæœ€åä¸€å‡»â€”â€”å›æµï¼ˆReflowï¼‰ä¸é‡ç»˜ï¼ˆRepaintï¼‰</span></a></h2><p>å¼€ç¯‡æˆ‘ä»¬å…ˆå¯¹ä¸Šä¸ŠèŠ‚ä»‹ç»çš„å›æµä¸é‡ç»˜çš„åŸºç¡€çŸ¥è¯†åšä¸ªå¤ä¹ ï¼ˆè·³è¯»çš„åŒå­¦è¯·è‡ªè§‰å›åˆ°ä¸Šä¸ŠèŠ‚è¡¥é½ â†’_â†’ï¼‰ã€‚</p><p><strong>å›æµ</strong> ï¼šå½“æˆ‘ä»¬å¯¹ DOM çš„ä¿®æ”¹å¼•å‘äº† DOM å‡ ä½•å°ºå¯¸çš„å˜åŒ–ï¼ˆæ¯”å¦‚ä¿®æ”¹å…ƒç´ çš„å®½ã€é«˜æˆ–éšè—å…ƒç´ ç­‰ï¼‰æ—¶ï¼Œæµè§ˆå™¨éœ€è¦é‡æ–°è®¡ç®—å…ƒç´ çš„å‡ ä½•å±æ€§ï¼ˆå…¶ä»–å…ƒç´ çš„å‡ ä½•å±æ€§å’Œä½ç½®ä¹Ÿä¼šå› æ­¤å—åˆ°å½±å“ï¼‰ï¼Œç„¶åå†å°†è®¡ç®—çš„ç»“æœç»˜åˆ¶å‡ºæ¥ã€‚è¿™ä¸ªè¿‡ç¨‹å°±æ˜¯å›æµï¼ˆä¹Ÿå«é‡æ’ï¼‰ã€‚</p><p><strong>é‡ç»˜</strong> ï¼šå½“æˆ‘ä»¬å¯¹ DOM çš„ä¿®æ”¹å¯¼è‡´äº†æ ·å¼çš„å˜åŒ–ã€å´å¹¶æœªå½±å“å…¶å‡ ä½•å±æ€§ï¼ˆæ¯”å¦‚ä¿®æ”¹äº†é¢œè‰²æˆ–èƒŒæ™¯è‰²ï¼‰æ—¶ï¼Œæµè§ˆå™¨ä¸éœ€é‡æ–°è®¡ç®—å…ƒç´ çš„å‡ ä½•å±æ€§ã€ç›´æ¥ä¸ºè¯¥å…ƒç´ ç»˜åˆ¶æ–°çš„æ ·å¼ï¼ˆè·³è¿‡äº†ä¸Šå›¾æ‰€ç¤ºçš„å›æµç¯èŠ‚ï¼‰ã€‚è¿™ä¸ªè¿‡ç¨‹å«åšé‡ç»˜ã€‚</p><p>ç”±æ­¤æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œ<strong>é‡ç»˜ä¸ä¸€å®šå¯¼è‡´å›æµï¼Œå›æµä¸€å®šä¼šå¯¼è‡´é‡ç»˜</strong> ã€‚ç¡¬è¦æ¯”è¾ƒçš„è¯ï¼Œå›æµæ¯”é‡ç»˜åšçš„äº‹æƒ…æ›´å¤šï¼Œå¸¦æ¥çš„å¼€é”€ä¹Ÿæ›´å¤§ã€‚ä½†è¿™ä¸¤ä¸ªè¯´åˆ°åº•éƒ½æ˜¯åƒæ€§èƒ½çš„ï¼Œæ‰€ä»¥éƒ½ä¸æ˜¯ä»€ä¹ˆå–„èŒ¬ã€‚æˆ‘ä»¬åœ¨å¼€å‘ä¸­ï¼Œè¦ä»ä»£ç å±‚é¢å‡ºå‘ï¼Œå°½å¯èƒ½æŠŠå›æµå’Œé‡ç»˜çš„æ¬¡æ•°æœ€å°åŒ–ã€‚</p><h3 id="å“ªäº›å®é™…æ“ä½œä¼šå¯¼è‡´å›æµä¸é‡ç»˜" tabindex="-1"><a class="header-anchor" href="#å“ªäº›å®é™…æ“ä½œä¼šå¯¼è‡´å›æµä¸é‡ç»˜"><span>å“ªäº›å®é™…æ“ä½œä¼šå¯¼è‡´å›æµä¸é‡ç»˜</span></a></h3><ul><li>è¦é¿å…å›æµä¸é‡ç»˜çš„å‘ç”Ÿï¼Œæœ€ç›´æ¥çš„åšæ³•æ˜¯é¿å…æ‰å¯èƒ½ä¼šå¼•å‘å›æµä¸é‡ç»˜çš„ DOM æ“ä½œï¼Œå°±å¥½åƒæ‹†å¼¹ä¸“å®¶åœ¨è§£å†³ä¸€é¢—ç‚¸å¼¹æ—¶ï¼Œæœ€é‡è¦çš„æ˜¯æç­å®ƒçš„å¯¼ç«ç´¢ã€‚</li><li>è§¦å‘é‡ç»˜çš„â€œå¯¼ç«ç´¢â€æ¯”è¾ƒå¥½è¯†åˆ«â€”â€”åªè¦æ˜¯ä¸è§¦å‘å›æµï¼Œä½†åˆè§¦å‘äº†æ ·å¼æ”¹å˜çš„ DOM æ“ä½œï¼Œéƒ½ä¼šå¼•èµ·é‡ç»˜ï¼Œæ¯”å¦‚èƒŒæ™¯è‰²ã€æ–‡å­—è‰²ã€å¯è§æ€§(å¯è§æ€§è¿™é‡Œç‰¹æŒ‡å½¢å¦‚visibility: hiddenè¿™æ ·ä¸æ”¹å˜å…ƒç´ ä½ç½®å’Œå­˜åœ¨æ€§çš„ã€å•çº¯é’ˆå¯¹å¯è§æ€§çš„æ“ä½œï¼Œæ³¨æ„ä¸display:noneè¿›è¡ŒåŒºåˆ†)ç­‰ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬è¦ç€é‡ç†è§£ä¸€ä¸‹é‚£äº›å¯èƒ½è§¦å‘å›æµçš„æ“ä½œã€‚</li></ul><p><strong>1. å›æµçš„â€œå¯¼ç«ç´¢â€</strong></p><p>æœ€â€œè´µâ€çš„æ“ä½œï¼šæ”¹å˜ DOM å…ƒç´ çš„å‡ ä½•å±æ€§</p><ul><li><p>è¿™ä¸ªæ”¹å˜å‡ ä¹å¯ä»¥è¯´æ˜¯â€œç‰µä¸€å‘åŠ¨å…¨èº«â€â€”â€”å½“ä¸€ä¸ªDOMå…ƒç´ çš„å‡ ä½•å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰€æœ‰å’Œå®ƒç›¸å…³çš„èŠ‚ç‚¹ï¼ˆæ¯”å¦‚çˆ¶å­èŠ‚ç‚¹ã€å…„å¼ŸèŠ‚ç‚¹ç­‰ï¼‰çš„å‡ ä½•å±æ€§éƒ½éœ€è¦è¿›è¡Œé‡æ–°è®¡ç®—ï¼Œå®ƒä¼šå¸¦æ¥å·¨å¤§çš„è®¡ç®—é‡ã€‚</p></li><li><p>å¸¸è§çš„å‡ ä½•å±æ€§æœ‰ <code>width</code>ã€<code>height</code>ã€<code>padding</code>ã€<code>margin</code>ã€<code>left</code>ã€<code>top</code>ã€<code>border</code> ç­‰ç­‰ã€‚æ­¤å¤„ä¸å†ç»™å¤§å®¶ä¸€ä¸€åˆ—ä¸¾ã€‚æœ‰çš„æ–‡ç« å–œæ¬¢ç½—åˆ—å±æ€§è¡¨æ ¼ï¼Œä½†æˆ‘ç›¸ä¿¡æˆ‘ä»Šå¤©åˆ—å‡ºæ¥å¤§å®¶ä¹Ÿä¸ä¼šçœ‹ã€çœ‹äº†ä¹Ÿè®°ä¸ä½ï¼ˆå› ä¸ºå¤ªå¤šäº†ï¼‰ã€‚æˆ‘è‡ªå·±ä¹Ÿä¸ä¼šå»è®°è¿™äº›â€”â€”å…¶å®ç¡®å®æ²¡å¿…è¦è®°ï¼Œï¸ä¸€ä¸ªå±æ€§æ˜¯ä¸æ˜¯å‡ ä½•å±æ€§ã€ä¼šä¸ä¼šå¯¼è‡´ç©ºé—´å¸ƒå±€å‘ç”Ÿå˜åŒ–ï¼Œå¤§å®¶å†™æ ·å¼çš„æ—¶å€™å®Œå…¨å¯ä»¥é€šè¿‡ä»£ç æ•ˆæœçœ‹å‡ºæ¥ã€‚å¤šè¯´æ— ç›Šï¼Œè¿˜å¸Œæœ›å¤§å®¶å¯ä»¥å¤šå†™å¤šè¯•ï¼Œå½¢æˆè‡ªå·±çš„â€œè‚Œè‚‰è®°å¿†â€ã€‚</p></li><li><p>â€œä»·æ ¼é€‚ä¸­â€çš„æ“ä½œï¼šæ”¹å˜ DOM æ ‘çš„ç»“æ„</p></li></ul><p>è¿™é‡Œä¸»è¦æŒ‡çš„æ˜¯èŠ‚ç‚¹çš„å¢å‡ã€ç§»åŠ¨ç­‰æ“ä½œã€‚æµè§ˆå™¨å¼•æ“å¸ƒå±€çš„è¿‡ç¨‹ï¼Œé¡ºåºä¸Šå¯ä»¥ç±»æ¯”äºæ ‘çš„å‰åºéå†â€”â€”å®ƒæ˜¯ä¸€ä¸ªä»ä¸Šåˆ°ä¸‹ã€ä»å·¦åˆ°å³çš„è¿‡ç¨‹ã€‚é€šå¸¸åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå½“å‰å…ƒç´ ä¸ä¼šå†å½±å“å…¶å‰é¢å·²ç»éå†è¿‡çš„å…ƒç´ ã€‚</p><ul><li>æœ€å®¹æ˜“è¢«å¿½ç•¥çš„æ“ä½œï¼šè·å–ä¸€äº›ç‰¹å®šå±æ€§çš„å€¼</li></ul><blockquote><p>å½“ä½ è¦ç”¨åˆ°åƒè¿™æ ·çš„å±æ€§ï¼š<code>offsetTop</code>ã€<code>offsetLeft</code>ã€ <code>offsetWidth</code>ã€<code>offsetHeight</code>ã€<code>scrollTop</code>ã€<code>scrollLeft</code>ã€<code>scrollWidth</code>ã€<code>scrollHeight</code>ã€<code>clientTop</code>ã€<code>clientLeft</code>ã€<code>clientWidth</code>ã€<code>clientHeight</code> æ—¶ï¼Œä½ å°±è¦æ³¨æ„äº†ï¼</p></blockquote><ul><li>â€œåƒè¿™æ ·â€çš„å±æ€§ï¼Œåˆ°åº•æ˜¯åƒä»€ä¹ˆæ ·ï¼Ÿâ€”â€”è¿™äº›å€¼æœ‰ä¸€ä¸ªå…±æ€§ï¼Œå°±æ˜¯éœ€è¦é€šè¿‡<strong>å³æ—¶è®¡ç®—</strong> å¾—åˆ°ã€‚å› æ­¤æµè§ˆå™¨ä¸ºäº†è·å–è¿™äº›å€¼ï¼Œä¹Ÿä¼šè¿›è¡Œå›æµã€‚</li><li>é™¤æ­¤ä¹‹å¤–ï¼Œå½“æˆ‘ä»¬è°ƒç”¨äº† <code>getComputedStyle</code> æ–¹æ³•ï¼Œæˆ–è€… IE é‡Œçš„ <code>currentStyle</code> æ—¶ï¼Œä¹Ÿä¼šè§¦å‘å›æµã€‚åŸç†æ˜¯ä¸€æ ·çš„ï¼Œéƒ½ä¸ºæ±‚ä¸€ä¸ªâ€œå³æ—¶æ€§â€å’Œâ€œå‡†ç¡®æ€§â€ã€‚</li></ul><h3 id="å¦‚ä½•è§„é¿å›æµä¸é‡ç»˜" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•è§„é¿å›æµä¸é‡ç»˜"><span>å¦‚ä½•è§„é¿å›æµä¸é‡ç»˜</span></a></h3><p>äº†è§£äº†å›æµä¸é‡ç»˜çš„â€œå¯¼ç«ç´¢â€ï¼Œæˆ‘ä»¬å°±è¦å°½é‡è§„é¿å®ƒä»¬ã€‚ä½†å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬ä¸å¾—ä¸ä½¿ç”¨å®ƒä»¬ã€‚å½“é¿æ— å¯é¿æ—¶ï¼Œæˆ‘ä»¬å°±è¦å­¦ä¼šæ›´èªæ˜åœ°ä½¿ç”¨å®ƒä»¬ã€‚</p><p><strong>1. å°†â€œå¯¼ç«ç´¢â€ç¼“å­˜èµ·æ¥ï¼Œé¿å…é¢‘ç¹æ”¹åŠ¨</strong></p><p>æœ‰æ—¶æˆ‘ä»¬æƒ³è¦é€šè¿‡å¤šæ¬¡è®¡ç®—å¾—åˆ°ä¸€ä¸ªå…ƒç´ çš„å¸ƒå±€ä½ç½®ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šè¿™æ ·åšï¼š</p><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html" data-title="html"><pre><code><span class="line">    <span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ie=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css"></span>
<span class="line">        <span class="token selector">#el</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span></span>
<span class="line">          <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span></span>
<span class="line">          <span class="token property">background-color</span><span class="token punctuation">:</span> yellow<span class="token punctuation">;</span></span>
<span class="line">          <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>el<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>
<span class="line">      <span class="token comment">// è·å–elå…ƒç´ </span></span>
<span class="line">      <span class="token keyword">const</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;el&#39;</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token comment">// è¿™é‡Œå¾ªç¯åˆ¤å®šæ¯”è¾ƒç®€å•ï¼Œå®é™…ä¸­æˆ–è®¸ä¼šæ‹“å±•å‡ºæ¯”è¾ƒå¤æ‚çš„åˆ¤å®šéœ€æ±‚</span></span>
<span class="line">      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">          el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top  <span class="token operator">=</span> el<span class="token punctuation">.</span>offsetTop  <span class="token operator">+</span> <span class="token number">10</span> <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span></span>
<span class="line">          el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> el<span class="token punctuation">.</span>offsetLeft <span class="token operator">+</span> <span class="token number">10</span> <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">      </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>è¿™æ ·åšï¼Œæ¯æ¬¡å¾ªç¯éƒ½éœ€è¦è·å–å¤šæ¬¡â€œæ•æ„Ÿå±æ€§â€ï¼Œæ˜¯æ¯”è¾ƒç³Ÿç³•çš„ã€‚æˆ‘ä»¬å¯ä»¥å°†å…¶ä»¥ JS å˜é‡çš„å½¢å¼ç¼“å­˜èµ·æ¥ï¼Œå¾…è®¡ç®—å®Œæ¯•å†æäº¤ç»™æµè§ˆå™¨å‘å‡ºé‡è®¡ç®—è¯·æ±‚ï¼š</p></blockquote><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token comment">// ç¼“å­˜offsetLeftä¸offsetTopçš„å€¼</span></span>
<span class="line">    <span class="token keyword">const</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;el&#39;</span><span class="token punctuation">)</span> </span>
<span class="line">    <span class="token keyword">let</span> offLeft <span class="token operator">=</span> el<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">,</span> offTop <span class="token operator">=</span> el<span class="token punctuation">.</span>offsetTop</span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// åœ¨JSå±‚é¢è¿›è¡Œè®¡ç®—</span></span>
<span class="line">    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      offLeft <span class="token operator">+=</span> <span class="token number">10</span></span>
<span class="line">      offTop  <span class="token operator">+=</span> <span class="token number">10</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// ä¸€æ¬¡æ€§å°†è®¡ç®—ç»“æœåº”ç”¨åˆ°DOMä¸Š</span></span>
<span class="line">    el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> offLeft <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span></span>
<span class="line">    el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> offTop  <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2. é¿å…é€æ¡æ”¹å˜æ ·å¼ï¼Œä½¿ç”¨ç±»åå»åˆå¹¶æ ·å¼</strong></p><p>æ¯”å¦‚æˆ‘ä»¬å¯ä»¥æŠŠè¿™æ®µå•çº¯çš„ä»£ç ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token keyword">const</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;container&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    container<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token string">&#39;100px&#39;</span></span>
<span class="line">    container<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token string">&#39;200px&#39;</span></span>
<span class="line">    container<span class="token punctuation">.</span>style<span class="token punctuation">.</span>border <span class="token operator">=</span> <span class="token string">&#39;10px solid red&#39;</span></span>
<span class="line">    container<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">&#39;red&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¼˜åŒ–æˆä¸€ä¸ªæœ‰ <code>class</code> åŠ æŒçš„æ ·å­ï¼š</p><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html" data-title="html"><pre><code><span class="line">    <span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ie=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css"></span>
<span class="line">        <span class="token selector">.basic_style</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span></span>
<span class="line">          <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span></span>
<span class="line">          <span class="token property">border</span><span class="token punctuation">:</span> 10px solid red<span class="token punctuation">;</span></span>
<span class="line">          <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>
<span class="line">      <span class="token keyword">const</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;container&#39;</span><span class="token punctuation">)</span></span>
<span class="line">      container<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&#39;basic_style&#39;</span><span class="token punctuation">)</span></span>
<span class="line">      </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å‰è€…æ¯æ¬¡å•ç‹¬æ“ä½œï¼Œéƒ½å»è§¦å‘ä¸€æ¬¡æ¸²æŸ“æ ‘æ›´æ”¹ï¼Œä»è€Œå¯¼è‡´ç›¸åº”çš„å›æµä¸é‡ç»˜è¿‡ç¨‹ã€‚</li><li>åˆå¹¶ä¹‹åï¼Œç­‰äºæˆ‘ä»¬å°†æ‰€æœ‰çš„æ›´æ”¹ä¸€æ¬¡æ€§å‘å‡ºï¼Œç”¨ä¸€ä¸ª style è¯·æ±‚è§£å†³æ‰äº†ã€‚</li></ul><p><strong>3. å°† DOM â€œç¦»çº¿â€</strong></p><p>æˆ‘ä»¬ä¸Šæ–‡æ‰€è¯´çš„å›æµå’Œé‡ç»˜ï¼Œéƒ½æ˜¯åœ¨â€œè¯¥å…ƒç´ ä½äºé¡µé¢ä¸Šâ€çš„å‰æä¸‹ä¼šå‘ç”Ÿçš„ã€‚ä¸€æ—¦æˆ‘ä»¬ç»™å…ƒç´ è®¾ç½® display: noneï¼Œå°†å…¶ä»é¡µé¢ä¸Šâ€œæ‹¿æ‰â€ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„åç»­æ“ä½œï¼Œå°†æ— æ³•è§¦å‘å›æµä¸é‡ç»˜â€”â€”è¿™ä¸ªå°†å…ƒç´ â€œæ‹¿æ‰â€çš„æ“ä½œï¼Œå°±å«åš DOM ç¦»çº¿åŒ–ã€‚</p><p>ä»ä»¥æˆ‘ä»¬ä¸Šæ–‡çš„ä»£ç ç‰‡æ®µä¸ºä¾‹ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token keyword">const</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;container&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    container<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token string">&#39;100px&#39;</span></span>
<span class="line">    container<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token string">&#39;200px&#39;</span></span>
<span class="line">    container<span class="token punctuation">.</span>style<span class="token punctuation">.</span>border <span class="token operator">=</span> <span class="token string">&#39;10px solid red&#39;</span></span>
<span class="line">    container<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">&#39;red&#39;</span></span>
<span class="line">    <span class="token operator">...</span>ï¼ˆçœç•¥äº†è®¸å¤šç±»ä¼¼çš„åç»­æ“ä½œï¼‰</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¦»çº¿åŒ–åå°±æ˜¯è¿™æ ·ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token keyword">let</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;container&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    container<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">&#39;none&#39;</span></span>
<span class="line">    container<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token string">&#39;100px&#39;</span></span>
<span class="line">    container<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token string">&#39;200px&#39;</span></span>
<span class="line">    container<span class="token punctuation">.</span>style<span class="token punctuation">.</span>border <span class="token operator">=</span> <span class="token string">&#39;10px solid red&#39;</span></span>
<span class="line">    container<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">&#39;red&#39;</span></span>
<span class="line">    <span class="token operator">...</span>ï¼ˆçœç•¥äº†è®¸å¤šç±»ä¼¼çš„åç»­æ“ä½œï¼‰</span>
<span class="line">    container<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">&#39;block&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>æœ‰çš„åŒå­¦ä¼šé—®ï¼Œæ‹¿æ‰ä¸€ä¸ªå…ƒç´ å†æŠŠå®ƒæ”¾å›å»ï¼Œè¿™ä¸ä¹Ÿä¼šè§¦å‘ä¸€æ¬¡æ˜‚è´µçš„å›æµå—ï¼Ÿè¿™è¯ä¸å‡ï¼Œä½†æˆ‘ä»¬æŠŠå®ƒæ‹¿ä¸‹æ¥äº†ï¼Œåç»­ä¸ç®¡æˆ‘æ“ä½œè¿™ä¸ªå…ƒç´ å¤šå°‘æ¬¡ï¼Œæ¯ä¸€æ­¥çš„æ“ä½œæˆæœ¬éƒ½ä¼šéå¸¸ä½ã€‚å½“æˆ‘ä»¬åªéœ€è¦è¿›è¡Œå¾ˆå°‘çš„ DOM æ“ä½œæ—¶ï¼ŒDOM ç¦»çº¿åŒ–çš„ä¼˜è¶Šæ€§ç¡®å®ä¸å¤ªæ˜æ˜¾ã€‚ä¸€æ—¦æ“ä½œé¢‘ç¹èµ·æ¥ï¼Œè¿™â€œæ‹¿æ‰â€å’Œâ€œæ”¾å›â€çš„å¼€é”€éƒ½å°†ä¼šæ˜¯éå¸¸å€¼å¾—çš„ã€‚</p></blockquote><h3 id="flush-é˜Ÿåˆ—-æµè§ˆå™¨å¹¶æ²¡æœ‰é‚£ä¹ˆç®€å•" tabindex="-1"><a class="header-anchor" href="#flush-é˜Ÿåˆ—-æµè§ˆå™¨å¹¶æ²¡æœ‰é‚£ä¹ˆç®€å•"><span>Flush é˜Ÿåˆ—ï¼šæµè§ˆå™¨å¹¶æ²¡æœ‰é‚£ä¹ˆç®€å•</span></a></h3><ul><li>ä»¥æˆ‘ä»¬ç°åœ¨çš„çŸ¥è¯†åŸºç¡€ï¼Œç†è§£ä¸Šé¢çš„ä¼˜åŒ–æ“ä½œå¹¶ä¸éš¾ã€‚é‚£ä¹ˆç°åœ¨æˆ‘é—®å¤§å®¶ä¸€ä¸ªé—®é¢˜ï¼š</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token keyword">let</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;container&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    container<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token string">&#39;100px&#39;</span></span>
<span class="line">    container<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token string">&#39;200px&#39;</span></span>
<span class="line">    container<span class="token punctuation">.</span>style<span class="token punctuation">.</span>border <span class="token operator">=</span> <span class="token string">&#39;10px solid red&#39;</span></span>
<span class="line">    container<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">&#39;red&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ®µä»£ç é‡Œï¼Œæµè§ˆå™¨è¿›è¡Œäº†å¤šå°‘æ¬¡çš„å›æµæˆ–é‡ç»˜å‘¢ï¼Ÿ</p><blockquote><p>â€œ<code>width</code>ã€<code>height</code>ã€<code>border</code>æ˜¯å‡ ä½•å±æ€§ï¼Œå„è§¦å‘ä¸€æ¬¡å›æµï¼›<code>color</code>åªé€ æˆå¤–è§‚çš„å˜åŒ–ï¼Œä¼šè§¦å‘ä¸€æ¬¡é‡ç»˜ã€‚â€â€”â€”å¦‚æœä½ ç«‹åˆ»è¿™ä¹ˆæƒ³äº†ï¼Œè¯´æ˜ä½ æ˜¯ä¸ªèƒ½åŠ›ä¸é”™çš„åŒå­¦ï¼Œè®¤çœŸé˜…è¯»äº†å‰é¢çš„å†…å®¹ã€‚é‚£ä¹ˆæˆ‘ä»¬ç°åœ¨ç«‹åˆ»è·‘ä¸€è·‘è¿™æ®µä»£ç ï¼Œçœ‹çœ‹æµè§ˆå™¨æ€ä¹ˆè¯´ï¼š</p></blockquote><p><img src="`+V+'" alt=""></p><ul><li>è¿™é‡Œä¸ºå¤§å®¶æˆªå–æœ‰â€œ<code>Layout</code>â€å’Œâ€œ<code>Paint</code>â€å‡ºé•œçš„ç‰‡æ®µï¼ˆè¿™ä¸ªå›¾æ˜¯é€šè¿‡ Chrome çš„ <code>Performance</code> é¢æ¿å¾—åˆ°çš„ï¼Œåé¢ä¼šæ•™å¤§å®¶ç”¨è¿™ä¸ªä¸œè¥¿ï¼‰ã€‚æˆ‘ä»¬çœ‹åˆ°æµè§ˆå™¨åªè¿›è¡Œäº†ä¸€æ¬¡å›æµå’Œä¸€æ¬¡é‡ç»˜â€”â€”å’Œæˆ‘ä»¬æƒ³çš„ä¸ä¸€æ ·å•Šï¼Œä¸ºå•¥å‘¢ï¼Ÿ</li><li>å› ä¸ºç°ä»£æµè§ˆå™¨æ˜¯å¾ˆèªæ˜çš„ã€‚æµè§ˆå™¨è‡ªå·±ä¹Ÿæ¸…æ¥šï¼Œå¦‚æœæ¯æ¬¡ DOM æ“ä½œéƒ½å³æ—¶åœ°åé¦ˆä¸€æ¬¡å›æµæˆ–é‡ç»˜ï¼Œé‚£ä¹ˆæ€§èƒ½ä¸Šæ¥è¯´æ˜¯æ‰›ä¸ä½çš„ã€‚äºæ˜¯å®ƒè‡ªå·±ç¼“å­˜äº†ä¸€ä¸ª flush é˜Ÿåˆ—ï¼ŒæŠŠæˆ‘ä»¬è§¦å‘çš„å›æµä¸é‡ç»˜ä»»åŠ¡éƒ½å¡è¿›å»ï¼Œå¾…åˆ°é˜Ÿåˆ—é‡Œçš„ä»»åŠ¡å¤šèµ·æ¥ã€æˆ–è€…è¾¾åˆ°äº†ä¸€å®šçš„æ—¶é—´é—´éš”ï¼Œæˆ–è€…â€œä¸å¾—å·²â€çš„æ—¶å€™ï¼Œå†å°†è¿™äº›ä»»åŠ¡ä¸€å£æ°”å‡ºé˜Ÿã€‚å› æ­¤æˆ‘ä»¬çœ‹åˆ°ï¼Œä¸Šé¢å°±ç®—æˆ‘ä»¬è¿›è¡Œäº† 4 æ¬¡ DOM æ›´æ”¹ï¼Œä¹Ÿåªè§¦å‘äº†ä¸€æ¬¡ <code>Layout</code> å’Œä¸€æ¬¡ <code>Paint</code>ã€‚</li></ul><blockquote><p>å¤§å®¶è¿™é‡Œå°¤å…¶å°å¿ƒè¿™ä¸ªâ€œä¸å¾—å·²â€çš„æ—¶å€™ã€‚å‰é¢æˆ‘ä»¬åœ¨ä»‹ç»å›æµçš„â€œå¯¼ç«ç´¢â€çš„æ—¶å€™ï¼Œæåˆ°è¿‡æœ‰ä¸€ç±»å±æ€§å¾ˆç‰¹åˆ«ï¼Œå®ƒä»¬æœ‰å¾ˆå¼ºçš„â€œå³æ—¶æ€§â€ã€‚å½“æˆ‘ä»¬è®¿é—®è¿™äº›å±æ€§æ—¶ï¼Œæµè§ˆå™¨ä¼šä¸ºäº†è·å¾—æ­¤æ—¶æ­¤åˆ»çš„ã€æœ€å‡†ç¡®çš„å±æ€§å€¼ï¼Œè€Œæå‰å°† flush é˜Ÿåˆ—çš„ä»»åŠ¡å‡ºé˜Ÿâ€”â€”è¿™å°±æ˜¯æ‰€è°“çš„â€œä¸å¾—å·²â€æ—¶åˆ»ã€‚å…·ä½“æ˜¯å“ªäº›å±æ€§å€¼ï¼Œæˆ‘ä»¬å·²ç»åœ¨â€œæœ€å®¹æ˜“è¢«å¿½ç•¥çš„æ“ä½œâ€è¿™ä¸ªå°æ¨¡å—ä»‹ç»è¿‡äº†ï¼Œæ­¤å¤„ä¸å†èµ˜è¿°ã€‚</p></blockquote><h3 id="å°ç»“-5" tabindex="-1"><a class="header-anchor" href="#å°ç»“-5"><span>å°ç»“</span></a></h3><ul><li>æ•´ä¸ªä¸€èŠ‚è¯»ä¸‹æ¥ï¼Œå¯èƒ½ä¼šæœ‰åŒå­¦æ„Ÿåˆ°ç–‘æƒ‘ï¼šæ—¢ç„¶æµè§ˆå™¨å·²ç»ä¸ºæˆ‘ä»¬åšäº†æ‰¹å¤„ç†ä¼˜åŒ–ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬è¿˜è¦è‡ªå·±æ“å¿ƒè¿™ä¹ˆå¤šäº‹æƒ…å‘¢ï¼Ÿä»Šå¤©é¿å…è¿™ä¸ªæ˜å¤©é¿å…é‚£ä¸ªï¼Œå¤šéº»çƒ¦ï¼</li><li>é—®é¢˜åœ¨äºï¼Œ<strong>å¹¶ä¸æ˜¯æ‰€æœ‰çš„æµè§ˆå™¨éƒ½æ˜¯èªæ˜çš„</strong> ã€‚æˆ‘ä»¬åˆšåˆšçš„æ€§èƒ½å›¾è¡¨ï¼Œæ˜¯ Chrome çš„å¼€å‘è€…å·¥å…·å‘ˆç°ç»™æˆ‘ä»¬çš„ã€‚Chrome é‡Œè¡Œå¾—é€šçš„ä¸œè¥¿ï¼Œåˆ°äº†åˆ«å¤„ï¼ˆæ¯”å¦‚ IEï¼‰å°±ä¸ä¸€å®šè¡Œå¾—é€šäº†ã€‚è€Œæˆ‘ä»¬å¹¶ä¸çŸ¥é“ç”¨æˆ·ä¼šä½¿ç”¨ä»€ä¹ˆæ ·çš„æµè§ˆå™¨ã€‚å¦‚æœä¸æ‰‹åŠ¨åšä¼˜åŒ–ï¼Œé‚£ä¹ˆä¸€ä¸ªé¡µé¢åœ¨ä¸åŒçš„ç¯å¢ƒä¸‹å°±ä¼šå‘ˆç°ä¸åŒçš„æ€§èƒ½æ•ˆæœï¼Œè¿™å¯¹æˆ‘ä»¬ã€å¯¹ç”¨æˆ·éƒ½æ˜¯ä¸åˆ©çš„ã€‚å› æ­¤ï¼Œå…»æˆè‰¯å¥½çš„ç¼–ç ä¹ æƒ¯ã€ä»æ ¹æºä¸Šè§£å†³é—®é¢˜ï¼Œä»ç„¶æ˜¯æœ€å‘¨å…¨çš„æ–¹æ³•ã€‚</li></ul><h2 id="åäºŒã€åº”ç”¨ç¯‡-1-ä¼˜åŒ–é¦–å±ä½“éªŒâ€”â€”lazy-load-åˆæ¢" tabindex="-1"><a class="header-anchor" href="#åäºŒã€åº”ç”¨ç¯‡-1-ä¼˜åŒ–é¦–å±ä½“éªŒâ€”â€”lazy-load-åˆæ¢"><span>åäºŒã€åº”ç”¨ç¯‡ 1ï¼šä¼˜åŒ–é¦–å±ä½“éªŒâ€”â€”Lazy-Load åˆæ¢</span></a></h2><p>é¦–å…ˆè¦å‘Šè¯‰å¤§å®¶çš„æ˜¯ï¼Œæˆªæ­¢åˆ°ä¸Šä¸ªç« èŠ‚ï¼Œæˆ‘ä»¬éœ€è¦å¤§å®¶ç»å°½è„‘æ±å»ç†è§£çš„â€œç¡¬æ ¸â€æ“ä½œåŸºæœ¬å‘Šä¸€æ®µè½äº†ã€‚ä»æœ¬èŠ‚å¼€å§‹ï¼Œæˆ‘ä»¬ä¼šä¸€èµ·å»å®ç°ä¸€äº›å¿…çŸ¥å¿…ä¼šã€åŒæ—¶éš¾åº¦ä¸å¤§çš„å¸¸ç”¨ä¼˜åŒ–æ‰‹æ®µã€‚</p><p>è¿™éƒ¨åˆ†å†…å®¹ä¸éš¾ï¼Œä½†<strong>å¾ˆå…³é”®</strong> ã€‚å°¤å…¶æ˜¯è¿‘æœŸæœ‰æ ¡æ‹›æˆ–è·³æ§½éœ€æ±‚çš„åŒå­¦ï¼Œè¿˜è¯·åŠ¡å¿…å¯¹è¿™éƒ¨åˆ†å†…å®¹å¤šåŠ ç•™å¿ƒï¼Œè¯´ä¸å®šä¸‹ä¸€æ¬¡çš„é¢è¯•é¢˜é‡Œå°±æœ‰å®ƒä»¬çš„èº«å½±ã€‚</p><h3 id="lazy-load-åˆç›¸è§" tabindex="-1"><a class="header-anchor" href="#lazy-load-åˆç›¸è§"><span>Lazy-Load åˆç›¸è§</span></a></h3><blockquote><p><code>Lazy- Load</code>ï¼Œç¿»è¯‘è¿‡æ¥æ˜¯â€œæ‡’åŠ è½½â€ã€‚å®ƒæ˜¯é’ˆå¯¹å›¾ç‰‡åŠ è½½æ—¶æœºçš„ä¼˜åŒ–ï¼šåœ¨ä¸€äº›å›¾ç‰‡é‡æ¯”è¾ƒå¤§çš„ç½‘ç«™ï¼ˆæ¯”å¦‚ç”µå•†ç½‘ç«™é¦–é¡µï¼Œæˆ–è€…å›¢è´­ç½‘ç«™ã€å°æ¸¸æˆé¦–é¡µç­‰ï¼‰ï¼Œå¦‚æœæˆ‘ä»¬å°è¯•åœ¨ç”¨æˆ·æ‰“å¼€é¡µé¢çš„æ—¶å€™ï¼Œå°±æŠŠæ‰€æœ‰çš„å›¾ç‰‡èµ„æºåŠ è½½å®Œæ¯•ï¼Œé‚£ä¹ˆå¾ˆå¯èƒ½ä¼šé€ æˆç™½å±ã€å¡é¡¿ç­‰ç°è±¡ï¼Œå› ä¸ºå›¾ç‰‡çœŸçš„å¤ªå¤šäº†ï¼Œä¸€å£æ°”å¤„ç†è¿™ä¹ˆå¤šä»»åŠ¡ï¼Œæµè§ˆå™¨åšä¸åˆ°å•Šï¼</p></blockquote><p>ä½†æˆ‘ä»¬å†æƒ³ï¼Œç”¨æˆ·çœŸçš„éœ€è¦è¿™ä¹ˆå¤šå›¾ç‰‡å—ï¼Ÿä¸å¯¹ï¼Œç”¨æˆ·ç‚¹å¼€é¡µé¢çš„ç¬é—´ï¼Œå‘ˆç°ç»™ä»–çš„åªæœ‰å±å¹•çš„ä¸€éƒ¨åˆ†ï¼ˆæˆ‘ä»¬ç§°ä¹‹ä¸ºé¦–å±ï¼‰ã€‚åªè¦æˆ‘ä»¬å¯ä»¥åœ¨é¡µé¢æ‰“å¼€çš„æ—¶å€™æŠŠé¦–å±çš„å›¾ç‰‡èµ„æºåŠ è½½å‡ºæ¥ï¼Œç”¨æˆ·å°±ä¼šè®¤ä¸ºé¡µé¢æ˜¯æ²¡é—®é¢˜çš„ã€‚è‡³äºä¸‹é¢çš„å›¾ç‰‡ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥ç­‰ç”¨æˆ·ä¸‹æ‹‰çš„ç¬é—´å†å³æ—¶å»è¯·æ±‚ã€å³æ—¶å‘ˆç°ç»™ä»–ã€‚è¿™æ ·ä¸€æ¥ï¼Œæ€§èƒ½çš„å‹åŠ›å°äº†ï¼Œç”¨æˆ·çš„ä½“éªŒå´æ²¡æœ‰å˜å·®â€”â€”è¿™ä¸ªå»¶è¿ŸåŠ è½½çš„è¿‡ç¨‹ï¼Œå°±æ˜¯ <code>Lazy-Load</code>ã€‚</p><p>ç°åœ¨æˆ‘ä»¬æ‰“å¼€æ˜é‡‘é¦–é¡µï¼š</p><p><img src="'+F+'" alt=""></p><p>å¤§å®¶ç•™æ„ä¸€æ æ–‡ç« å³ä¾§å¯èƒ½ä¼šå‡ºç°çš„å›¾ç‰‡ï¼Œè¿™é‡Œå’±ä»¬ç»™ä¸ªç‰¹å†™ï¼š</p><p><img src="'+X+'" alt=""></p><p>å¤§å®¶ç°åœ¨ä»¥å°½å¯èƒ½å¿«çš„é€Ÿåº¦ï¼Œç–¯ç‹‚å‘ä¸‹æ‹‰åŠ¨é¡µé¢ã€‚å‘ç°ä»€ä¹ˆï¼Ÿæ˜¯ä¸æ˜¯å‘ç°æˆ‘ä»¬å›¾ç¤ºçš„è¿™ä¸ªå›¾ç‰‡çš„ä½ç½®ï¼Œä¼šå‡ºç°é—ªåŠ¨â€”â€”æœ‰æ—¶å€™æˆ‘ä»¬æ˜æ˜å·²ç»æ‹‰åˆ°ç›®æ ‡ä½ç½®äº†ï¼Œæ–‡å­—ä¹Ÿå‘ˆç°å®Œæ¯•äº†ï¼Œå›¾ç‰‡å´æ…¢åŠæ‹æ‰æ˜¾ç¤ºå‡ºæ¥ã€‚è¿™æ˜¯å› ä¸ºï¼Œæ˜é‡‘é¦–é¡µä¹Ÿé‡‡ç”¨äº†æ‡’åŠ è½½ç­–ç•¥ã€‚å½“æˆ‘ä»¬çš„é¡µé¢å¹¶æœªæ»šåŠ¨è‡³åŒ…å«å›¾ç‰‡çš„ div å…ƒç´ æ‰€åœ¨çš„ä½ç½®æ—¶ï¼Œå®ƒçš„æ ·å¼æ˜¯è¿™æ ·çš„ï¼š</p><p><img src="'+Y+`" alt=""></p><p>æˆ‘ä»¬æŠŠä»£ç æå‡ºæ¥çœ‹ä¸€ä¸‹ï¼š</p><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html" data-title="html"><pre><code><span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">data-v-b2db8566</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> </span>
<span class="line">        <span class="token attr-name">data-v-009ea7bb</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> </span>
<span class="line">        <span class="token attr-name">data-v-6b46a625</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span>   </span>
<span class="line">        <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://user-gold-cdn.xitu.io/2018/9/27/16619f449ee24252?imageView2/1/w/120/h/120/q/85/format/webp/interlace/1<span class="token punctuation">&quot;</span></span>    </span>
<span class="line">        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lazy thumb thumb<span class="token punctuation">&quot;</span></span>    </span>
<span class="line">        <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">background-image</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span> <span class="token property">background-size</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>  </span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>æˆ‘ä»¬æ³¨æ„åˆ° <code>style</code> å†…è”æ ·å¼ä¸­ï¼ŒèƒŒæ™¯å›¾ç‰‡è®¾ç½®ä¸ºäº† <code>none</code>ã€‚ä¹Ÿå°±æ˜¯è¯´è¿™ä¸ª <code>div</code> æ˜¯æ²¡æœ‰å†…å®¹çš„ï¼Œå®ƒåªèµ·åˆ°ä¸€ä¸ª<strong>å ä½</strong> çš„ä½œç”¨ã€‚</li><li>è¿™ä¸ªâ€œå ä½â€çš„æ¦‚å¿µï¼Œåœ¨è¿™ä¸ªä¾‹å­é‡Œæˆ–è®¸ä½“ç°å¾—ä¸å¤Ÿç›´è§‚ã€‚æœ€ç›´è§‚çš„åº”è¯¥æ˜¯æ·˜å®é¦–é¡µçš„ HTML Preview æ•ˆæœï¼š</li></ul><p><img src="`+Z+'" alt=""></p><ul><li>æˆ‘ä»¬çœ‹åˆ°ï¼Œè¿™ä¸ªè¿˜æ²¡æ¥å¾—åŠè¢«å›¾ç‰‡å¡«å……å®Œå…¨çš„ç½‘é¡µï¼Œæ˜¯ç”¨å¤§å¤§å°å°çš„ç©º <code>div</code> å…ƒç´ æ¥å ä½çš„ã€‚æ˜é‡‘é¦–é¡µä¹Ÿæ˜¯å¦‚æ­¤ã€‚</li><li>ä¸€æ—¦æˆ‘ä»¬é€šè¿‡æ»šåŠ¨ä½¿å¾—è¿™ä¸ª <code>div</code> å‡ºç°åœ¨äº†å¯è§èŒƒå›´å†…ï¼Œé‚£ä¹ˆ <code>div</code> å…ƒç´ çš„å†…å®¹å°±ä¼šå‘ç”Ÿå˜åŒ–ï¼Œå‘ˆç°å¦‚ä¸‹çš„å†…å®¹ï¼š</li></ul><p><img src="'+Q+`" alt=""></p><p>æˆ‘ä»¬ç»™ <code>style</code> ä¸€ä¸ªç‰¹å†™ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    style<span class="token operator">=</span><span class="token string">&quot;background-image: url(&amp;quot;https://user-gold-cdn.xitu.io/2018/9/27/16619f449ee24252?imageView2/1/w/120/h/120/q/85/format/webp/interlace/1&amp;quot;); background-size: cover;&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>å¯ä»¥çœ‹å‡ºï¼Œ<code>style</code> å†…è”æ ·å¼ä¸­çš„èƒŒæ™¯å›¾ç‰‡å±æ€§ä» <code>none</code> å˜æˆäº†ä¸€ä¸ªåœ¨çº¿å›¾ç‰‡çš„ <code>URL</code>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå‡ºç°åœ¨å¯è§†åŒºåŸŸçš„ç¬é—´ï¼Œdiv å…ƒç´ çš„å†…å®¹è¢«å³æ—¶åœ°ä¿®æ”¹æ‰äº†â€”â€”å®ƒè¢«å†™å…¥äº†æœ‰æ•ˆçš„å›¾ç‰‡ URLï¼Œäºæ˜¯å›¾ç‰‡æ‰å¾—ä»¥å‘ˆç°ã€‚è¿™å°±æ˜¯æ‡’åŠ è½½çš„å®ç°æ€è·¯ã€‚</p></blockquote><h3 id="ä¸€èµ·å†™ä¸€ä¸ª-lazy-load-å§" tabindex="-1"><a class="header-anchor" href="#ä¸€èµ·å†™ä¸€ä¸ª-lazy-load-å§"><span>ä¸€èµ·å†™ä¸€ä¸ª Lazy-Load å§ï¼</span></a></h3><p>åŸºäºä¸Šé¢çš„å®ç°æ€è·¯ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥æ‰‹åŠ¨å®ç°ä¸€ä¸ªå±äºè‡ªå·±çš„ <code>Lazy-Load</code>ã€‚</p><p><strong>æ­¤å¤„æ•²é»‘æ¿åˆ’é‡ç‚¹ï¼ŒLazy-Load çš„æ€è·¯åŠå®ç°æ–¹å¼ä¸ºå¤§å‚é¢è¯•å¸¸è€ƒé¢˜ï¼Œè¿˜æœ›è¯¸ä½åŒå­¦å¼•èµ·é‡è§†</strong></p><p>é¦–å…ˆæ–°å»ºä¸€ä¸ªç©ºé¡¹ç›®ï¼Œç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="`+K+`" alt=""></p><ul><li>å¤§å®¶å¯ä»¥å¾€ <code>images</code> æ–‡ä»¶å¤¹é‡Œå¡å…¥å„ç§å„æ ·è‡ªå·±å–œæ¬¢çš„å›¾ç‰‡ã€‚</li><li>æˆ‘ä»¬åœ¨ <code>index.html</code> ä¸­ï¼Œä¸ºè¿™äº›å›¾ç‰‡é¢„ç½® <code>img</code> æ ‡ç­¾ï¼š</li></ul><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html" data-title="html"><pre><code><span class="line">    <span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ie=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Lazy-Load<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css"></span>
<span class="line">        <span class="token selector">.img</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span></span>
<span class="line">          <span class="token property">height</span><span class="token punctuation">:</span>200px<span class="token punctuation">;</span></span>
<span class="line">          <span class="token property">background-color</span><span class="token punctuation">:</span> gray<span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token selector">.pic</span> <span class="token punctuation">{</span></span>
<span class="line">          // å¿…è¦çš„imgæ ·å¼</span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>img<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">          // æ³¨æ„æˆ‘ä»¬å¹¶æ²¡æœ‰ä¸ºå®ƒå¼•å…¥çœŸå®çš„src</span>
<span class="line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pic<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>åŠ è½½ä¸­<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/1.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>img<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pic<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>åŠ è½½ä¸­<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/2.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>img<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pic<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>åŠ è½½ä¸­<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/3.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>img<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pic<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>åŠ è½½ä¸­<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/4.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>img<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pic<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>åŠ è½½ä¸­<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/5.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>img<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pic<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>åŠ è½½ä¸­<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/6.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>img<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pic<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>åŠ è½½ä¸­<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/7.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>img<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pic<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>åŠ è½½ä¸­<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/8.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>img<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pic<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>åŠ è½½ä¸­<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/9.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>img<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pic<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>åŠ è½½ä¸­<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./images/10.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>åœ¨æ‡’åŠ è½½çš„å®ç°ä¸­ï¼Œæœ‰ä¸¤ä¸ªå…³é”®çš„æ•°å€¼ï¼šä¸€ä¸ªæ˜¯<strong>å½“å‰å¯è§†åŒºåŸŸçš„é«˜åº¦</strong> ï¼Œå¦ä¸€ä¸ªæ˜¯<strong>å…ƒç´ è·ç¦»å¯è§†åŒºåŸŸé¡¶éƒ¨çš„é«˜åº¦</strong> ã€‚</li><li><strong>å½“å‰å¯è§†åŒºåŸŸçš„é«˜åº¦</strong> ï¼Œ åœ¨å’Œç°ä»£æµè§ˆå™¨åŠ IE9 ä»¥ä¸Šçš„æµè§ˆå™¨ä¸­ï¼Œå¯ä»¥ç”¨ <code>window.innerHeight</code> å±æ€§è·å–ã€‚åœ¨ä½ç‰ˆæœ¬ IE çš„æ ‡å‡†æ¨¡å¼ä¸­ï¼Œå¯ä»¥ç”¨ <code>document.documentElement.clientHeight</code> è·å–ï¼Œè¿™é‡Œæˆ‘ä»¬å…¼å®¹ä¸¤ç§æƒ…å†µï¼š</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token keyword">const</span> viewHeight <span class="token operator">=</span> window<span class="token punctuation">.</span>innerHeight <span class="token operator">||</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è€Œ<strong>å…ƒç´ è·ç¦»å¯è§†åŒºåŸŸé¡¶éƒ¨çš„é«˜åº¦</strong> ï¼Œæˆ‘ä»¬è¿™é‡Œé€‰ç”¨ <code>getBoundingClientRect()</code> æ–¹æ³•æ¥è·å–è¿”å›å…ƒç´ çš„å¤§å°åŠå…¶ç›¸å¯¹äºè§†å£çš„ä½ç½®ã€‚å¯¹æ­¤ MDN ç»™å‡ºäº†éå¸¸æ¸…æ™°çš„è§£é‡Šï¼š</p><blockquote><p>è¯¥æ–¹æ³•çš„è¿”å›å€¼æ˜¯ä¸€ä¸ª <code>DOMRect</code> å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æ˜¯ç”±è¯¥å…ƒç´ çš„ <code>getClientRects()</code> æ–¹æ³•è¿”å›çš„ä¸€ç»„çŸ©å½¢çš„é›†åˆ, å³ï¼šæ˜¯ä¸è¯¥å…ƒç´ ç›¸å…³çš„ <code>CSS</code> è¾¹æ¡†é›†åˆ ã€‚</p></blockquote><blockquote><p><code>DOMRect</code> å¯¹è±¡åŒ…å«äº†ä¸€ç»„ç”¨äºæè¿°è¾¹æ¡†çš„åªè¯»å±æ€§â€”â€”<code>left</code>ã€<code>top</code>ã€<code>right</code> å’Œ <code>bottom</code>ï¼Œå•ä½ä¸ºåƒç´ ã€‚é™¤äº† <code>width</code> å’Œ <code>height</code> å¤–çš„å±æ€§éƒ½æ˜¯ç›¸å¯¹äºè§†å£çš„å·¦ä¸Šè§’ä½ç½®è€Œè¨€çš„ã€‚</p></blockquote><p>å…¶ä¸­éœ€è¦å¼•èµ·æˆ‘ä»¬æ³¨æ„çš„å°±æ˜¯ <code>left</code>ã€<code>top</code>ã€<code>right</code> å’Œ <code>bottom</code>ï¼Œå®ƒä»¬å¯¹åº”åˆ°å…ƒç´ ä¸Šæ˜¯è¿™æ ·çš„ï¼š</p><p><img src="`+$+`" alt=""></p><p>å¯ä»¥çœ‹å‡ºï¼Œ<code>top</code> å±æ€§ä»£è¡¨äº†å…ƒç´ è·ç¦»å¯è§†åŒºåŸŸé¡¶éƒ¨çš„é«˜åº¦ï¼Œæ­£å¥½å¯ä»¥ä¸ºæˆ‘ä»¬æ‰€ç”¨ï¼</p><p>Lazy-Load æ–¹æ³•å¼€å·¥å•¦ï¼</p><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html" data-title="html"><pre><code><span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>
<span class="line">        <span class="token comment">// è·å–æ‰€æœ‰çš„å›¾ç‰‡æ ‡ç­¾</span></span>
<span class="line">        <span class="token keyword">const</span> imgs <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&#39;img&#39;</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token comment">// è·å–å¯è§†åŒºåŸŸçš„é«˜åº¦</span></span>
<span class="line">        <span class="token keyword">const</span> viewHeight <span class="token operator">=</span> window<span class="token punctuation">.</span>innerHeight <span class="token operator">||</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight</span>
<span class="line">        <span class="token comment">// numç”¨äºç»Ÿè®¡å½“å‰æ˜¾ç¤ºåˆ°äº†å“ªä¸€å¼ å›¾ç‰‡ï¼Œé¿å…æ¯æ¬¡éƒ½ä»ç¬¬ä¸€å¼ å›¾ç‰‡å¼€å§‹æ£€æŸ¥æ˜¯å¦éœ²å‡º</span></span>
<span class="line">        <span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line">        <span class="token keyword">function</span> <span class="token function">lazyload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span>num<span class="token punctuation">;</span> i<span class="token operator">&lt;</span>imgs<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token comment">// ç”¨å¯è§†åŒºåŸŸé«˜åº¦å‡å»å…ƒç´ é¡¶éƒ¨è·ç¦»å¯è§†åŒºåŸŸé¡¶éƒ¨çš„é«˜åº¦</span></span>
<span class="line">                <span class="token keyword">let</span> distance <span class="token operator">=</span> viewHeight <span class="token operator">-</span> imgs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>top</span>
<span class="line">                <span class="token comment">// å¦‚æœå¯è§†åŒºåŸŸé«˜åº¦å¤§äºç­‰äºå…ƒç´ é¡¶éƒ¨è·ç¦»å¯è§†åŒºåŸŸé¡¶éƒ¨çš„é«˜åº¦ï¼Œè¯´æ˜å…ƒç´ éœ²å‡º</span></span>
<span class="line">                <span class="token keyword">if</span><span class="token punctuation">(</span>distance <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">                    <span class="token comment">// ç»™å…ƒç´ å†™å…¥çœŸå®çš„srcï¼Œå±•ç¤ºå›¾ç‰‡</span></span>
<span class="line">                    imgs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>src <span class="token operator">=</span> imgs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&#39;data-src&#39;</span><span class="token punctuation">)</span></span>
<span class="line">                    <span class="token comment">// å‰iå¼ å›¾ç‰‡å·²ç»åŠ è½½å®Œæ¯•ï¼Œä¸‹æ¬¡ä»ç¬¬i+1å¼ å¼€å§‹æ£€æŸ¥æ˜¯å¦éœ²å‡º</span></span>
<span class="line">                    num <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token comment">// ç›‘å¬Scrolläº‹ä»¶</span></span>
<span class="line">        window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;scroll&#39;</span><span class="token punctuation">,</span> lazyload<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å°ç»“-6" tabindex="-1"><a class="header-anchor" href="#å°ç»“-6"><span>å°ç»“</span></a></h3><ul><li>æœ¬èŠ‚æˆ‘ä»¬å®ç°å‡ºäº†ä¸€ä¸ªæœ€åŸºæœ¬çš„æ‡’åŠ è½½åŠŸèƒ½ã€‚ä½†æ˜¯å¤§å®¶è¦æ³¨æ„ä¸€ç‚¹ï¼šè¿™ä¸ª <code>scroll</code> äº‹ä»¶ï¼Œæ˜¯ä¸€ä¸ª<strong>å±é™©</strong> çš„äº‹ä»¶â€”â€”å®ƒå¤ªå®¹æ˜“è¢«è§¦å‘äº†ã€‚è¯•æƒ³ï¼Œç”¨æˆ·åœ¨è®¿é—®ç½‘é¡µçš„æ—¶å€™ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥æ— é™æ¬¡åœ°å»è§¦å‘æ»šåŠ¨ï¼Ÿå°¤å…¶æ˜¯ä¸€ä¸ªé¡µé¢æ­»æ´»åŠ è½½ä¸å‡ºæ¥çš„æ—¶å€™ï¼Œç–¯ç‹‚è°ƒæˆé¼ æ ‡æ»šè½®ï¼ˆæˆ–è€…æµè§ˆå™¨æ»šåŠ¨æ¡ï¼‰çš„ç”¨æˆ·å¯ä¸åœ¨å°‘æ•°å•Šï¼</li><li>å†å›å¤´çœ‹çœ‹æˆ‘ä»¬ä¸Šé¢å†™çš„ä»£ç ã€‚æŒ‰ç…§æˆ‘ä»¬çš„é€»è¾‘ï¼Œç”¨æˆ·çš„æ¯ä¸€æ¬¡æ»šåŠ¨éƒ½å°†è§¦å‘æˆ‘ä»¬çš„ç›‘å¬å‡½æ•°ã€‚å‡½æ•°æ‰§è¡Œæ˜¯åƒæ€§èƒ½çš„ï¼Œé¢‘ç¹åœ°å“åº”æŸä¸ªäº‹ä»¶å°†é€ æˆå¤§é‡ä¸å¿…è¦çš„é¡µé¢è®¡ç®—ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦é’ˆå¯¹é‚£äº›æœ‰å¯èƒ½è¢«é¢‘ç¹è§¦å‘çš„äº‹ä»¶ä½œè¿›ä¸€æ­¥åœ°ä¼˜åŒ–ã€‚è¿™é‡Œå°±å¼•å‡ºäº†æˆ‘ä»¬ä¸‹ä¸€èŠ‚çš„ä¸¤ä½ä¸»è§’â€”â€”<code>throttle</code> ä¸ <code>debounce</code>ã€‚</li></ul><h2 id="åä¸‰ã€åº”ç”¨ç¯‡-2-äº‹ä»¶çš„èŠ‚æµ-throttle-ä¸é˜²æŠ–-debounce" tabindex="-1"><a class="header-anchor" href="#åä¸‰ã€åº”ç”¨ç¯‡-2-äº‹ä»¶çš„èŠ‚æµ-throttle-ä¸é˜²æŠ–-debounce"><span>åä¸‰ã€åº”ç”¨ç¯‡ 2ï¼šäº‹ä»¶çš„èŠ‚æµï¼ˆthrottleï¼‰ä¸é˜²æŠ–ï¼ˆdebounceï¼‰</span></a></h2><blockquote><p>ä¸Šä¸€èŠ‚æˆ‘ä»¬ä¸€èµ·é€šè¿‡ç›‘å¬æ»šåŠ¨äº‹ä»¶ï¼Œå®ç°äº†å„å¤§ç½‘ç«™å–œé—»ä¹è§çš„æ‡’åŠ è½½æ•ˆæœã€‚ä½†æˆ‘ä»¬æåˆ°ï¼Œ<code>scroll</code> äº‹ä»¶æ˜¯ä¸€ä¸ªéå¸¸å®¹æ˜“è¢«åå¤è§¦å‘çš„äº‹ä»¶ã€‚å…¶å®ä¸æ­¢ <code>scroll</code> äº‹ä»¶ï¼Œ<code>resize</code> äº‹ä»¶ã€é¼ æ ‡äº‹ä»¶ï¼ˆæ¯”å¦‚ <code>mousemove</code>ã€<code>mouseover</code> ç­‰ï¼‰ã€é”®ç›˜äº‹ä»¶ï¼ˆ<code>keyup</code>ã€<code>keydown</code> ç­‰ï¼‰éƒ½å­˜åœ¨è¢«é¢‘ç¹è§¦å‘çš„é£é™©ã€‚</p></blockquote><ul><li>é¢‘ç¹è§¦å‘å›è°ƒå¯¼è‡´çš„å¤§é‡è®¡ç®—ä¼šå¼•å‘é¡µé¢çš„æŠ–åŠ¨ç”šè‡³å¡é¡¿ã€‚ä¸ºäº†è§„é¿è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬éœ€è¦ä¸€äº›æ‰‹æ®µæ¥æ§åˆ¶äº‹ä»¶è¢«è§¦å‘çš„é¢‘ç‡ã€‚å°±æ˜¯åœ¨è¿™æ ·çš„èƒŒæ™¯ä¸‹ï¼Œ<code>throttle</code>ï¼ˆäº‹ä»¶èŠ‚æµï¼‰å’Œ <code>debounce</code>ï¼ˆäº‹ä»¶é˜²æŠ–ï¼‰å‡ºç°äº†ã€‚</li></ul><h3 id="èŠ‚æµ-ä¸-é˜²æŠ–-çš„æœ¬è´¨" tabindex="-1"><a class="header-anchor" href="#èŠ‚æµ-ä¸-é˜²æŠ–-çš„æœ¬è´¨"><span>â€œèŠ‚æµâ€ä¸â€œé˜²æŠ–â€çš„æœ¬è´¨</span></a></h3><p>è¿™ä¸¤ä¸ªä¸œè¥¿éƒ½ä»¥<strong>é—­åŒ…</strong> çš„å½¢å¼å­˜åœ¨ã€‚</p><p>å®ƒä»¬é€šè¿‡å¯¹äº‹ä»¶å¯¹åº”çš„å›è°ƒå‡½æ•°è¿›è¡ŒåŒ…è£¹ã€ä»¥è‡ªç”±å˜é‡çš„å½¢å¼ç¼“å­˜æ—¶é—´ä¿¡æ¯ï¼Œæœ€åç”¨ setTimeout æ¥æ§åˆ¶äº‹ä»¶çš„è§¦å‘é¢‘ç‡ã€‚</p><h3 id="throttle-ç¬¬ä¸€ä¸ªäººè¯´äº†ç®—" tabindex="-1"><a class="header-anchor" href="#throttle-ç¬¬ä¸€ä¸ªäººè¯´äº†ç®—"><span>Throttleï¼š ç¬¬ä¸€ä¸ªäººè¯´äº†ç®—</span></a></h3><blockquote><p><code>throttle</code> çš„ä¸­å¿ƒæ€æƒ³åœ¨äºï¼šåœ¨æŸæ®µæ—¶é—´å†…ï¼Œä¸ç®¡ä½ è§¦å‘äº†å¤šå°‘æ¬¡å›è°ƒï¼Œæˆ‘éƒ½åªè®¤ç¬¬ä¸€æ¬¡ï¼Œå¹¶åœ¨è®¡æ—¶ç»“æŸæ—¶ç»™äºˆå“åº”ã€‚</p></blockquote><p>å…ˆç»™å¤§å®¶è®²ä¸ªå°æ•…äº‹ï¼šç°åœ¨æœ‰ä¸€ä¸ªæ—…å®¢åˆšä¸‹äº†é£æœºï¼Œéœ€è¦ç”¨è½¦ï¼Œäºæ˜¯æ‰“ç”µè¯å«äº†è¯¥æœºåœºå”¯ä¸€çš„ä¸€è¾†æœºåœºå¤§å·´æ¥æ¥ã€‚å¸æœºå¼€åˆ°æœºåœºï¼Œå¿ƒæƒ³æ¥éƒ½æ¥äº†ï¼Œå¤šæ¥å‡ ä¸ªäººä¸€èµ·èµ°å§ï¼Œè¿™æ ·è¿™è¶Ÿæ‰è·‘å¾—å€¼â€”â€”æˆ‘ç­‰ä¸ªååˆ†é’Ÿçœ‹çœ‹ã€‚äºæ˜¯å¸æœºä¸€è¾¹æ‰“å¼€äº†è®¡æ—¶å™¨ï¼Œä¸€è¾¹æ‹›å‘¼åé¢çš„å®¢äººé™†é™†ç»­ç»­ä¸Šè½¦ã€‚åœ¨è¿™ååˆ†é’Ÿå†…ï¼Œåé¢ä¸‹é£æœºçš„ä¹˜å®¢éƒ½åªèƒ½ä¹˜è¿™ä¸€è¾†å¤§å·´ï¼Œååˆ†é’Ÿè¿‡å»åï¼Œä¸ç®¡åé¢è¿˜æœ‰å¤šå°‘æ²¡æŒ¤ä¸Šè½¦çš„ä¹˜å®¢ï¼Œè¿™ç­è½¦éƒ½å¿…é¡»å‘èµ°ã€‚</p><p>åœ¨è¿™ä¸ªæ•…äº‹é‡Œï¼Œâ€œå¸æœºâ€ å°±æ˜¯æˆ‘ä»¬çš„èŠ‚æµé˜€ï¼Œä»–æ§åˆ¶å‘è½¦çš„æ—¶æœºï¼›â€œä¹˜å®¢â€å°±æ˜¯å› ä¸ºæˆ‘ä»¬é¢‘ç¹æ“ä½œäº‹ä»¶è€Œä¸æ–­æ¶Œå…¥çš„å›è°ƒä»»åŠ¡ï¼Œå®ƒéœ€è¦æ¥å—â€œå¸æœºâ€çš„å®‰æ’ï¼›è€Œâ€œè®¡æ—¶å™¨â€ï¼Œå°±æ˜¯æˆ‘ä»¬ä¸Šæ–‡æåˆ°çš„ä»¥è‡ªç”±å˜é‡å½¢å¼å­˜åœ¨çš„æ—¶é—´ä¿¡æ¯ï¼Œå®ƒæ˜¯â€œå¸æœºâ€å†³å®šå‘è½¦çš„ä¾æ®ï¼›æœ€åâ€œå‘è½¦â€è¿™ä¸ªåŠ¨ä½œï¼Œå°±å¯¹åº”åˆ°å›è°ƒå‡½æ•°çš„æ‰§è¡Œã€‚</p><p>æ€»ç»“ä¸‹æ¥ï¼Œæ‰€è°“çš„â€œèŠ‚æµâ€ï¼Œæ˜¯é€šè¿‡åœ¨ä¸€æ®µæ—¶é—´å†…<strong>æ— è§†åæ¥äº§ç”Ÿçš„å›è°ƒè¯·æ±‚</strong> æ¥å®ç°çš„ã€‚åªè¦ä¸€ä½å®¢äººå«äº†è½¦ï¼Œå¸æœºå°±ä¼šä¸ºä»–å¼€å¯è®¡æ—¶å™¨ï¼Œä¸€å®šçš„æ—¶é—´å†…ï¼Œåé¢éœ€è¦ä¹˜è½¦çš„å®¢äººéƒ½å¾—æ’é˜Ÿä¸Šè¿™ä¸€è¾†è½¦ï¼Œè°ä¹Ÿæ— æ³•å«åˆ°æ›´å¤šçš„è½¦ã€‚</p><p>å¯¹åº”åˆ°å®é™…çš„äº¤äº’ä¸Šæ˜¯ä¸€æ ·ä¸€æ ·çš„ï¼šæ¯å½“ç”¨æˆ·è§¦å‘äº†ä¸€æ¬¡ <code>scroll</code> äº‹ä»¶ï¼Œæˆ‘ä»¬å°±ä¸ºè¿™ä¸ªè§¦å‘æ“ä½œå¼€å¯è®¡æ—¶å™¨ã€‚ä¸€æ®µæ—¶é—´å†…ï¼Œåç»­æ‰€æœ‰çš„ <code>scroll</code> äº‹ä»¶éƒ½ä¼šè¢«å½“ä½œâ€œä¸€è¾†è½¦çš„ä¹˜å®¢â€â€”â€”å®ƒä»¬æ— æ³•è§¦å‘æ–°çš„ <code>scroll</code> å›è°ƒã€‚ç›´åˆ°â€œä¸€æ®µæ—¶é—´â€åˆ°äº†ï¼Œç¬¬ä¸€æ¬¡è§¦å‘çš„ <code>scroll</code> äº‹ä»¶å¯¹åº”çš„å›è°ƒæ‰ä¼šæ‰§è¡Œï¼Œè€Œâ€œä¸€æ®µæ—¶é—´å†…â€è§¦å‘çš„åç»­çš„ <code>scroll</code> å›è°ƒéƒ½ä¼šè¢«èŠ‚æµé˜€æ— è§†æ‰ã€‚</p><p>ç†è§£äº†å¤§è‡´çš„æ€è·¯ï¼Œæˆ‘ä»¬ç°åœ¨ä¸€èµ·å®ç°ä¸€ä¸ª <code>throttle</code>ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token comment">// fnæ˜¯æˆ‘ä»¬éœ€è¦åŒ…è£…çš„äº‹ä»¶å›è°ƒ, intervalæ˜¯æ—¶é—´é—´éš”çš„é˜ˆå€¼</span></span>
<span class="line">    <span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> interval</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">// lastä¸ºä¸Šä¸€æ¬¡è§¦å‘å›è°ƒçš„æ—¶é—´</span></span>
<span class="line">      <span class="token keyword">let</span> last <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line">      </span>
<span class="line">      <span class="token comment">// å°†throttleå¤„ç†ç»“æœå½“ä½œå‡½æ•°è¿”å›</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token comment">// ä¿ç•™è°ƒç”¨æ—¶çš„thisä¸Šä¸‹æ–‡</span></span>
<span class="line">          <span class="token keyword">let</span> context <span class="token operator">=</span> <span class="token keyword">this</span></span>
<span class="line">          <span class="token comment">// ä¿ç•™è°ƒç”¨æ—¶ä¼ å…¥çš„å‚æ•°</span></span>
<span class="line">          <span class="token keyword">let</span> args <span class="token operator">=</span> arguments</span>
<span class="line">          <span class="token comment">// è®°å½•æœ¬æ¬¡è§¦å‘å›è°ƒçš„æ—¶é—´</span></span>
<span class="line">          <span class="token keyword">let</span> now <span class="token operator">=</span> <span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">          </span>
<span class="line">          <span class="token comment">// åˆ¤æ–­ä¸Šæ¬¡è§¦å‘çš„æ—¶é—´å’Œæœ¬æ¬¡è§¦å‘çš„æ—¶é—´å·®æ˜¯å¦å°äºæ—¶é—´é—´éš”çš„é˜ˆå€¼</span></span>
<span class="line">          <span class="token keyword">if</span> <span class="token punctuation">(</span>now <span class="token operator">-</span> last <span class="token operator">&gt;=</span> interval<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token comment">// å¦‚æœæ—¶é—´é—´éš”å¤§äºæˆ‘ä»¬è®¾å®šçš„æ—¶é—´é—´éš”é˜ˆå€¼ï¼Œåˆ™æ‰§è¡Œå›è°ƒ</span></span>
<span class="line">              last <span class="token operator">=</span> now<span class="token punctuation">;</span></span>
<span class="line">              <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// ç”¨throttleæ¥åŒ…è£…scrollçš„å›è°ƒ</span></span>
<span class="line">    <span class="token keyword">const</span> better_scroll <span class="token operator">=</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;è§¦å‘äº†æ»šåŠ¨äº‹ä»¶&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;scroll&#39;</span><span class="token punctuation">,</span> better_scroll<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="debounce-æœ€åä¸€ä¸ªäººè¯´äº†ç®—" tabindex="-1"><a class="header-anchor" href="#debounce-æœ€åä¸€ä¸ªäººè¯´äº†ç®—"><span>Debounceï¼š æœ€åä¸€ä¸ªäººè¯´äº†ç®—</span></a></h3><blockquote><p>é˜²æŠ–çš„ä¸­å¿ƒæ€æƒ³åœ¨äºï¼šæˆ‘ä¼šç­‰ä½ åˆ°åº•ã€‚åœ¨æŸæ®µæ—¶é—´å†…ï¼Œä¸ç®¡ä½ è§¦å‘äº†å¤šå°‘æ¬¡å›è°ƒï¼Œæˆ‘éƒ½åªè®¤æœ€åä¸€æ¬¡ã€‚</p></blockquote><p>ç»§ç»­è®²å¸æœºå¼€è½¦çš„æ•…äº‹ã€‚è¿™æ¬¡çš„å¸æœºæ¯”è¾ƒæœ‰è€å¿ƒã€‚ç¬¬ä¸€ä¸ªä¹˜å®¢ä¸Šè½¦åï¼Œå¸æœºå¼€å§‹è®¡æ—¶ï¼ˆæ¯”å¦‚è¯´ååˆ†é’Ÿï¼‰ã€‚ååˆ†é’Ÿä¹‹å†…ï¼Œå¦‚æœåˆä¸Šæ¥äº†ä¸€ä¸ªä¹˜å®¢ï¼Œå¸æœºä¼šæŠŠè®¡æ—¶å™¨æ¸…é›¶ï¼Œé‡æ–°å¼€å§‹ç­‰å¦ä¸€ä¸ªååˆ†é’Ÿï¼ˆå»¶è¿Ÿäº†ç­‰å¾…ï¼‰ã€‚ç›´åˆ°æœ‰è¿™ä¹ˆä¸€ä½ä¹˜å®¢ï¼Œä»ä»–ä¸Šè½¦å¼€å§‹ï¼Œåç»­ååˆ†é’Ÿéƒ½æ²¡æœ‰æ–°ä¹˜å®¢ä¸Šè½¦ï¼Œå¸æœºä¼šè®¤ä¸ºç¡®å®æ²¡æœ‰äººéœ€è¦æ­è¿™è¶Ÿè½¦äº†ï¼Œæ‰ä¼šæŠŠè½¦å¼€èµ°ã€‚</p><p>æˆ‘ä»¬å¯¹æ¯” <code>throttle</code> æ¥ç†è§£ <code>debounce</code>ï¼šåœ¨<code>throttle</code>çš„é€»è¾‘é‡Œï¼Œâ€œç¬¬ä¸€ä¸ªäººè¯´äº†ç®—â€ï¼Œå®ƒåªä¸ºç¬¬ä¸€ä¸ªä¹˜å®¢è®¡æ—¶ï¼Œæ—¶é—´åˆ°äº†å°±æ‰§è¡Œå›è°ƒã€‚è€Œ <code>debounce</code> è®¤ä¸ºï¼Œâ€œæœ€åä¸€ä¸ªäººè¯´äº†ç®—â€ï¼Œ<code>debounce</code> ä¼šä¸ºæ¯ä¸€ä¸ªæ–°ä¹˜å®¢è®¾å®šæ–°çš„å®šæ—¶å™¨ã€‚</p><p>æˆ‘ä»¬åŸºäºä¸Šé¢çš„ç†è§£ï¼Œä¸€èµ·æ¥å†™ä¸€ä¸ª <code>debounce</code>ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token comment">// fnæ˜¯æˆ‘ä»¬éœ€è¦åŒ…è£…çš„äº‹ä»¶å›è°ƒ, delayæ˜¯æ¯æ¬¡æ¨è¿Ÿæ‰§è¡Œçš„ç­‰å¾…æ—¶é—´</span></span>
<span class="line">    <span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">// å®šæ—¶å™¨</span></span>
<span class="line">      <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span></span>
<span class="line">      </span>
<span class="line">      <span class="token comment">// å°†debounceå¤„ç†ç»“æœå½“ä½œå‡½æ•°è¿”å›</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// ä¿ç•™è°ƒç”¨æ—¶çš„thisä¸Šä¸‹æ–‡</span></span>
<span class="line">        <span class="token keyword">let</span> context <span class="token operator">=</span> <span class="token keyword">this</span></span>
<span class="line">        <span class="token comment">// ä¿ç•™è°ƒç”¨æ—¶ä¼ å…¥çš„å‚æ•°</span></span>
<span class="line">        <span class="token keyword">let</span> args <span class="token operator">=</span> arguments</span>
<span class="line">    </span>
<span class="line">        <span class="token comment">// æ¯æ¬¡äº‹ä»¶è¢«è§¦å‘æ—¶ï¼Œéƒ½å»æ¸…é™¤ä¹‹å‰çš„æ—§å®šæ—¶å™¨</span></span>
<span class="line">        <span class="token keyword">if</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token comment">// è®¾ç«‹æ–°å®šæ—¶å™¨</span></span>
<span class="line">        timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// ç”¨debounceæ¥åŒ…è£…scrollçš„å›è°ƒ</span></span>
<span class="line">    <span class="token keyword">const</span> better_scroll <span class="token operator">=</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;è§¦å‘äº†æ»šåŠ¨äº‹ä»¶&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;scroll&#39;</span><span class="token punctuation">,</span> better_scroll<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç”¨-throttle-æ¥ä¼˜åŒ–-debounce" tabindex="-1"><a class="header-anchor" href="#ç”¨-throttle-æ¥ä¼˜åŒ–-debounce"><span>ç”¨ Throttle æ¥ä¼˜åŒ– Debounce</span></a></h3><blockquote><p><code>debounce</code> çš„é—®é¢˜åœ¨äºå®ƒâ€œå¤ªæœ‰è€å¿ƒäº†â€ã€‚è¯•æƒ³ï¼Œå¦‚æœç”¨æˆ·çš„æ“ä½œååˆ†é¢‘ç¹â€”â€”ä»–æ¯æ¬¡éƒ½ä¸ç­‰ <code>debounce</code> è®¾ç½®çš„ <code>delay</code> æ—¶é—´ç»“æŸå°±è¿›è¡Œä¸‹ä¸€æ¬¡æ“ä½œï¼Œäºæ˜¯æ¯æ¬¡ <code>debounce</code> éƒ½ä¸ºè¯¥ç”¨æˆ·é‡æ–°ç”Ÿæˆå®šæ—¶å™¨ï¼Œå›è°ƒå‡½æ•°è¢«å»¶è¿Ÿäº†ä¸è®¡å…¶æ•°æ¬¡ã€‚é¢‘ç¹çš„å»¶è¿Ÿä¼šå¯¼è‡´ç”¨æˆ·è¿Ÿè¿Ÿå¾—ä¸åˆ°å“åº”ï¼Œç”¨æˆ·åŒæ ·ä¼šäº§ç”Ÿâ€œè¿™ä¸ªé¡µé¢å¡æ­»äº†â€çš„è§‚æ„Ÿã€‚</p></blockquote><p>ä¸ºäº†é¿å…å¼„å·§æˆæ‹™ï¼Œæˆ‘ä»¬éœ€è¦å€ŸåŠ› <code>throttle</code> çš„æ€æƒ³ï¼Œæ‰“é€ ä¸€ä¸ªâ€œæœ‰åº•çº¿â€çš„ <code>debounce</code>â€”â€”ç­‰ä½ å¯ä»¥ï¼Œä½†æˆ‘æœ‰æˆ‘çš„åŸåˆ™ï¼š<code>delay</code> æ—¶é—´å†…ï¼Œæˆ‘å¯ä»¥ä¸ºä½ é‡æ–°ç”Ÿæˆå®šæ—¶å™¨ï¼›ä½†åªè¦<code>delay</code>çš„æ—¶é—´åˆ°äº†ï¼Œæˆ‘å¿…é¡»è¦ç»™ç”¨æˆ·ä¸€ä¸ªå“åº”ã€‚è¿™ä¸ª <code>throttle</code> ä¸ <code>debounce</code> â€œåˆä½“â€æ€è·¯ï¼Œå·²ç»è¢«å¾ˆå¤šæˆç†Ÿçš„å‰ç«¯åº“åº”ç”¨åˆ°äº†å®ƒä»¬çš„åŠ å¼ºç‰ˆ <code>throttle</code> å‡½æ•°çš„å®ç°ä¸­ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token comment">// fnæ˜¯æˆ‘ä»¬éœ€è¦åŒ…è£…çš„äº‹ä»¶å›è°ƒ, delayæ˜¯æ—¶é—´é—´éš”çš„é˜ˆå€¼</span></span>
<span class="line">    <span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">// lastä¸ºä¸Šä¸€æ¬¡è§¦å‘å›è°ƒçš„æ—¶é—´, timeræ˜¯å®šæ—¶å™¨</span></span>
<span class="line">      <span class="token keyword">let</span> last <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> timer <span class="token operator">=</span> <span class="token keyword">null</span></span>
<span class="line">      <span class="token comment">// å°†throttleå¤„ç†ç»“æœå½“ä½œå‡½æ•°è¿”å›</span></span>
<span class="line">      </span>
<span class="line">      <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> </span>
<span class="line">        <span class="token comment">// ä¿ç•™è°ƒç”¨æ—¶çš„thisä¸Šä¸‹æ–‡</span></span>
<span class="line">        <span class="token keyword">let</span> context <span class="token operator">=</span> <span class="token keyword">this</span></span>
<span class="line">        <span class="token comment">// ä¿ç•™è°ƒç”¨æ—¶ä¼ å…¥çš„å‚æ•°</span></span>
<span class="line">        <span class="token keyword">let</span> args <span class="token operator">=</span> arguments</span>
<span class="line">        <span class="token comment">// è®°å½•æœ¬æ¬¡è§¦å‘å›è°ƒçš„æ—¶é—´</span></span>
<span class="line">        <span class="token keyword">let</span> now <span class="token operator">=</span> <span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        </span>
<span class="line">        <span class="token comment">// åˆ¤æ–­ä¸Šæ¬¡è§¦å‘çš„æ—¶é—´å’Œæœ¬æ¬¡è§¦å‘çš„æ—¶é—´å·®æ˜¯å¦å°äºæ—¶é—´é—´éš”çš„é˜ˆå€¼</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>now <span class="token operator">-</span> last <span class="token operator">&lt;</span> delay<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// å¦‚æœæ—¶é—´é—´éš”å°äºæˆ‘ä»¬è®¾å®šçš„æ—¶é—´é—´éš”é˜ˆå€¼ï¼Œåˆ™ä¸ºæœ¬æ¬¡è§¦å‘æ“ä½œè®¾ç«‹ä¸€ä¸ªæ–°çš„å®šæ—¶å™¨</span></span>
<span class="line">           <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span></span>
<span class="line">           timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">              last <span class="token operator">=</span> now</span>
<span class="line">              <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">// å¦‚æœæ—¶é—´é—´éš”è¶…å‡ºäº†æˆ‘ä»¬è®¾å®šçš„æ—¶é—´é—´éš”é˜ˆå€¼ï¼Œé‚£å°±ä¸ç­‰äº†ï¼Œæ— è®ºå¦‚ä½•è¦åé¦ˆç»™ç”¨æˆ·ä¸€æ¬¡å“åº”</span></span>
<span class="line">            last <span class="token operator">=</span> now</span>
<span class="line">            <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// ç”¨æ–°çš„throttleåŒ…è£…scrollçš„å›è°ƒ</span></span>
<span class="line">    <span class="token keyword">const</span> better_scroll <span class="token operator">=</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;è§¦å‘äº†æ»šåŠ¨äº‹ä»¶&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;scroll&#39;</span><span class="token punctuation">,</span> better_scroll<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å°ç»“-7" tabindex="-1"><a class="header-anchor" href="#å°ç»“-7"><span>å°ç»“</span></a></h3><blockquote><p><code>throttle</code> å’Œ <code>debounce</code> ä¸ä»…æ˜¯æˆ‘ä»¬æ—¥å¸¸å¼€å‘ä¸­çš„å¸¸ç”¨ä¼˜è´¨ä»£ç ç‰‡æ®µï¼Œæ›´æ˜¯å‰ç«¯é¢è¯•ä¸­ä¸å¯ä¸çŸ¥çš„é«˜é¢‘è€ƒç‚¹ã€‚â€œçœ‹æ‡‚äº†ä»£ç â€ã€â€œç†è§£äº†è¿‡ç¨‹â€åœ¨æœ¬èŠ‚éƒ½æ˜¯ä¸å¤Ÿçš„ï¼Œé‡è¦çš„æ˜¯æŠŠå®ƒå†™åˆ°è‡ªå·±çš„é¡¹ç›®é‡Œå»ï¼Œäº²è‡ªä½“éªŒä¸€æŠŠèŠ‚æµå’Œé˜²æŠ–å¸¦æ¥çš„æ€§èƒ½æå‡ã€‚</p></blockquote><h2 id="åå››ã€æ€§èƒ½ç›‘æµ‹ç¯‡-performanceã€lighthouse-ä¸æ€§èƒ½-api" tabindex="-1"><a class="header-anchor" href="#åå››ã€æ€§èƒ½ç›‘æµ‹ç¯‡-performanceã€lighthouse-ä¸æ€§èƒ½-api"><span>åå››ã€æ€§èƒ½ç›‘æµ‹ç¯‡ï¼šPerformanceã€LightHouse ä¸æ€§èƒ½ API</span></a></h2><ul><li>æ€§èƒ½ç›‘æµ‹æ˜¯å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„é‡è¦ä¸€ç¯ã€‚ç›‘æµ‹çš„ç›®çš„æ˜¯ä¸ºäº†ç¡®å®šæ€§èƒ½ç“¶é¢ˆï¼Œä»è€Œæœ‰çš„æ”¾çŸ¢åœ°å¼€å±•å…·ä½“çš„ä¼˜åŒ–å·¥ä½œã€‚</li><li>å¹³æ—¶æˆ‘ä»¬æ¯”è¾ƒæ¨å´‡çš„æ€§èƒ½ç›‘æµ‹æ–¹æ¡ˆä¸»è¦æœ‰ä¸¤ç§ï¼š<strong>å¯è§†åŒ–æ–¹æ¡ˆã€å¯ç¼–ç¨‹æ–¹æ¡ˆ</strong> ã€‚è¿™ä¸¤ç§æ–¹æ¡ˆä¸‹éƒ½æœ‰éå¸¸ä¼˜ç§€ã€ä¸”è§¦æ‰‹å¯åŠçš„ç›¸å…³å·¥å…·ä¾›å¤§å®¶é€‰æ‹©ï¼Œæœ¬èŠ‚æˆ‘ä»¬å°±ä¸€èµ·æ¥ç ”ç©¶ä¸€ä¸‹è¿™äº›å·¥å…·çš„ç”¨æ³•ã€‚</li></ul><h3 id="å¯è§†åŒ–ç›‘æµ‹-ä»-performance-é¢æ¿è¯´èµ·" tabindex="-1"><a class="header-anchor" href="#å¯è§†åŒ–ç›‘æµ‹-ä»-performance-é¢æ¿è¯´èµ·"><span>å¯è§†åŒ–ç›‘æµ‹ï¼šä» Performance é¢æ¿è¯´èµ·</span></a></h3><blockquote><p><code>Performance</code> æ˜¯ Chrome æä¾›ç»™æˆ‘ä»¬çš„å¼€å‘è€…å·¥å…·ï¼Œç”¨äºè®°å½•å’Œåˆ†ææˆ‘ä»¬çš„åº”ç”¨åœ¨è¿è¡Œæ—¶çš„æ‰€æœ‰æ´»åŠ¨ã€‚å®ƒå‘ˆç°çš„æ•°æ®å…·æœ‰å®æ—¶æ€§ã€å¤šç»´åº¦çš„ç‰¹ç‚¹ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬å¾ˆå¥½åœ°å®šä½æ€§èƒ½é—®é¢˜ã€‚</p></blockquote><p><strong>1. å¼€å§‹è®°å½•</strong></p><p>å³é”®æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œé€‰ä¸­æˆ‘ä»¬çš„ <code>Performance</code> é¢æ¿ï¼š</p><p><img src="`+nn+'" alt=""></p><ul><li>å½“æˆ‘ä»¬é€‰ä¸­å›¾ä¸­æ‰€æ ‡ç¤ºçš„å®å¿ƒåœ†æŒ‰é’®ï¼Œ<code>Performance</code> ä¼šå¼€å§‹å¸®æˆ‘ä»¬è®°å½•æˆ‘ä»¬åç»­çš„äº¤äº’æ“ä½œï¼›å½“æˆ‘ä»¬é€‰ä¸­åœ†ç®­å¤´æŒ‰é’®ï¼Œ<code>Performance</code> ä¼šå°†é¡µé¢é‡æ–°åŠ è½½ï¼Œè®¡ç®—åŠ è½½è¿‡ç¨‹ä¸­çš„æ€§èƒ½è¡¨ç°ã€‚</li><li>tipsï¼šä½¿ç”¨ <code>Performance</code> å·¥å…·æ—¶ï¼Œä¸ºäº†è§„é¿å…¶å®ƒ Chrome æ’ä»¶å¯¹é¡µé¢çš„æ€§èƒ½å½±å“ï¼Œæˆ‘ä»¬æœ€å¥½åœ¨æ— ç—•æ¨¡å¼ä¸‹æ‰“å¼€é¡µé¢ï¼š</li></ul><p><img src="'+sn+'" alt=""><img src="'+an+'" alt=""></p><p><strong>2. ç®€è¦åˆ†æ</strong></p><p>è¿™é‡Œæˆ‘æ‰“å¼€æ˜é‡‘é¦–é¡µï¼Œé€‰ä¸­ <code>Performance</code> é¢æ¿ä¸­çš„åœ†ç®­å¤´ï¼Œæ¥çœ‹ä¸€ä¸‹é¡µé¢åŠ è½½è¿‡ç¨‹ä¸­çš„æ€§èƒ½è¡¨ç°ï¼š</p><p><img src="'+en+'" alt=""></p><p>ä»ä¸Šåˆ°ä¸‹ï¼Œä¾æ¬¡ä¸ºæ¦‚è¿°é¢æ¿ã€è¯¦æƒ…é¢æ¿ã€‚ä¸‹æˆ‘ä»¬å…ˆæ¥è§‚å¯Ÿä¸€ä¸‹æ¦‚è¿°é¢æ¿ï¼Œäº†è§£é¡µé¢çš„åŸºæœ¬è¡¨ç°ï¼š</p><p><img src="'+pn+'" alt=""></p><p>æˆ‘ä»¬çœ‹å³ä¸Šè§’çš„ä¸‰ä¸ªæ ç›®ï¼šFPSã€CPU å’Œ NETã€‚</p><p><strong>FPS</strong> ï¼šè¿™æ˜¯ä¸€ä¸ªå’ŒåŠ¨ç”»æ€§èƒ½å¯†åˆ‡ç›¸å…³çš„æŒ‡æ ‡ï¼Œå®ƒè¡¨ç¤ºæ¯ä¸€ç§’çš„å¸§æ•°ã€‚å›¾ä¸­ç»¿è‰²æŸ±çŠ¶è¶Šé«˜è¡¨ç¤ºå¸§ç‡è¶Šé«˜ï¼Œä½“éªŒå°±è¶Šæµç•…ã€‚è‹¥å‡ºç°çº¢è‰²å—ï¼Œåˆ™ä»£è¡¨é•¿æ—¶é—´å¸§ï¼Œå¾ˆå¯èƒ½ä¼šå‡ºç°å¡é¡¿ã€‚å›¾ä¸­ä»¥ç»¿è‰²ä¸ºä¸»ï¼Œå¶å°”å‡ºç°çº¢å—ï¼Œè¯´æ˜ç½‘é¡µæ€§èƒ½å¹¶ä¸ç³Ÿç³•ï¼Œä½†ä»æœ‰å¯ä¼˜åŒ–çš„ç©ºé—´ã€‚</p><p><strong>CPU</strong> ï¼šè¡¨ç¤ºCPUçš„ä½¿ç”¨æƒ…å†µï¼Œä¸åŒçš„é¢œè‰²ç‰‡æ®µä»£è¡¨ç€æ¶ˆè€—CPUèµ„æºçš„ä¸åŒäº‹ä»¶ç±»å‹ã€‚è¿™éƒ¨åˆ†çš„å›¾åƒå’Œä¸‹æ–‡è¯¦æƒ…é¢æ¿ä¸­çš„Summaryå†…å®¹æœ‰å¯¹åº”å…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥ç»“åˆè¿™ä¸¤è€…æŒ–æ˜æ€§èƒ½ç“¶é¢ˆã€‚</p><p><strong>NET</strong> ï¼šç²—ç•¥çš„å±•ç¤ºäº†å„è¯·æ±‚çš„è€—æ—¶ä¸å‰åé¡ºåºã€‚è¿™ä¸ªæŒ‡æ ‡ä¸€èˆ¬æ¥è¯´å¸®åŠ©ä¸å¤§ã€‚</p><p><strong>3. æŒ–æ˜æ€§èƒ½ç“¶é¢ˆ</strong></p><blockquote><p>è¯¦æƒ…é¢æ¿ä¸­çš„å†…å®¹æœ‰å¾ˆå¤šã€‚ä½†ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬ä¼šä¸»è¦å»çœ‹ <code>Main</code> æ ç›®ä¸‹çš„ç«ç„°å›¾å’Œ <code>Summary</code> æä¾›ç»™æˆ‘ä»¬çš„é¥¼å›¾â€”â€”è¿™ä¸¤è€…å’Œæ¦‚è¿°é¢æ¿ä¸­çš„ <code>CPU</code> ä¸€æ ç»“åˆï¼Œå¯ä»¥å¸®æˆ‘ä»¬è¿…é€Ÿå®šä½æ€§èƒ½ç“¶é¢ˆï¼ˆå¦‚ä¸‹å›¾ï¼‰ã€‚</p></blockquote><p><img src="'+tn+'" alt=""></p><ul><li>å…ˆçœ‹ <code>CPU</code> å›¾è¡¨å’Œ <code>Summary</code> é¥¼å›¾ã€‚<code>CPU</code> å›¾è¡¨ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®é¢œè‰²å¡«å……çš„é¥±æ»¡ç¨‹åº¦ï¼Œç¡®å®š <code>CPU</code> çš„å¿™é—²ï¼Œè¿›è€Œäº†è§£è¯¥é¡µé¢çš„æ€»çš„ä»»åŠ¡é‡ã€‚è€Œ <code>Summary</code> é¥¼å›¾åˆ™ä»¥ä¸€ç§ç›´è§‚çš„æ–¹å¼å‘Šè¯‰äº†æˆ‘ä»¬ï¼Œå“ªä¸ªç±»å‹çš„ä»»åŠ¡æœ€è€—æ—¶ï¼ˆä»æœ¬ä¾‹æ¥çœ‹æ˜¯è„šæœ¬æ‰§è¡Œè¿‡ç¨‹ï¼‰ã€‚è¿™æ ·æˆ‘ä»¬åœ¨ä¼˜åŒ–çš„æ—¶å€™ï¼Œå°±å¯ä»¥æŠ“åˆ°â€œä¸»è¦çŸ›ç›¾â€ï¼Œè¿›è€Œæœ‰çš„æ”¾çŸ¢åœ°å¼€å±•åç»­çš„å·¥ä½œäº†ã€‚</li><li>å†çœ‹ <code>Main</code> æä¾›ç»™æˆ‘ä»¬çš„ç«ç„°å›¾ã€‚è¿™ä¸ªç«ç„°å›¾éå¸¸å…³é”®ï¼Œå®ƒå±•ç¤ºäº†æ•´ä¸ªè¿è¡Œæ—¶ä¸»è¿›ç¨‹æ‰€åšçš„æ¯ä¸€ä»¶äº‹æƒ…ï¼ˆåŒ…æ‹¬åŠ è½½ã€è„šæœ¬è¿è¡Œã€æ¸²æŸ“ã€å¸ƒå±€ã€ç»˜åˆ¶ç­‰ï¼‰ã€‚<code>x</code> è½´è¡¨ç¤ºéšæ—¶é—´çš„è®°å½•ã€‚æ¯ä¸ªé•¿æ¡å°±ä»£è¡¨ä¸€ä¸ªæ´»åŠ¨ã€‚æ›´å®½çš„æ¡å½¢æ„å‘³ç€äº‹ä»¶éœ€è¦æ›´é•¿æ—¶é—´ã€‚<code>y</code> è½´è¡¨ç¤ºè°ƒç”¨å †æ ˆï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°äº‹ä»¶æ˜¯ç›¸äº’å †å çš„ï¼Œä¸Šå±‚çš„äº‹ä»¶è§¦å‘äº†ä¸‹å±‚çš„äº‹ä»¶ã€‚</li><li><code>CPU</code> å›¾æ ‡å’Œ <code>Summary</code> å›¾éƒ½æ˜¯æŒ‰ç…§â€œç±»å‹â€ç»™æˆ‘ä»¬æä¾›æ€§èƒ½ä¿¡æ¯ï¼Œè€Œ <code>Main</code> ç«ç„°å›¾åˆ™å°†ç²’åº¦ç»†åŒ–åˆ°äº†æ¯ä¸€ä¸ªå‡½æ•°çš„è°ƒç”¨ã€‚åˆ°åº•æ˜¯ä»å“ªä¸ªè¿‡ç¨‹å¼€å§‹å‡ºé—®é¢˜ã€æ˜¯å“ªä¸ªå‡½æ•°æ‹–äº†åè…¿ã€åˆæ˜¯å“ªä¸ªäº‹ä»¶è§¦å‘äº†è¿™ä¸ªå‡½æ•°ï¼Œè¿™äº›å…·ä½“çš„ã€ç»†è‡´çš„é—®é¢˜éƒ½å°†åœ¨ <code>Main</code> ç«ç„°å›¾ä¸­å¾—åˆ°è§£ç­”ã€‚</li></ul><h3 id="å¯è§†åŒ–ç›‘æµ‹-æ›´åŠ èªæ˜çš„-lighthouse" tabindex="-1"><a class="header-anchor" href="#å¯è§†åŒ–ç›‘æµ‹-æ›´åŠ èªæ˜çš„-lighthouse"><span>å¯è§†åŒ–ç›‘æµ‹ï¼š æ›´åŠ èªæ˜çš„ LightHouse</span></a></h3><blockquote><p><code>Performance</code>æ— ç–‘å¯ä»¥ä¸ºæˆ‘ä»¬æä¾›å¾ˆå¤šæœ‰ä»·å€¼çš„ä¿¡æ¯ï¼Œä½†å®ƒçš„å±•ç¤ºä½œç”¨å¤§äºåˆ†æä½œç”¨ã€‚å®ƒè¦æ±‚ä½¿ç”¨è€…å¯¹å·¥å…·æœ¬èº«åŠå…¶æ‰€å±•ç¤ºçš„ä¿¡æ¯æœ‰å……åˆ†çš„ç†è§£ï¼Œèƒ½å¤Ÿå°†æ™¦æ¶©çš„æ•°æ®â€œç¿»è¯‘â€æˆå…·ä½“çš„æ€§èƒ½é—®é¢˜ã€‚</p></blockquote><p>ç¨‹åºå‘˜ä»¬è®¸äº†ä¸ªæ„¿ï¼šå¦‚æœå·¥å…·èƒ½å¸®åŠ©æˆ‘ä»¬æŠŠé¡µé¢çš„é—®é¢˜ä¹Ÿåˆ†æå‡ºæ¥å°±å¥½äº†ï¼ä¸Šå¸å¬åˆ°äº†è¿™ä¸ªæ„¿æœ›ï¼Œäºæ˜¯ç»™äº†æˆ‘ä»¬ <code>LightHouse</code>ï¼š</p><p><img src="'+on+'" alt=""></p><blockquote><p><code>Lighthouse</code> æ˜¯ä¸€ä¸ªå¼€æºçš„è‡ªåŠ¨åŒ–å·¥å…·ï¼Œç”¨äºæ”¹è¿›ç½‘ç»œåº”ç”¨çš„è´¨é‡ã€‚ ä½ å¯ä»¥å°†å…¶ä½œä¸ºä¸€ä¸ª Chrome æ‰©å±•ç¨‹åºè¿è¡Œï¼Œæˆ–ä»å‘½ä»¤è¡Œè¿è¡Œã€‚ ä¸º<code>Lighthouse</code>æä¾›ä¸€ä¸ªéœ€è¦å®¡æŸ¥çš„ç½‘å€ï¼Œå®ƒå°†é’ˆå¯¹æ­¤é¡µé¢è¿è¡Œä¸€è¿ä¸²çš„æµ‹è¯•ï¼Œç„¶åç”Ÿæˆä¸€ä¸ªæœ‰å…³é¡µé¢æ€§èƒ½çš„æŠ¥å‘Šã€‚</p></blockquote><p>æ•²é»‘æ¿åˆ’é‡ç‚¹ï¼šå®ƒç”Ÿæˆçš„æ˜¯ä¸€ä¸ªæŠ¥å‘Šï¼<code>Report</code>ï¼ä¸æ˜¯å¹²å·´å·´åœ°æ•°æ®ï¼Œè€Œæ˜¯ä¸€ä¸ªé€šè¿‡æµ‹è¯•ä¸åˆ†æå‘ˆç°å‡ºæ¥çš„ç»“æœï¼ˆå®ƒç”šè‡³ä¼šç»™ä½ çš„é¡µé¢è·‘ä¸€ä¸ªåˆ†æ•°å‡ºæ¥ï¼‰ã€‚è¿™ä¸ªä¸œè¥¿çœ‹èµ·æ¥ä¹ŸçœŸæ˜¯å¤ªèµäº†ï¼Œæˆ‘ä»¬è¿™å°±æ¥ä½“éªŒä¸€ä¸‹ï¼</p><p>é¦–å…ˆåœ¨ <code>Chrome</code> çš„åº”ç”¨å•†åº—é‡Œä¸‹è½½ä¸€ä¸ª <code>LightHouse</code>ã€‚è¿™ä¸€æ­¥ OK ä¹‹åï¼Œæˆ‘ä»¬æµè§ˆå™¨å³ä¸Šè§’ä¼šå‡ºç°ä¸€ä¸ªå°å°çš„ç¯å¡” <code>ICON</code>ã€‚æ‰“å¼€æˆ‘ä»¬éœ€è¦æµ‹è¯•çš„é‚£ä¸ªé¡µé¢ï¼Œç‚¹å‡»è¿™ä¸ª <code>ICON</code>ï¼Œå”¤èµ·å¦‚ä¸‹çš„é¢æ¿ï¼š</p><p><img src="'+cn+'" alt=""></p><p>ç„¶åç‚¹å‡»â€œGenerate reportâ€æŒ‰é’®ï¼Œåªéœ€é™å€™æ•°ç§’ï¼Œ<code>LightHouse</code> å°±ä¼šä¸ºæˆ‘ä»¬è¾“å‡ºä¸€ä¸ªå®Œç¾çš„æ€§èƒ½æŠ¥å‘Šã€‚</p><p>è¿™é‡Œæˆ‘æ‹¿æ˜é‡‘é¦–é¡µâ€œå¼€åˆ€â€ï¼š</p><p><img src="'+ln+'" alt=""></p><p>ç¨äº‹ç‰‡åˆ»ï¼Œ<code>Report</code> ä¾¿è¾“å‡ºæˆåŠŸäº†ï¼Œ<code>LightHouse</code> é»˜è®¤ä¼šå¸®æˆ‘ä»¬æ‰“å¼€ä¸€ä¸ªæ–°çš„æ ‡ç­¾é¡µæ¥å±•ç¤ºæŠ¥å‘Šå†…å®¹ã€‚æŠ¥å‘Šå†…å®¹éå¸¸ä¸°å¯Œï¼Œé¦–å…ˆæˆ‘ä»¬çœ‹åˆ°çš„æ˜¯æ•´ä½“çš„è·‘åˆ†æƒ…å†µï¼š</p><p><img src="'+rn+'" alt=""></p><p>ä¸Šè¿°åˆ†åˆ«æ˜¯é¡µé¢æ€§èƒ½ã€<code>PWA</code>ï¼ˆæ¸è¿›å¼ Web åº”ç”¨ï¼‰ã€å¯è®¿é—®æ€§ï¼ˆæ— éšœç¢ï¼‰ã€æœ€ä½³å®è·µã€<code>SEO</code> äº”é¡¹æŒ‡æ ‡çš„è·‘åˆ†ã€‚å­°å¼ºå­°å¼±ï¼Œæˆ‘ä»¬ä¸€çœ‹ä¾¿çŸ¥ã€‚</p><p>å‘ä¸‹æ‹‰åŠ¨ <code>Report</code> é¡µï¼Œæˆ‘ä»¬è¿˜å¯ä»¥çœ‹åˆ°æ¯ä¸€ä¸ªæŒ‡æ ‡çš„ç»†åŒ–è¯„ä¼°ï¼š</p><p><img src="'+un+`" alt=""></p><ul><li>åœ¨â€œOpportunitiesâ€ä¸­ï¼Œ<code>LightHouse</code> ç”šè‡³é’ˆå¯¹æˆ‘ä»¬çš„æ€§èƒ½é—®é¢˜ç»™å‡ºäº†å¯è¡Œçš„å»ºè®®ã€ä»¥åŠæ¯ä¸€é¡¹ä¼˜åŒ–æ“ä½œé¢„æœŸä¼šå¸®æˆ‘ä»¬èŠ‚çœçš„æ—¶é—´ã€‚è¿™ä»½æŠ¥å‘Šçš„å¯æ“ä½œæ€§æ˜¯å¾ˆå¼ºçš„â€”â€”æˆ‘ä»¬åªéœ€è¦å¯¹ç€ <code>LightHouse</code> ç»™å‡ºçš„å»ºè®®ï¼Œä¸€æ¡ä¸€æ¡åœ°å»å°è¯•ï¼Œå°±å¯ä»¥çœ‹åˆ°è‡ªå·±çš„é¡µé¢ï¼Œåœ¨ä¸€ç§’ä¸€ç§’åœ°å˜å¿«ã€‚</li><li>é™¤äº†ç›´æ¥ä¸‹è½½ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œä½¿ç”¨ <code>LightHouse</code>ï¼š</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    npm install <span class="token operator">-</span>g lighthouse</span>
<span class="line">    lighthouse https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>juejin<span class="token punctuation">.</span>im<span class="token operator">/</span>books</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>åŒæ ·å¯ä»¥å¾—åˆ°æ˜é‡‘çš„æ€§èƒ½æŠ¥å‘Šã€‚</p><p>æ­¤å¤–ï¼Œä» <code>Chrome 60</code> å¼€å§‹ï¼Œ<code>DevTools</code> ä¸­ç›´æ¥åŠ å…¥äº†åŸºäº <code>LightHouse</code> çš„ <code>Audits</code> é¢æ¿ï¼š</p><p><img src="`+dn+'" alt=""></p><blockquote><p><code>LightHouse</code> å› æ­¤å˜å¾—æ›´åŠ è§¦æ‰‹å¯åŠäº†ï¼Œè¿™ä¸€æ“ä½œä¹Ÿè¶³ä»¥è¯æ˜ <code>Chrome</code> å›¢é˜Ÿå¯¹ <code>LightHouse</code> çš„æ¨å´‡ã€‚</p></blockquote><h3 id="å¯ç¼–ç¨‹çš„æ€§èƒ½ä¸ŠæŠ¥æ–¹æ¡ˆ-w3c-æ€§èƒ½-api" tabindex="-1"><a class="header-anchor" href="#å¯ç¼–ç¨‹çš„æ€§èƒ½ä¸ŠæŠ¥æ–¹æ¡ˆ-w3c-æ€§èƒ½-api"><span>å¯ç¼–ç¨‹çš„æ€§èƒ½ä¸ŠæŠ¥æ–¹æ¡ˆï¼š W3C æ€§èƒ½ API</span></a></h3><ul><li>W3C è§„èŒƒä¸ºæˆ‘ä»¬æä¾›äº† <code>Performance</code> ç›¸å…³çš„æ¥å£ã€‚å®ƒå…è®¸æˆ‘ä»¬è·å–åˆ°ç”¨æˆ·è®¿é—®ä¸€ä¸ªé¡µé¢çš„æ¯ä¸ªé˜¶æ®µçš„ç²¾ç¡®æ—¶é—´ï¼Œä»è€Œå¯¹æ€§èƒ½è¿›è¡Œåˆ†æã€‚æˆ‘ä»¬å¯ä»¥å°†å…¶ç†è§£ä¸º <code>Performance</code> é¢æ¿çš„è¿›ä¸€æ­¥ç»†åŒ–ä¸å¯ç¼–ç¨‹åŒ–ã€‚</li><li>å½“ä¸‹çš„å‰ç«¯ä¸–ç•Œé‡Œï¼Œæ•°æ®å¯è§†åŒ–çš„æ¦‚å¿µå·²ç»è¢«ç‚’å¾—éå¸¸çƒ­äº†ï¼ŒPerformance é¢æ¿å°±æ˜¯æ•°æ®å¯è§†åŒ–çš„å…¸èŒƒã€‚é‚£ä¹ˆä¸ºä»€ä¹ˆè¦æŠŠå·²ç»å¯è§†åŒ–çš„æ•°æ®å†æå‡ºæ¥å¤„ç†ä¸€éå‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºï¼Œéœ€è¦è¿™äº›æ•°æ®çš„äººä¸æ­¢æˆ‘ä»¬å‰ç«¯â€”â€”å¾ˆå¤šæƒ…å†µä¸‹ï¼Œåç«¯ä¹Ÿéœ€è¦æˆ‘ä»¬æä¾›æ€§èƒ½ä¿¡æ¯çš„ä¸ŠæŠ¥ã€‚æ­¤å¤–ï¼Œ<code>Performance</code> æä¾›çš„å¯è§†åŒ–ç»“æœå¹¶ä¸ä¸€å®šèƒ½å¤Ÿæ»¡è¶³æˆ‘ä»¬å®é™…çš„ä¸šåŠ¡éœ€æ±‚ï¼Œåªæœ‰æ‹¿åˆ°äº†çœŸå®çš„æ•°æ®ï¼Œæˆ‘ä»¬æ‰å¯ä»¥å¯¹å®ƒè¿›è¡ŒäºŒæ¬¡å¤„ç†ï¼Œå»åšä¸€ä¸ªæ›´åŠ æ·±å±‚æ¬¡çš„å¯è§†åŒ–ã€‚</li></ul><p>åœ¨è¿™ç§éœ€æ±‚èƒŒæ™¯ä¸‹ï¼Œæˆ‘ä»¬å°±ä¸å¾—ä¸ç¥­å‡º <code>Performance API</code>äº†ã€‚</p><p><strong>1. è®¿é—® performance å¯¹è±¡</strong></p><blockquote><p><code>performance</code> æ˜¯ä¸€ä¸ªå…¨å±€å¯¹è±¡ã€‚æˆ‘ä»¬åœ¨æ§åˆ¶å°é‡Œè¾“å…¥ <code>window.performance</code>ï¼Œå°±å¯ä¸€çª¥å…¶å…¨è²Œï¼š</p></blockquote><p><img src="'+kn+'" alt=""></p><p><strong>2. å…³é”®æ—¶é—´èŠ‚ç‚¹</strong></p><p>åœ¨ <code>performance</code> çš„ <code>timing</code> å±æ€§ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹åˆ°å¦‚ä¸‹çš„æ—¶é—´æˆ³ï¼š</p><p><img src="'+mn+'" alt=""></p><p>è¿™äº›æ—¶é—´æˆ³ä¸é¡µé¢æ•´ä¸ªåŠ è½½æµç¨‹ä¸­çš„å…³é”®æ—¶é—´èŠ‚ç‚¹æœ‰ç€ä¸€ä¸€å¯¹åº”çš„å…³ç³»ï¼š</p><p><img src="'+vn+`" alt=""></p><p>é€šè¿‡æ±‚ä¸¤ä¸ªæ—¶é—´ç‚¹ä¹‹é—´çš„å·®å€¼ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºæŸä¸ªè¿‡ç¨‹èŠ±è´¹çš„æ—¶é—´ï¼Œä¸¾ä¸ªğŸŒ°ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token keyword">const</span> timing <span class="token operator">=</span> window<span class="token punctuation">.</span>performance<span class="token punctuation">.</span>timing</span>
<span class="line">    <span class="token comment">// DNSæŸ¥è¯¢è€—æ—¶</span></span>
<span class="line">    timing<span class="token punctuation">.</span>domainLookupEnd <span class="token operator">-</span> timing<span class="token punctuation">.</span>domainLookupStart</span>
<span class="line">      </span>
<span class="line">    <span class="token comment">// TCPè¿æ¥è€—æ—¶</span></span>
<span class="line">    timing<span class="token punctuation">.</span>connectEnd <span class="token operator">-</span> timing<span class="token punctuation">.</span>connectStart</span>
<span class="line">     </span>
<span class="line">    <span class="token comment">// å†…å®¹åŠ è½½è€—æ—¶</span></span>
<span class="line">    timing<span class="token punctuation">.</span>responseEnd <span class="token operator">-</span> timing<span class="token punctuation">.</span>requestStart</span>
<span class="line">    </span>
<span class="line">    Â·Â·Â·</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>é™¤äº†è¿™äº›å¸¸è§çš„è€—æ—¶æƒ…å†µï¼Œæˆ‘ä»¬æ›´åº”è¯¥å»å…³æ³¨ä¸€äº›<strong>å…³é”®æ€§èƒ½æŒ‡æ ‡</strong> ï¼š<code>firstbyte</code>ã€<code>fpt</code>ã€<code>tti</code>ã€<code>ready</code> å’Œ <code>load</code> æ—¶é—´ã€‚è¿™äº›æŒ‡æ ‡æ•°æ®ä¸çœŸå®çš„ç”¨æˆ·ä½“éªŒæ¯æ¯ç›¸å…³ï¼Œæ˜¯æˆ‘ä»¬æ—¥å¸¸ä¸šåŠ¡æ€§èƒ½ç›‘æµ‹ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ï¼š</p></blockquote><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token comment">// firstbyteï¼šé¦–åŒ…æ—¶é—´	</span></span>
<span class="line">    timing<span class="token punctuation">.</span>responseStart â€“ timing<span class="token punctuation">.</span>domainLookupStart	</span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// fptï¼šFirst Paint Time, é¦–æ¬¡æ¸²æŸ“æ—¶é—´ / ç™½å±æ—¶é—´</span></span>
<span class="line">    timing<span class="token punctuation">.</span>responseEnd â€“ timing<span class="token punctuation">.</span>fetchStart</span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// ttiï¼šTime to Interactï¼Œé¦–æ¬¡å¯äº¤äº’æ—¶é—´	</span></span>
<span class="line">    timing<span class="token punctuation">.</span>domInteractive â€“ timing<span class="token punctuation">.</span>fetchStart</span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// readyï¼šHTML åŠ è½½å®Œæˆæ—¶é—´ï¼Œå³ DOM å°±ä½çš„æ—¶é—´</span></span>
<span class="line">    timing<span class="token punctuation">.</span>domContentLoaded â€“ timing<span class="token punctuation">.</span>fetchStart</span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// loadï¼šé¡µé¢å®Œå…¨åŠ è½½æ—¶é—´</span></span>
<span class="line">    timing<span class="token punctuation">.</span>loadEventStart â€“ timing<span class="token punctuation">.</span>fetchStart</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>ä»¥ä¸Šè¿™äº›é€šè¿‡ <code>Performance API</code> è·å–åˆ°çš„æ—¶é—´ä¿¡æ¯éƒ½å…·æœ‰è¾ƒé«˜çš„å‡†ç¡®åº¦ã€‚æˆ‘ä»¬å¯ä»¥å¯¹æ­¤è¿›è¡Œä¸€ç•ªæ ¼å¼å¤„ç†ä¹‹åä¸ŠæŠ¥ç»™æœåŠ¡ç«¯ï¼Œä¹Ÿå¯ä»¥åŸºäºæ­¤å»åˆ¶ä½œç›¸åº”çš„ç»Ÿè®¡å›¾è¡¨ï¼Œä»è€Œå®ç°æ›´åŠ ç²¾å‡†ã€æ›´åŠ ä¸ªæ€§åŒ–çš„æ€§èƒ½è€—æ—¶ç»Ÿè®¡ã€‚</p></blockquote><p>æ­¤å¤–ï¼Œé€šè¿‡è®¿é—® <code>performance</code> çš„ <code>memory</code> å±æ€§ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è·å–åˆ°å†…å­˜å ç”¨ç›¸å…³çš„æ•°æ®ï¼›é€šè¿‡å¯¹ <code>performance</code> çš„å…¶å®ƒå±æ€§æ–¹æ³•çš„çµæ´»è¿ç”¨ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æŠŠå®ƒè€¦åˆè¿›ä¸šåŠ¡é‡Œï¼Œå®ç°æ›´åŠ å¤šæ ·åŒ–çš„æ€§èƒ½ç›‘æµ‹éœ€æ±‚â€”â€”çµæ´»ï¼Œæ˜¯å¯ç¼–ç¨‹åŒ–æ–¹æ¡ˆæœ€å¤§çš„ä¼˜ç‚¹ã€‚</p><h3 id="å°ç»“-8" tabindex="-1"><a class="header-anchor" href="#å°ç»“-8"><span>å°ç»“</span></a></h3><ul><li>æœ¬èŠ‚æˆ‘ä»¬ä»‹ç»äº† <code>Performance</code> å¼€å‘è€…å·¥å…·ã€<code>LightHouse</code> ä¸ <code>Performance API</code> ä¸‰ç§æ€§èƒ½ç›‘æµ‹çš„æ–¹æ¡ˆã€‚åªè¦æœ‰ <code>Chrome</code> æµè§ˆå™¨ï¼Œæˆ‘ä»¬å°±å¯ä»¥å®ç°ä¸Šè¿°çš„æ‰€æœ‰æ“ä½œã€‚</li><li>ç”±æ­¤å¯ä»¥çœ‹å‡ºï¼Œæ€§èƒ½ç›‘æµ‹æœ¬èº«å¹¶ä¸éš¾ã€‚å®ƒçš„å¤æ‚åº¦æ˜¯åœ¨ä¸ä¸šåŠ¡å‘ç”Ÿè€¦åˆçš„è¿‡ç¨‹ä¸­æå‡çš„ã€‚æˆ‘ä»¬ä»Šå¤©æ‰“ä¸‹äº†åšå®çš„åœ°åŸºï¼Œåç»­éœ€è¦å¤§å®¶åœ¨ä¸šåŠ¡ä¸­å»æˆé•¿ã€å»å‘æ˜è¿™äº›å·¥å…·çš„æ›´å¤šçš„æ½œåŠ›ï¼Œè¿™æ ·æ‰èƒ½å»ºç«‹èµ·å±äºæˆ‘ä»¬è‡ªå·±çš„æŠ€æœ¯é‡‘å­—å¡”ã€‚</li></ul><p><strong>æ¨èé˜…è¯»ï¼š</strong></p><ul><li><a href="https://developers.google.com/web/tools/chrome-devtools/evaluate-performance/reference" target="_blank" rel="noopener noreferrer">Performance å®˜æ–¹æ–‡æ¡£ (opens new window)</a></li><li><a href="https://developers.google.com/web/tools/lighthouse/?hl=zh-cn" target="_blank" rel="noopener noreferrer">ä½¿ç”¨ Lighthouse å®¡æŸ¥ç½‘ç»œåº”ç”¨ (opens new window)</a></li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Performance" target="_blank" rel="noopener noreferrer">MDN Performance API ä»‹ç» (opens new window)</a></li></ul><p>é˜…è¯»å…¨æ–‡</p>`,791),hn=[bn];function _n(fn,qn){return a(),s("div",null,hn)}const wn=n(gn,[["render",_n],["__file","è¿›é˜¶æ€§èƒ½ä¼˜åŒ–.html.vue"]]),Sn=JSON.parse('{"path":"/%E8%BF%9B%E9%98%B6%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.html","title":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–ç¯‡","lang":"zh-CN","frontmatter":{"description":"åŸæ–‡é“¾æ¥: https://interview.poetries.top/docs/excellent-docs/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.html å‰ç«¯æ€§èƒ½ä¼˜åŒ–ç¯‡ ä¸€ã€å‰è¨€ çŸ¥è¯†ä½“ç³»ï¼š ä»ä¸€é“é¢è¯•é¢˜è¯´èµ· åœ¨å±•å¼€æ€§èƒ½ä¼˜åŒ–çš„è¯é¢˜ä¹‹å‰ï¼Œæˆ‘æƒ³å…ˆæŠ›å‡ºä¸€ä¸ªè€ç”Ÿå¸¸è°ˆçš„é¢è¯•é—®é¢˜ï¼š ä»è¾“å…¥ URL åˆ°é¡µé¢åŠ è½½å®Œæˆï¼Œå‘ç”Ÿäº†...","head":[["meta",{"property":"og:url","content":"https://interview.leeguoo.com/%E8%BF%9B%E9%98%B6%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.html"}],["meta",{"property":"og:site_name","content":"å‰ç«¯é¢è¯•é¢˜é›†é”¦"}],["meta",{"property":"og:title","content":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–ç¯‡"}],["meta",{"property":"og:description","content":"åŸæ–‡é“¾æ¥: https://interview.poetries.top/docs/excellent-docs/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.html å‰ç«¯æ€§èƒ½ä¼˜åŒ–ç¯‡ ä¸€ã€å‰è¨€ çŸ¥è¯†ä½“ç³»ï¼š ä»ä¸€é“é¢è¯•é¢˜è¯´èµ· åœ¨å±•å¼€æ€§èƒ½ä¼˜åŒ–çš„è¯é¢˜ä¹‹å‰ï¼Œæˆ‘æƒ³å…ˆæŠ›å‡ºä¸€ä¸ªè€ç”Ÿå¸¸è°ˆçš„é¢è¯•é—®é¢˜ï¼š ä»è¾“å…¥ URL åˆ°é¡µé¢åŠ è½½å®Œæˆï¼Œå‘ç”Ÿäº†..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_1.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-06-03T00:43:49.000Z"}],["meta",{"property":"article:modified_time","content":"2024-06-03T00:43:49.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"å‰ç«¯æ€§èƒ½ä¼˜åŒ–ç¯‡\\",\\"image\\":[\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_1.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_2.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_3.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_09_109.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_09_110.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_4.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_5.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_6.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_7.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_8.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_9.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_10.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_11.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_12.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_13.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_14.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_15.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_16.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_17.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_18.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_19.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_20.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_21.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_22.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_23.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_24.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_25.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_26.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_27.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_28.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_29.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_30.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_31.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_32.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_33.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_34.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_35.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_36.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_37.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_38.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_39.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_40.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_41.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_42.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_43.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_44.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_45.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_46.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_47.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_48.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_49.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_50.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_51.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_52.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_53.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_55.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_56.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_57.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_58.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_59.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_60.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_61.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_62.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_63.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_performance_64.png\\"],\\"dateModified\\":\\"2024-06-03T00:43:49.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"ä¸€ã€å‰è¨€","slug":"ä¸€ã€å‰è¨€","link":"#ä¸€ã€å‰è¨€","children":[{"level":3,"title":"çŸ¥è¯†ä½“ç³»ï¼š ä»ä¸€é“é¢è¯•é¢˜è¯´èµ·","slug":"çŸ¥è¯†ä½“ç³»-ä»ä¸€é“é¢è¯•é¢˜è¯´èµ·","link":"#çŸ¥è¯†ä½“ç³»-ä»ä¸€é“é¢è¯•é¢˜è¯´èµ·","children":[]},{"level":3,"title":"ä»åŸç†åˆ°å®è·µï¼šå„ä¸ªå‡»ç ´","slug":"ä»åŸç†åˆ°å®è·µ-å„ä¸ªå‡»ç ´","link":"#ä»åŸç†åˆ°å®è·µ-å„ä¸ªå‡»ç ´","children":[]}]},{"level":2,"title":"äºŒã€ç½‘ç»œç¯‡ 1ï¼šwebpack æ€§èƒ½è°ƒä¼˜ä¸ Gzip åŸç†","slug":"äºŒã€ç½‘ç»œç¯‡-1-webpack-æ€§èƒ½è°ƒä¼˜ä¸-gzip-åŸç†","link":"#äºŒã€ç½‘ç»œç¯‡-1-webpack-æ€§èƒ½è°ƒä¼˜ä¸-gzip-åŸç†","children":[{"level":3,"title":"webpack çš„æ€§èƒ½ç“¶é¢ˆ","slug":"webpack-çš„æ€§èƒ½ç“¶é¢ˆ","link":"#webpack-çš„æ€§èƒ½ç“¶é¢ˆ","children":[]},{"level":3,"title":"webpack ä¼˜åŒ–æ–¹æ¡ˆ","slug":"webpack-ä¼˜åŒ–æ–¹æ¡ˆ","link":"#webpack-ä¼˜åŒ–æ–¹æ¡ˆ","children":[]},{"level":3,"title":"æ„å»ºç»“æœä½“ç§¯å‹ç¼©","slug":"æ„å»ºç»“æœä½“ç§¯å‹ç¼©","link":"#æ„å»ºç»“æœä½“ç§¯å‹ç¼©","children":[]},{"level":3,"title":"Gzip å‹ç¼©åŸç†","slug":"gzip-å‹ç¼©åŸç†","link":"#gzip-å‹ç¼©åŸç†","children":[]}]},{"level":2,"title":"ä¸‰ã€ç½‘ç»œç¯‡ 2ï¼šå›¾ç‰‡ä¼˜åŒ–â€”â€”è´¨é‡ä¸æ€§èƒ½çš„åšå¼ˆ","slug":"ä¸‰ã€ç½‘ç»œç¯‡-2-å›¾ç‰‡ä¼˜åŒ–â€”â€”è´¨é‡ä¸æ€§èƒ½çš„åšå¼ˆ","link":"#ä¸‰ã€ç½‘ç»œç¯‡-2-å›¾ç‰‡ä¼˜åŒ–â€”â€”è´¨é‡ä¸æ€§èƒ½çš„åšå¼ˆ","children":[{"level":3,"title":"2018 å¹´ï¼Œå›¾ç‰‡ä¾ç„¶å¾ˆå¤§","slug":"_2018-å¹´-å›¾ç‰‡ä¾ç„¶å¾ˆå¤§","link":"#_2018-å¹´-å›¾ç‰‡ä¾ç„¶å¾ˆå¤§","children":[]},{"level":3,"title":"ä¸åŒä¸šåŠ¡åœºæ™¯ä¸‹çš„å›¾ç‰‡æ–¹æ¡ˆé€‰å‹","slug":"ä¸åŒä¸šåŠ¡åœºæ™¯ä¸‹çš„å›¾ç‰‡æ–¹æ¡ˆé€‰å‹","link":"#ä¸åŒä¸šåŠ¡åœºæ™¯ä¸‹çš„å›¾ç‰‡æ–¹æ¡ˆé€‰å‹","children":[]},{"level":3,"title":"å°ç»“","slug":"å°ç»“","link":"#å°ç»“","children":[]}]},{"level":2,"title":"å››ã€å­˜å‚¨ç¯‡ 1ï¼šæµè§ˆå™¨ç¼“å­˜æœºåˆ¶ä»‹ç»ä¸ç¼“å­˜ç­–ç•¥å‰–æ","slug":"å››ã€å­˜å‚¨ç¯‡-1-æµè§ˆå™¨ç¼“å­˜æœºåˆ¶ä»‹ç»ä¸ç¼“å­˜ç­–ç•¥å‰–æ","link":"#å››ã€å­˜å‚¨ç¯‡-1-æµè§ˆå™¨ç¼“å­˜æœºåˆ¶ä»‹ç»ä¸ç¼“å­˜ç­–ç•¥å‰–æ","children":[{"level":3,"title":"HTTP ç¼“å­˜æœºåˆ¶æ¢ç§˜","slug":"http-ç¼“å­˜æœºåˆ¶æ¢ç§˜","link":"#http-ç¼“å­˜æœºåˆ¶æ¢ç§˜","children":[]},{"level":3,"title":"HTTP ç¼“å­˜å†³ç­–æŒ‡å—","slug":"http-ç¼“å­˜å†³ç­–æŒ‡å—","link":"#http-ç¼“å­˜å†³ç­–æŒ‡å—","children":[]},{"level":3,"title":"MemoryCache","slug":"memorycache","link":"#memorycache","children":[]},{"level":3,"title":"Service Worker Cache","slug":"service-worker-cache","link":"#service-worker-cache","children":[]},{"level":3,"title":"Push Cache","slug":"push-cache","link":"#push-cache","children":[]},{"level":3,"title":"å°ç»“","slug":"å°ç»“-1","link":"#å°ç»“-1","children":[]}]},{"level":2,"title":"äº”ã€å­˜å‚¨ç¯‡ 2ï¼šæœ¬åœ°å­˜å‚¨â€”â€”ä» Cookie åˆ° Web Storageã€IndexDB","slug":"äº”ã€å­˜å‚¨ç¯‡-2-æœ¬åœ°å­˜å‚¨â€”â€”ä»-cookie-åˆ°-web-storageã€indexdb","link":"#äº”ã€å­˜å‚¨ç¯‡-2-æœ¬åœ°å­˜å‚¨â€”â€”ä»-cookie-åˆ°-web-storageã€indexdb","children":[{"level":3,"title":"æ•…äº‹çš„å¼€å§‹ï¼šä» Cookie è¯´èµ·","slug":"æ•…äº‹çš„å¼€å§‹-ä»-cookie-è¯´èµ·","link":"#æ•…äº‹çš„å¼€å§‹-ä»-cookie-è¯´èµ·","children":[]},{"level":3,"title":"Cookieçš„æ€§èƒ½åŠ£åŠ¿","slug":"cookieçš„æ€§èƒ½åŠ£åŠ¿","link":"#cookieçš„æ€§èƒ½åŠ£åŠ¿","children":[]},{"level":3,"title":"å‘å‰ä¸€æ­¥ï¼šWeb Storage","slug":"å‘å‰ä¸€æ­¥-web-storage","link":"#å‘å‰ä¸€æ­¥-web-storage","children":[]},{"level":3,"title":"åº”ç”¨åœºæ™¯","slug":"åº”ç”¨åœºæ™¯","link":"#åº”ç”¨åœºæ™¯","children":[]},{"level":3,"title":"ç»ˆæå½¢æ€ï¼šIndexDB","slug":"ç»ˆæå½¢æ€-indexdb","link":"#ç»ˆæå½¢æ€-indexdb","children":[]},{"level":3,"title":"å°ç»“","slug":"å°ç»“-2","link":"#å°ç»“-2","children":[]}]},{"level":2,"title":"å…­ã€CDN çš„ç¼“å­˜ä¸å›æºæœºåˆ¶è§£æ","slug":"å…­ã€cdn-çš„ç¼“å­˜ä¸å›æºæœºåˆ¶è§£æ","link":"#å…­ã€cdn-çš„ç¼“å­˜ä¸å›æºæœºåˆ¶è§£æ","children":[{"level":3,"title":"CDNçš„ç¼“å­˜ä¸å›æºæœºåˆ¶è§£æ","slug":"cdnçš„ç¼“å­˜ä¸å›æºæœºåˆ¶è§£æ","link":"#cdnçš„ç¼“å­˜ä¸å›æºæœºåˆ¶è§£æ","children":[]},{"level":3,"title":"ä¸ºä»€ä¹ˆè¦ç”¨ CDN","slug":"ä¸ºä»€ä¹ˆè¦ç”¨-cdn","link":"#ä¸ºä»€ä¹ˆè¦ç”¨-cdn","children":[]},{"level":3,"title":"CDN å¦‚ä½•å·¥ä½œ","slug":"cdn-å¦‚ä½•å·¥ä½œ","link":"#cdn-å¦‚ä½•å·¥ä½œ","children":[]},{"level":3,"title":"CDNçš„æ ¸å¿ƒåŠŸèƒ½ç‰¹å†™","slug":"cdnçš„æ ¸å¿ƒåŠŸèƒ½ç‰¹å†™","link":"#cdnçš„æ ¸å¿ƒåŠŸèƒ½ç‰¹å†™","children":[]},{"level":3,"title":"CDN ä¸å‰ç«¯æ€§èƒ½ä¼˜åŒ–","slug":"cdn-ä¸å‰ç«¯æ€§èƒ½ä¼˜åŒ–","link":"#cdn-ä¸å‰ç«¯æ€§èƒ½ä¼˜åŒ–","children":[]},{"level":3,"title":"CDN çš„å®é™…åº”ç”¨","slug":"cdn-çš„å®é™…åº”ç”¨","link":"#cdn-çš„å®é™…åº”ç”¨","children":[]},{"level":3,"title":"CDN ä¼˜åŒ–ç»†èŠ‚","slug":"cdn-ä¼˜åŒ–ç»†èŠ‚","link":"#cdn-ä¼˜åŒ–ç»†èŠ‚","children":[]}]},{"level":2,"title":"ä¸ƒã€æ¸²æŸ“ç¯‡ 1ï¼šæœåŠ¡ç«¯æ¸²æŸ“çš„æ¢ç´¢ä¸å®è·µ","slug":"ä¸ƒã€æ¸²æŸ“ç¯‡-1-æœåŠ¡ç«¯æ¸²æŸ“çš„æ¢ç´¢ä¸å®è·µ","link":"#ä¸ƒã€æ¸²æŸ“ç¯‡-1-æœåŠ¡ç«¯æ¸²æŸ“çš„æ¢ç´¢ä¸å®è·µ","children":[{"level":3,"title":"æœåŠ¡ç«¯æ¸²æŸ“çš„è¿è¡Œæœºåˆ¶","slug":"æœåŠ¡ç«¯æ¸²æŸ“çš„è¿è¡Œæœºåˆ¶","link":"#æœåŠ¡ç«¯æ¸²æŸ“çš„è¿è¡Œæœºåˆ¶","children":[]},{"level":3,"title":"æœåŠ¡ç«¯æ¸²æŸ“è§£å†³äº†ä»€ä¹ˆæ€§èƒ½é—®é¢˜","slug":"æœåŠ¡ç«¯æ¸²æŸ“è§£å†³äº†ä»€ä¹ˆæ€§èƒ½é—®é¢˜","link":"#æœåŠ¡ç«¯æ¸²æŸ“è§£å†³äº†ä»€ä¹ˆæ€§èƒ½é—®é¢˜","children":[]},{"level":3,"title":"æœåŠ¡ç«¯æ¸²æŸ“çš„åº”ç”¨å®ä¾‹","slug":"æœåŠ¡ç«¯æ¸²æŸ“çš„åº”ç”¨å®ä¾‹","link":"#æœåŠ¡ç«¯æ¸²æŸ“çš„åº”ç”¨å®ä¾‹","children":[]},{"level":3,"title":"æœåŠ¡ç«¯æ¸²æŸ“çš„åº”ç”¨åœºæ™¯","slug":"æœåŠ¡ç«¯æ¸²æŸ“çš„åº”ç”¨åœºæ™¯","link":"#æœåŠ¡ç«¯æ¸²æŸ“çš„åº”ç”¨åœºæ™¯","children":[]}]},{"level":2,"title":"å…«ã€æ¸²æŸ“ç¯‡ 2ï¼šçŸ¥å·±çŸ¥å½¼â€”â€”è§£é”æµè§ˆå™¨èƒŒåçš„è¿è¡Œæœºåˆ¶","slug":"å…«ã€æ¸²æŸ“ç¯‡-2-çŸ¥å·±çŸ¥å½¼â€”â€”è§£é”æµè§ˆå™¨èƒŒåçš„è¿è¡Œæœºåˆ¶","link":"#å…«ã€æ¸²æŸ“ç¯‡-2-çŸ¥å·±çŸ¥å½¼â€”â€”è§£é”æµè§ˆå™¨èƒŒåçš„è¿è¡Œæœºåˆ¶","children":[{"level":3,"title":"æµè§ˆå™¨çš„â€œå¿ƒâ€","slug":"æµè§ˆå™¨çš„-å¿ƒ","link":"#æµè§ˆå™¨çš„-å¿ƒ","children":[]},{"level":3,"title":"å¼€å¯æµè§ˆå™¨æ¸²æŸ“â€œé»‘ç›’â€","slug":"å¼€å¯æµè§ˆå™¨æ¸²æŸ“-é»‘ç›’","link":"#å¼€å¯æµè§ˆå™¨æ¸²æŸ“-é»‘ç›’","children":[]},{"level":3,"title":"æµè§ˆå™¨æ¸²æŸ“è¿‡ç¨‹è§£æ","slug":"æµè§ˆå™¨æ¸²æŸ“è¿‡ç¨‹è§£æ","link":"#æµè§ˆå™¨æ¸²æŸ“è¿‡ç¨‹è§£æ","children":[]},{"level":3,"title":"å‡ æ£µé‡è¦çš„â€œæ ‘â€","slug":"å‡ æ£µé‡è¦çš„-æ ‘","link":"#å‡ æ£µé‡è¦çš„-æ ‘","children":[]}]},{"level":2,"title":"ä¸åšæ— ç”¨åŠŸï¼šåŸºäºæ¸²æŸ“æµç¨‹çš„ CSS ä¼˜åŒ–å»ºè®®","slug":"ä¸åšæ— ç”¨åŠŸ-åŸºäºæ¸²æŸ“æµç¨‹çš„-css-ä¼˜åŒ–å»ºè®®","link":"#ä¸åšæ— ç”¨åŠŸ-åŸºäºæ¸²æŸ“æµç¨‹çš„-css-ä¼˜åŒ–å»ºè®®","children":[{"level":3,"title":"å‘Šåˆ«é˜»å¡ï¼šCSS ä¸ JS çš„åŠ è½½é¡ºåºä¼˜åŒ–","slug":"å‘Šåˆ«é˜»å¡-css-ä¸-js-çš„åŠ è½½é¡ºåºä¼˜åŒ–","link":"#å‘Šåˆ«é˜»å¡-css-ä¸-js-çš„åŠ è½½é¡ºåºä¼˜åŒ–","children":[]},{"level":3,"title":"å°ç»“","slug":"å°ç»“-3","link":"#å°ç»“-3","children":[]}]},{"level":2,"title":"ä¹ã€æ¸²æŸ“ç¯‡ 3ï¼šå¯¹ç—‡ä¸‹è¯â€”â€”DOM ä¼˜åŒ–åŸç†ä¸åŸºæœ¬å®è·µ","slug":"ä¹ã€æ¸²æŸ“ç¯‡-3-å¯¹ç—‡ä¸‹è¯â€”â€”dom-ä¼˜åŒ–åŸç†ä¸åŸºæœ¬å®è·µ","link":"#ä¹ã€æ¸²æŸ“ç¯‡-3-å¯¹ç—‡ä¸‹è¯â€”â€”dom-ä¼˜åŒ–åŸç†ä¸åŸºæœ¬å®è·µ","children":[{"level":3,"title":"æœ›é—»é—®åˆ‡ï¼šDOM ä¸ºä»€ä¹ˆè¿™ä¹ˆæ…¢","slug":"æœ›é—»é—®åˆ‡-dom-ä¸ºä»€ä¹ˆè¿™ä¹ˆæ…¢","link":"#æœ›é—»é—®åˆ‡-dom-ä¸ºä»€ä¹ˆè¿™ä¹ˆæ…¢","children":[]}]},{"level":2,"title":"è¯åˆ°ç—…é™¤ï¼šç»™ä½ çš„ DOM â€œææé€Ÿâ€","slug":"è¯åˆ°ç—…é™¤-ç»™ä½ çš„-dom-ææé€Ÿ","link":"#è¯åˆ°ç—…é™¤-ç»™ä½ çš„-dom-ææé€Ÿ","children":[]},{"level":2,"title":"åã€æ¸²æŸ“ç¯‡ 4ï¼šåƒæ–¹ç™¾è®¡â€”â€”Event Loop ä¸å¼‚æ­¥æ›´æ–°ç­–ç•¥","slug":"åã€æ¸²æŸ“ç¯‡-4-åƒæ–¹ç™¾è®¡â€”â€”event-loop-ä¸å¼‚æ­¥æ›´æ–°ç­–ç•¥","link":"#åã€æ¸²æŸ“ç¯‡-4-åƒæ–¹ç™¾è®¡â€”â€”event-loop-ä¸å¼‚æ­¥æ›´æ–°ç­–ç•¥","children":[{"level":3,"title":"å‰ç½®çŸ¥è¯†ï¼šEvent Loop ä¸­çš„â€œæ¸²æŸ“æ—¶æœºâ€","slug":"å‰ç½®çŸ¥è¯†-event-loop-ä¸­çš„-æ¸²æŸ“æ—¶æœº","link":"#å‰ç½®çŸ¥è¯†-event-loop-ä¸­çš„-æ¸²æŸ“æ—¶æœº","children":[]},{"level":3,"title":"Micro-Task ä¸ Macro-Task","slug":"micro-task-ä¸-macro-task","link":"#micro-task-ä¸-macro-task","children":[]},{"level":3,"title":"Event Loop è¿‡ç¨‹è§£æ","slug":"event-loop-è¿‡ç¨‹è§£æ","link":"#event-loop-è¿‡ç¨‹è§£æ","children":[]},{"level":3,"title":"æ¸²æŸ“çš„æ—¶æœº","slug":"æ¸²æŸ“çš„æ—¶æœº","link":"#æ¸²æŸ“çš„æ—¶æœº","children":[]},{"level":3,"title":"ç”Ÿäº§å®è·µï¼šå¼‚æ­¥æ›´æ–°ç­–ç•¥â€”â€”ä»¥ Vue ä¸ºä¾‹","slug":"ç”Ÿäº§å®è·µ-å¼‚æ­¥æ›´æ–°ç­–ç•¥â€”â€”ä»¥-vue-ä¸ºä¾‹","link":"#ç”Ÿäº§å®è·µ-å¼‚æ­¥æ›´æ–°ç­–ç•¥â€”â€”ä»¥-vue-ä¸ºä¾‹","children":[]},{"level":3,"title":"å°ç»“","slug":"å°ç»“-4","link":"#å°ç»“-4","children":[]}]},{"level":2,"title":"åä¸€ã€æ¸²æŸ“ç¯‡ 5ï¼šæœ€åä¸€å‡»â€”â€”å›æµï¼ˆReflowï¼‰ä¸é‡ç»˜ï¼ˆRepaintï¼‰","slug":"åä¸€ã€æ¸²æŸ“ç¯‡-5-æœ€åä¸€å‡»â€”â€”å›æµ-reflow-ä¸é‡ç»˜-repaint","link":"#åä¸€ã€æ¸²æŸ“ç¯‡-5-æœ€åä¸€å‡»â€”â€”å›æµ-reflow-ä¸é‡ç»˜-repaint","children":[{"level":3,"title":"å“ªäº›å®é™…æ“ä½œä¼šå¯¼è‡´å›æµä¸é‡ç»˜","slug":"å“ªäº›å®é™…æ“ä½œä¼šå¯¼è‡´å›æµä¸é‡ç»˜","link":"#å“ªäº›å®é™…æ“ä½œä¼šå¯¼è‡´å›æµä¸é‡ç»˜","children":[]},{"level":3,"title":"å¦‚ä½•è§„é¿å›æµä¸é‡ç»˜","slug":"å¦‚ä½•è§„é¿å›æµä¸é‡ç»˜","link":"#å¦‚ä½•è§„é¿å›æµä¸é‡ç»˜","children":[]},{"level":3,"title":"Flush é˜Ÿåˆ—ï¼šæµè§ˆå™¨å¹¶æ²¡æœ‰é‚£ä¹ˆç®€å•","slug":"flush-é˜Ÿåˆ—-æµè§ˆå™¨å¹¶æ²¡æœ‰é‚£ä¹ˆç®€å•","link":"#flush-é˜Ÿåˆ—-æµè§ˆå™¨å¹¶æ²¡æœ‰é‚£ä¹ˆç®€å•","children":[]},{"level":3,"title":"å°ç»“","slug":"å°ç»“-5","link":"#å°ç»“-5","children":[]}]},{"level":2,"title":"åäºŒã€åº”ç”¨ç¯‡ 1ï¼šä¼˜åŒ–é¦–å±ä½“éªŒâ€”â€”Lazy-Load åˆæ¢","slug":"åäºŒã€åº”ç”¨ç¯‡-1-ä¼˜åŒ–é¦–å±ä½“éªŒâ€”â€”lazy-load-åˆæ¢","link":"#åäºŒã€åº”ç”¨ç¯‡-1-ä¼˜åŒ–é¦–å±ä½“éªŒâ€”â€”lazy-load-åˆæ¢","children":[{"level":3,"title":"Lazy-Load åˆç›¸è§","slug":"lazy-load-åˆç›¸è§","link":"#lazy-load-åˆç›¸è§","children":[]},{"level":3,"title":"ä¸€èµ·å†™ä¸€ä¸ª Lazy-Load å§ï¼","slug":"ä¸€èµ·å†™ä¸€ä¸ª-lazy-load-å§","link":"#ä¸€èµ·å†™ä¸€ä¸ª-lazy-load-å§","children":[]},{"level":3,"title":"å°ç»“","slug":"å°ç»“-6","link":"#å°ç»“-6","children":[]}]},{"level":2,"title":"åä¸‰ã€åº”ç”¨ç¯‡ 2ï¼šäº‹ä»¶çš„èŠ‚æµï¼ˆthrottleï¼‰ä¸é˜²æŠ–ï¼ˆdebounceï¼‰","slug":"åä¸‰ã€åº”ç”¨ç¯‡-2-äº‹ä»¶çš„èŠ‚æµ-throttle-ä¸é˜²æŠ–-debounce","link":"#åä¸‰ã€åº”ç”¨ç¯‡-2-äº‹ä»¶çš„èŠ‚æµ-throttle-ä¸é˜²æŠ–-debounce","children":[{"level":3,"title":"â€œèŠ‚æµâ€ä¸â€œé˜²æŠ–â€çš„æœ¬è´¨","slug":"èŠ‚æµ-ä¸-é˜²æŠ–-çš„æœ¬è´¨","link":"#èŠ‚æµ-ä¸-é˜²æŠ–-çš„æœ¬è´¨","children":[]},{"level":3,"title":"Throttleï¼š ç¬¬ä¸€ä¸ªäººè¯´äº†ç®—","slug":"throttle-ç¬¬ä¸€ä¸ªäººè¯´äº†ç®—","link":"#throttle-ç¬¬ä¸€ä¸ªäººè¯´äº†ç®—","children":[]},{"level":3,"title":"Debounceï¼š æœ€åä¸€ä¸ªäººè¯´äº†ç®—","slug":"debounce-æœ€åä¸€ä¸ªäººè¯´äº†ç®—","link":"#debounce-æœ€åä¸€ä¸ªäººè¯´äº†ç®—","children":[]},{"level":3,"title":"ç”¨ Throttle æ¥ä¼˜åŒ– Debounce","slug":"ç”¨-throttle-æ¥ä¼˜åŒ–-debounce","link":"#ç”¨-throttle-æ¥ä¼˜åŒ–-debounce","children":[]},{"level":3,"title":"å°ç»“","slug":"å°ç»“-7","link":"#å°ç»“-7","children":[]}]},{"level":2,"title":"åå››ã€æ€§èƒ½ç›‘æµ‹ç¯‡ï¼šPerformanceã€LightHouse ä¸æ€§èƒ½ API","slug":"åå››ã€æ€§èƒ½ç›‘æµ‹ç¯‡-performanceã€lighthouse-ä¸æ€§èƒ½-api","link":"#åå››ã€æ€§èƒ½ç›‘æµ‹ç¯‡-performanceã€lighthouse-ä¸æ€§èƒ½-api","children":[{"level":3,"title":"å¯è§†åŒ–ç›‘æµ‹ï¼šä» Performance é¢æ¿è¯´èµ·","slug":"å¯è§†åŒ–ç›‘æµ‹-ä»-performance-é¢æ¿è¯´èµ·","link":"#å¯è§†åŒ–ç›‘æµ‹-ä»-performance-é¢æ¿è¯´èµ·","children":[]},{"level":3,"title":"å¯è§†åŒ–ç›‘æµ‹ï¼š æ›´åŠ èªæ˜çš„ LightHouse","slug":"å¯è§†åŒ–ç›‘æµ‹-æ›´åŠ èªæ˜çš„-lighthouse","link":"#å¯è§†åŒ–ç›‘æµ‹-æ›´åŠ èªæ˜çš„-lighthouse","children":[]},{"level":3,"title":"å¯ç¼–ç¨‹çš„æ€§èƒ½ä¸ŠæŠ¥æ–¹æ¡ˆï¼š W3C æ€§èƒ½ API","slug":"å¯ç¼–ç¨‹çš„æ€§èƒ½ä¸ŠæŠ¥æ–¹æ¡ˆ-w3c-æ€§èƒ½-api","link":"#å¯ç¼–ç¨‹çš„æ€§èƒ½ä¸ŠæŠ¥æ–¹æ¡ˆ-w3c-æ€§èƒ½-api","children":[]},{"level":3,"title":"å°ç»“","slug":"å°ç»“-8","link":"#å°ç»“-8","children":[]}]}],"git":{"updatedTime":1717375429000,"contributors":[{"name":"guoli","email":"guoli@zhihu.com","commits":1}]},"autoDesc":true,"filePathRelative":"è¿›é˜¶æ€§èƒ½ä¼˜åŒ–.md","excerpt":"<p>åŸæ–‡é“¾æ¥: <a href=\\"https://interview.poetries.top/docs/excellent-docs/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.html\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://interview.poetries.top/docs/excellent-docs/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.html</a></p>\\n<h1>å‰ç«¯æ€§èƒ½ä¼˜åŒ–ç¯‡</h1>\\n<h2>ä¸€ã€å‰è¨€</h2>\\n<h3>çŸ¥è¯†ä½“ç³»ï¼š ä»ä¸€é“é¢è¯•é¢˜è¯´èµ·</h3>"}');export{wn as comp,Sn as data};
