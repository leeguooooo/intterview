import{_ as n,c as s,o as a,a as e}from"./app-f2Cpj3V4.js";const p="/images/s_poetries_work_gitee_2020_07_71.png",t="/images/s_poetries_work_gitee_2020_07_72.png",o="/images/s_poetries_work_gitee_2020_07_73.png",c={},l=e(`<p>原文链接: <a href="https://interview.poetries.top/principle-docs/webpack/02-webpack%E4%B8%AD%E7%9A%84HMR%E7%83%AD%E6%9B%B4%E6%96%B0%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90.html" target="_blank" rel="noopener noreferrer">https://interview.poetries.top/principle-docs/webpack/02-webpack%E4%B8%AD%E7%9A%84HMR%E7%83%AD%E6%9B%B4%E6%96%B0%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90.html</a></p><p><code>Hot Module Replacement</code>（以下简称 <code>HMR</code>）是 <code>webpack</code> 发展至今引入的最令人兴奋的特性之一 ，当你对代码进行修改并保存后，<code>webpack</code> 将对代码重新打包，并将新的模块发送到浏览器端，浏览器通过新的模块替换老的模块，这样在不刷新浏览器的前提下就能够对应用进行更新。</p><blockquote><p>基本实现原理大致这样的，构建 <code>bundle</code> 的时候，加入一段 <code>HMR runtime</code> 的 js 和一段和服务沟通的 js 。文件修改会触发 <code>webpack</code> 重新构建，服务器通过向浏览器发送更新消息，浏览器通过 <code>jsonp</code> 拉取更新的模块文件，<code>jsonp</code> 回调触发模块热替换逻辑</p></blockquote><h3 id="热更新配置" tabindex="-1"><a class="header-anchor" href="#热更新配置"><span>热更新配置</span></a></h3><blockquote><p>使用<code>webpack-dev-server</code>,设置 <code>hot</code> 属性为 <code>true.</code>写模块时，按照以下写法:</p></blockquote><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>module<span class="token punctuation">.</span>hot<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//判断是否有热加载</span></span>
<span class="line">        module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token string">&#39;./hmrTest.js&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//热加载的模块路径</span></span>
<span class="line">            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Accepting the updated printMe module!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//热加载的回调，即发生了模块更新时，执行什么 callback</span></span>
<span class="line">            <span class="token function">printMe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>缺点：更新逻辑得自己写。比如要使页面显示的内容生效，需要在回调中写入<code>document.append(xxx)</code></li></ul><blockquote><p><code>react</code> 的热加载，使用 <code>react-hot-loader</code></p></blockquote><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line">    <span class="token keyword">import</span> <span class="token punctuation">{</span> hot <span class="token punctuation">}</span> <span class="token keyword">from</span><span class="token string">&#39;react-hot-loader&#39;</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">const</span> <span class="token function-variable function">Record</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token operator">...</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        exportdefault <span class="token function">hot</span><span class="token punctuation">(</span>module<span class="token punctuation">)</span><span class="token punctuation">(</span>Record<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    或</span>
<span class="line">    </span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>module<span class="token punctuation">.</span>hot<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token string">&#39;./App&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token keyword">var</span> NextApp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./App&#39;</span><span class="token punctuation">)</span></span>
<span class="line">                ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>NextApp <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> rootEl<span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="实现过程" tabindex="-1"><a class="header-anchor" href="#实现过程"><span>实现过程</span></a></h3><ul><li><code>watch</code> 编译过程、<code>devServer</code> 推送更新消息到浏览器</li><li>浏览器接收到服务端消息做出响应</li><li>对模块进行热更新或刷新页面</li></ul><h3 id="watch-编译过程、devserver-推送更新消息到浏览器" tabindex="-1"><a class="header-anchor" href="#watch-编译过程、devserver-推送更新消息到浏览器"><span>watch 编译过程、devServer 推送更新消息到浏览器</span></a></h3><ol><li><code>webpack-dev-server</code> 里引用了 <code>webpack-dev-middleware</code>，相关的 <code>watch</code> 逻辑就是在里面实现的</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line">    <span class="token comment">//webpack-dev-server/lib/Server.js</span></span>
<span class="line">    <span class="token function">setupDevMiddleware</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>middleware <span class="token operator">=</span> <span class="token function">webpackDevMiddleware</span><span class="token punctuation">(</span></span>
<span class="line">            <span class="token keyword">this</span><span class="token punctuation">.</span>compiler<span class="token punctuation">,</span></span>
<span class="line">            Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">logLevel</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>log<span class="token punctuation">.</span>options<span class="token punctuation">.</span>level <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token comment">// webpack-dev-middleware/index.js</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>options<span class="token punctuation">.</span>lazy<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        context<span class="token punctuation">.</span>watching <span class="token operator">=</span> compiler<span class="token punctuation">.</span><span class="token function">watch</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>watchOptions<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token operator">...</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>以上代码可以看出，<code>webpack-dev-middleware</code> 是通过调用 <code>webpack</code> 的 <code>api</code> 对文件系统 <code>watch</code> 的。<code>watchOptions</code> 如果没有配置的话，会取默认值。值的含义见：https://webpack.js.org/configuration/watch/</p></blockquote><ol start="2"><li>当文件发生变化时，重新编译输出 <code>bundle.js</code>。<code>devServer</code> 下，是没有文件会输出到 <code>output.path</code> 目录下的，这时 <code>webpack</code> 是把文件输出到了内存中。<code>webpack</code> 中使用的操作内存的库是 <code>memory-fs</code>，它是 <code>NodeJS</code>原生 <code>fs</code> 模块内存版(<code>in-memory</code>)的完整功能实现，会将你请求的<code>url</code>映射到对应的内存区域当中，因此读写都比较快</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line">    <span class="token comment">// webpack-dev-middleware/lib/fs.js</span></span>
<span class="line">    fileSystem <span class="token operator">=</span> fs<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token function">elseif</span> <span class="token punctuation">(</span><span class="token parameter">isMemoryFs</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        fileSystem <span class="token operator">=</span> compiler<span class="token punctuation">.</span>outputFileSystem<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">        fileSystem <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MemoryFileSystem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        compiler<span class="token punctuation">.</span>outputFileSystem <span class="token operator">=</span> fileSystem<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li><code>devServer</code> 通知浏览器端文件发生改变，在启动 <code>devServer</code> 的时候，<code>sockjs</code> 在服务端和浏览器端建立了一个 <code>webSocket</code> 长连接，以便将 <code>webpack</code> 编译和打包的各个阶段状态告知浏览器，最关键的步骤还是 <code>webpack-dev-server</code> 调用 <code>webpack api</code> 监听 <code>compile</code>的 <code>done</code> 事件，当<code>compile</code> 完成后，<code>webpack-dev-server</code>通过 <code>_sendStatus</code> 方法将编译打包后的新模块 <code>hash</code> 值发送到浏览器端</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line">    <span class="token comment">// webpack-dev-server/lib/Server.js</span></span>
<span class="line">    <span class="token keyword">const</span> <span class="token function-variable function">addHooks</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token operator">...</span></span>
<span class="line">        done<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">&#39;webpack-dev-server&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">stats</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_sendStats</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>sockets<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getStats</span><span class="token punctuation">(</span>stats<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">this</span><span class="token punctuation">.</span>_stats <span class="token operator">=</span> stats<span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token operator">...</span></span>
<span class="line">    <span class="token function">_sendStats</span><span class="token punctuation">(</span><span class="token parameter">sockets<span class="token punctuation">,</span> stats<span class="token punctuation">,</span> force</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token operator">...</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">sockWrite</span><span class="token punctuation">(</span>sockets<span class="token punctuation">,</span> <span class="token string">&#39;hash&#39;</span><span class="token punctuation">,</span> stats<span class="token punctuation">.</span>hash<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>stats<span class="token punctuation">.</span>errors<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">sockWrite</span><span class="token punctuation">(</span>sockets<span class="token punctuation">,</span> <span class="token string">&#39;errors&#39;</span><span class="token punctuation">,</span> stats<span class="token punctuation">.</span>errors<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token function">elseif</span> <span class="token punctuation">(</span><span class="token parameter">stats<span class="token punctuation">.</span>warnings<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">sockWrite</span><span class="token punctuation">(</span>sockets<span class="token punctuation">,</span> <span class="token string">&#39;warnings&#39;</span><span class="token punctuation">,</span> stats<span class="token punctuation">.</span>warnings<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">sockWrite</span><span class="token punctuation">(</span>sockets<span class="token punctuation">,</span> <span class="token string">&#39;ok&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="浏览器接收到服务端消息做出响应" tabindex="-1"><a class="header-anchor" href="#浏览器接收到服务端消息做出响应"><span>浏览器接收到服务端消息做出响应</span></a></h3><ol><li>这里的主要逻辑位于 <code>webpack-dev-server/client-src</code> 中，<code>webpack-dev-server</code> 修改了<code>webpack</code> 配置中的 <code>entry</code> 属性，在里面添加了 <code>webpack-dev-client</code> 的代码，这样在最后的 <code>bundle.js</code> 文件中就会有接收 <code>websocket</code> 消息的代码了</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line">    <span class="token comment">//webpack-dev-server/lib/utils/addEntries.js</span></span>
<span class="line">    <span class="token keyword">let</span> hotEntry<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>hotOnly<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        hotEntry <span class="token operator">=</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;webpack/hot/only-dev-server&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token function">elseif</span> <span class="token punctuation">(</span><span class="token parameter">options<span class="token punctuation">.</span>hot</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        hotEntry <span class="token operator">=</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;webpack/hot/dev-server&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token operator">...</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>hotEntry <span class="token operator">&amp;&amp;</span> <span class="token function">checkInject</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>injectHot<span class="token punctuation">,</span> config<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        additionalEntries<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>hotEntry<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    config<span class="token punctuation">.</span>entry <span class="token operator">=</span> <span class="token function">prependEntry</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>entry <span class="token operator">||</span> <span class="token string">&#39;./src&#39;</span><span class="token punctuation">,</span> additionalEntries<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>以上代码可以看出，如果选择了热加载，输出的 <code>bundle.js</code> 会包含接收 <code>websocket</code> 消息的代码。而且 plugin 也会注入一个 <code>HotModuleReplacementPlugin</code>，构建过程中热加载相关的逻辑都在这个插件中。这个插件主要处理两部分逻辑：</li></ol><ul><li>注入 <code>HMR runtime</code> 逻辑</li><li>找到修改的模块，生成一个补丁 <code>js</code> 文件和更新描述 <code>json</code> 文件</li></ul><p>先看一张图，看看 websocket 中的消息长什么样子：</p><p><img src="`+p+`" alt=""></p><blockquote><p>可以看到，接收的消息只有 <code>type</code> 和 <code>hash</code> 两个内容。在 <code>client</code> 里面的逻辑，他们分别对应不同的处理逻辑：</p></blockquote><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line">    <span class="token comment">// webpack-dev-server/client-src/default/index.js</span></span>
<span class="line">    <span class="token function">hash</span><span class="token punctuation">(</span><span class="token parameter">hash</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        status<span class="token punctuation">.</span>currentHash <span class="token operator">=</span> hash<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token operator">...</span></span>
<span class="line">    <span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token string">&#39;Ok&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>useWarningOverlay <span class="token operator">||</span> options<span class="token punctuation">.</span>useErrorOverlay<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            overlay<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>initial<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">return</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>initial <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token comment">// eslint-disable-line no-return-assign</span></span>
<span class="line">        <span class="token function">reloadApp</span><span class="token punctuation">(</span>options<span class="token punctuation">,</span> status<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>可以看出，当接收到 <code>type</code> 为 <code>hash</code> 消息后会将 <code>hash</code> 值暂存起来，当接收到 <code>type</code> 为 <code>ok</code> 的消息后对应用执行 <code>reload</code> 操作，而 <code>hash</code> 消息是在 <code>ok</code> 消息之前的。再看看 <code>reload</code> 里面的处理逻辑：</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line">    <span class="token comment">// webpack-dev-server/client-src/default/reloadApp.js</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>hot<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token operator">...</span></span>
<span class="line">        <span class="token keyword">const</span> hotEmitter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpack/hot/emitter&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            hotEmitter<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&#39;webpackHotUpdate&#39;</span><span class="token punctuation">,</span> currentHash<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> self <span class="token operator">!==</span> <span class="token string">&#39;undefined&#39;</span> <span class="token operator">&amp;&amp;</span> self<span class="token punctuation">.</span>window<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            self<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">webpackHotUpdate</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>currentHash<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span> <span class="token string">&#39;*&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>可以看出，如果配置了模块热更新，就调用 <code>webpack/hot/emitter</code> 将最新 <code>hash</code> 值发送给 <code>webpack</code>，然后将控制权交给 <code>webpack</code> 客户端代码。如果没有配置模块热更新，就进行 <code>liveReload</code> 的逻辑。<code>webpack/hot/dev-server</code> 中会监听 <code>webpack-dev-server/client-src</code> 发送的 <code>webpackHotUpdate</code> 消息,然后调用 <code>webpack/lib/HotModuleReplacement.runtime</code> 中的 <code>check</code> 方法，检测是否有新的更新：</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line">    <span class="token comment">// webpack/hot/dev-server.js</span></span>
<span class="line">    <span class="token keyword">var</span> hotEmitter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./emitter&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        hotEmitter<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;webpackHotUpdate&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">currentHash</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            lastHash <span class="token operator">=</span> currentHash<span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">upToDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;idle&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;info&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;[HMR] Checking for updates on the server...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token function">check</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        </span>
<span class="line">    <span class="token comment">// webpack/lib/HotModuleReplacement.runtime</span></span>
<span class="line">        <span class="token keyword">function</span> <span class="token function">hotCheck</span><span class="token punctuation">(</span><span class="token parameter">apply</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token operator">...</span></span>
<span class="line">            <span class="token keyword">return</span> <span class="token function">hotDownloadManifest</span><span class="token punctuation">(</span>hotRequestTimeout<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">update</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token operator">...</span></span>
<span class="line">                    <span class="token function">hotEnsureUpdateChunk</span><span class="token punctuation">(</span>chunkId<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token operator">...</span></span>
<span class="line">                <span class="token keyword">return</span> promise<span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>以上代码可以看出，在 <code>check</code> 过程中，主要调用了两个方法 <code>hotDownloadManifest</code> 和 <code>hotDownloadUpdateChunk</code>。<code>hotDownloadManifest</code> 是通过 <code>Ajax</code> 向服务器请求十分有更新的文件，如果有就返回对应的文件信息，<code>hotDownloadUpdateChunk</code> 是通过<code>Jsonp</code>的方式，请求最新的代码模块。如下图所示:</li></ol><p><img src="`+t+'" alt=""><img src="'+o+`" alt=""></p><blockquote><p>补充，这两个文件的名称是可以配置的，如果没有配置，则取定义在 <code>WebpackOptionsDefaulter</code> 中的默认配置。</p></blockquote><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;output.hotUpdateChunkFilename&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;[id].[hash].hot-update.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;output.hotUpdateMainFilename&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;[hash].hot-update.json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="对模块进行热更新或刷新页面" tabindex="-1"><a class="header-anchor" href="#对模块进行热更新或刷新页面"><span>对模块进行热更新或刷新页面</span></a></h3><blockquote><p>综上，我们获得了更新的内容。接下来就可以进行更新了。这部分的逻辑在 <code>webpack/lib/HotModuleReplacement.runtime</code> 中。</p></blockquote><ol><li>首先，更新过的模块，现在都属于 <code>outdate</code>d 的模块，所以先找出过期的模块及其依赖:</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line">    <span class="token comment">//webpack/lib/HotModuleReplacement.runtime  </span></span>
<span class="line">    <span class="token keyword">function</span> <span class="token function">getAffectedStuff</span><span class="token punctuation">(</span><span class="token parameter">updateModuleId</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">var</span> outdatedModules <span class="token operator">=</span> <span class="token punctuation">[</span>updateModuleId<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token keyword">var</span> outdatedDependencies <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token operator">...</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;accepted&quot;</span><span class="token punctuation">,</span></span>
<span class="line">          <span class="token literal-property property">moduleId</span><span class="token operator">:</span> updateModuleId<span class="token punctuation">,</span></span>
<span class="line">          <span class="token literal-property property">outdatedModules</span><span class="token operator">:</span> outdatedModules<span class="token punctuation">,</span></span>
<span class="line">          <span class="token literal-property property">outdatedDependencies</span><span class="token operator">:</span> outdatedDependencies</span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>根据调用的 <code>Api</code> 信息，对结果进行标注及处理。</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line">    <span class="token keyword">switch</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">case</span><span class="token string">&quot;self-declined&quot;</span><span class="token operator">:</span></span>
<span class="line">          <span class="token operator">...</span></span>
<span class="line">          <span class="token keyword">break</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token keyword">case</span><span class="token string">&quot;declined&quot;</span><span class="token operator">:</span></span>
<span class="line">          <span class="token operator">...</span></span>
<span class="line">          <span class="token keyword">break</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token keyword">case</span><span class="token string">&quot;unaccepted&quot;</span><span class="token operator">:</span></span>
<span class="line">          <span class="token operator">...</span></span>
<span class="line">          <span class="token keyword">break</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token keyword">case</span><span class="token string">&quot;accepted&quot;</span><span class="token operator">:</span></span>
<span class="line">          <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>onAccepted<span class="token punctuation">)</span> options<span class="token punctuation">.</span><span class="token function">onAccepted</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">          doApply <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span>
<span class="line">          <span class="token keyword">break</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token keyword">case</span><span class="token string">&quot;disposed&quot;</span><span class="token operator">:</span></span>
<span class="line">          <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>onDisposed<span class="token punctuation">)</span> options<span class="token punctuation">.</span><span class="token function">onDisposed</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">          doDispose <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span>
<span class="line">          <span class="token keyword">break</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>从缓存中删除过期的模块和依赖</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line">    <span class="token comment">// remove module from cache</span></span>
<span class="line">      <span class="token keyword">delete</span> installedModules<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">    </span>
<span class="line">      <span class="token comment">// when disposing there is no need to call dispose handler</span></span>
<span class="line">      <span class="token keyword">delete</span> outdatedDependencies<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">    </span>
<span class="line">      <span class="token comment">// remove &quot;parents&quot; references from all children</span></span>
<span class="line">      <span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> module<span class="token punctuation">.</span>children<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token operator">...</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">      <span class="token comment">// remove outdated dependency from module children</span></span>
<span class="line">    <span class="token keyword">var</span> dependency<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">var</span> moduleOutdatedDependencies<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">for</span> <span class="token punctuation">(</span>moduleId <span class="token keyword">in</span> outdatedDependencies<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token operator">...</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>将新的模块添加到 <code>modules</code> 中，当下次调用 <code>webpack_require</code> (<code>webpack</code> 重写的 <code>require</code> 方法)方法的时候，就是获取到了新的模块代码了。</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line">    <span class="token comment">// insert new code</span></span>
<span class="line">    <span class="token keyword">for</span> <span class="token punctuation">(</span>moduleId <span class="token keyword">in</span> appliedUpdate<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>appliedUpdate<span class="token punctuation">,</span> moduleId<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        modules<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span> <span class="token operator">=</span> appliedUpdate<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>最后就是错误的兼容了，如果热加载失败，将会刷新浏览器。</p></blockquote><p>阅读全文</p>`,48),i=[l];function u(d,r){return a(),s("div",null,i)}const v=n(c,[["render",u],["__file","Webpack-02-webpack中的HMR热更新原理剖析.html.vue"]]),m=JSON.parse('{"path":"/Webpack-02-webpack%E4%B8%AD%E7%9A%84HMR%E7%83%AD%E6%9B%B4%E6%96%B0%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90.html","title":"","lang":"zh-CN","frontmatter":{"description":"原文链接: https://interview.poetries.top/principle-docs/webpack/02-webpack%E4%B8%AD%E7%9A%84HMR%E7%83%AD%E6%9B%B4%E6%96%B0%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90.html Hot Module Replac...","head":[["meta",{"property":"og:url","content":"https://interview.leeguoo.com/Webpack-02-webpack%E4%B8%AD%E7%9A%84HMR%E7%83%AD%E6%9B%B4%E6%96%B0%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90.html"}],["meta",{"property":"og:site_name","content":"前端面试题集锦"}],["meta",{"property":"og:description","content":"原文链接: https://interview.poetries.top/principle-docs/webpack/02-webpack%E4%B8%AD%E7%9A%84HMR%E7%83%AD%E6%9B%B4%E6%96%B0%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90.html Hot Module Replac..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_71.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-06-06T05:59:31.000Z"}],["meta",{"property":"article:modified_time","content":"2024-06-06T05:59:31.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"\\",\\"image\\":[\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_71.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_72.png\\",\\"https://interview.leeguoo.com/images/s_poetries_work_gitee_2020_07_73.png\\"],\\"dateModified\\":\\"2024-06-06T05:59:31.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":3,"title":"热更新配置","slug":"热更新配置","link":"#热更新配置","children":[]},{"level":3,"title":"实现过程","slug":"实现过程","link":"#实现过程","children":[]},{"level":3,"title":"watch 编译过程、devServer 推送更新消息到浏览器","slug":"watch-编译过程、devserver-推送更新消息到浏览器","link":"#watch-编译过程、devserver-推送更新消息到浏览器","children":[]},{"level":3,"title":"浏览器接收到服务端消息做出响应","slug":"浏览器接收到服务端消息做出响应","link":"#浏览器接收到服务端消息做出响应","children":[]},{"level":3,"title":"对模块进行热更新或刷新页面","slug":"对模块进行热更新或刷新页面","link":"#对模块进行热更新或刷新页面","children":[]}],"git":{"updatedTime":1717653571000,"contributors":[{"name":"guoli","email":"guoli@zhihu.com","commits":1}]},"autoDesc":true,"filePathRelative":"Webpack-02-webpack中的HMR热更新原理剖析.md","excerpt":"<p>原文链接: <a href=\\"https://interview.poetries.top/principle-docs/webpack/02-webpack%E4%B8%AD%E7%9A%84HMR%E7%83%AD%E6%9B%B4%E6%96%B0%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90.html\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://interview.poetries.top/principle-docs/webpack/02-webpack%E4%B8%AD%E7%9A%84HMR%E7%83%AD%E6%9B%B4%E6%96%B0%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90.html</a></p>"}');export{v as comp,m as data};
