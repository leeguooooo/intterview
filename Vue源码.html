<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.13" />
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html,
      body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia('(prefers-color-scheme: dark)').matches
      if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
        document.documentElement.classList.toggle('dark', true)
      }
    </script>
    <title>面试题集锦</title><meta name="description" content="为软件开发者准备的面试题库">
    <link rel="preload" href="/assets/style-BcpPE8o3.css" as="style"><link rel="stylesheet" href="/assets/style-BcpPE8o3.css">
    <link rel="modulepreload" href="/assets/app-ByrCXkCX.js"><link rel="modulepreload" href="/assets/Vue源码.html-C76Wdzp2.js">
    <link rel="prefetch" href="/assets/ES6.html--vDxMAIP.js" as="script"><link rel="prefetch" href="/assets/JavaScript.html-B_IINo3D.js" as="script"><link rel="prefetch" href="/assets/index.html-BqeEb88D.js" as="script"><link rel="prefetch" href="/assets/Vue-VNode.html-bWbFkz06.js" as="script"><link rel="prefetch" href="/assets/Vue-有状态组件的设计.html-D9k4fkh0.js" as="script"><link rel="prefetch" href="/assets/Vue-渲染器之patch.html-De7kk-zV.js" as="script"><link rel="prefetch" href="/assets/Vue-渲染器之挂载.html-CLUsiMZo.js" as="script"><link rel="prefetch" href="/assets/Vue-渲染器的核心 Diff 算法.html-Kd7Gc9-d.js" as="script"><link rel="prefetch" href="/assets/Vue-组件的本质.html-9fq054JB.js" as="script"><link rel="prefetch" href="/assets/Vue-自定义渲染器和异步渲染.html-BXRTWXqS.js" as="script"><link rel="prefetch" href="/assets/Vue-辅助创建 VNode 的 h 函数.html-CsSpsRiB.js" as="script"><link rel="prefetch" href="/assets/css.html-C5QkqMQs.js" as="script"><link rel="prefetch" href="/assets/html.html-CT3j_kIP.js" as="script"><link rel="prefetch" href="/assets/http.html-BxYF67N_.js" as="script"><link rel="prefetch" href="/assets/node.html-7CC8qolG.js" as="script"><link rel="prefetch" href="/assets/react.html-V_aiufsY.js" as="script"><link rel="prefetch" href="/assets/uniapp.html-76x9qIvJ.js" as="script"><link rel="prefetch" href="/assets/vue.html-DSXIaruP.js" as="script"><link rel="prefetch" href="/assets/其他问题.html-DZ-JVPrZ.js" as="script"><link rel="prefetch" href="/assets/前端安全.html-BzPjuGOF.js" as="script"><link rel="prefetch" href="/assets/前端工程化.html-Crsu0hqW.js" as="script"><link rel="prefetch" href="/assets/基础篇.html-Bet0DQ2o.js" as="script"><link rel="prefetch" href="/assets/小程序.html-CghG-tTo.js" as="script"><link rel="prefetch" href="/assets/常用设计模式.html--IYfmiX-.js" as="script"><link rel="prefetch" href="/assets/性能优化.html-DMN4JE6N.js" as="script"><link rel="prefetch" href="/assets/手写篇.html-CC1J1Xv5.js" as="script"><link rel="prefetch" href="/assets/排序算法.html-GV2nLBkr.js" as="script"><link rel="prefetch" href="/assets/框架通识.html-CoDCvQ9g.js" as="script"><link rel="prefetch" href="/assets/浏览器.html-DETkVG22.js" as="script"><link rel="prefetch" href="/assets/移动多端开发.html-CmiHbJkp.js" as="script"><link rel="prefetch" href="/assets/综合题型.html-CdcCsPb9.js" as="script"><link rel="prefetch" href="/assets/计算机通识.html-C7zpHhE4.js" as="script"><link rel="prefetch" href="/assets/设计模式 2.html-BTuv14sN.js" as="script"><link rel="prefetch" href="/assets/进阶性能优化.html-DRGdN9Xz.js" as="script"><link rel="prefetch" href="/assets/进阶篇.html-BNIQP-Ao.js" as="script"><link rel="prefetch" href="/assets/面试指南.html-Mz9VCgfr.js" as="script"><link rel="prefetch" href="/assets/高频篇.html-7B8Yjn_g.js" as="script"><link rel="prefetch" href="/assets/高频考点.html-CZxd8yr9.js" as="script"><link rel="prefetch" href="/assets/react-setState.html-N-OaSelQ.js" as="script"><link rel="prefetch" href="/assets/404.html-N4C57djl.js" as="script"><link rel="prefetch" href="/assets/index.html-BrOUb-Xk.js" as="script"><link rel="prefetch" href="/assets/index.html-C4C7dUnk.js" as="script"><link rel="prefetch" href="/assets/index.html-CCahyWtJ.js" as="script"><link rel="prefetch" href="/assets/index.html-DXn6-4vn.js" as="script"><link rel="prefetch" href="/assets/index.html-DANaBLYU.js" as="script"><link rel="prefetch" href="/assets/index.html-CxwNayXa.js" as="script"><link rel="prefetch" href="/assets/index.html-GeNG-vJj.js" as="script"><link rel="prefetch" href="/assets/index.html-C9fN0ulj.js" as="script"><link rel="prefetch" href="/assets/index.html-CVVxRmmq.js" as="script"><link rel="prefetch" href="/assets/index.html-DtrIKE1j.js" as="script"><link rel="prefetch" href="/assets/index.html-BoXuFxP6.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container external-link-icon"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><img class="logo" src="/images/logo.webp" alt="面试题集锦"><span class="site-name can-hide" aria-hidden="true">面试题集锦</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide" aria-label="site navigation"><!--[--><div class="navbar-item"><a class="route-link auto-link" href="/" aria-label="首页"><!---->首页<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/%E5%9F%BA%E7%A1%80%E7%AF%87.html" aria-label="基础篇"><!---->基础篇<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/%E8%BF%9B%E9%98%B6%E7%AF%87.html" aria-label="进阶篇"><!---->进阶篇<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/%E9%AB%98%E9%A2%91%E7%AF%87.html" aria-label="高频篇"><!---->高频篇<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/HTML.html" aria-label="HTML"><!---->HTML<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/CSS.html" aria-label="CSS"><!---->CSS<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/JavaScript.html" aria-label="JavaScript"><!---->JavaScript<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/ES6.html" aria-label="ES6"><!---->ES6<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/%E6%B5%8F%E8%A7%88%E5%99%A8.html" aria-label="浏览器"><!---->浏览器<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/React.html" aria-label="React"><!---->React<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/Vue.html" aria-label="Vue"><!---->Vue<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/Node.html" aria-label="Node"><!---->Node<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96.html" aria-label="前端工程化"><!---->前端工程化<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/%E7%A7%BB%E5%8A%A8%E5%A4%9A%E7%AB%AF%E5%BC%80%E5%8F%91.html" aria-label="移动多端开发"><!---->移动多端开发<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html" aria-label="小程序"><!---->小程序<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/Uniapp.html" aria-label="Uniapp"><!---->Uniapp<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8.html" aria-label="前端安全"><!---->前端安全<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.html" aria-label="性能优化"><!---->性能优化<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/HTTP.html" aria-label="HTTP"><!---->HTTP<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/%E5%B8%B8%E7%94%A8%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html" aria-label="常用设计模式"><!---->常用设计模式<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%202.html" aria-label="设计模式 2"><!---->设计模式 2<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/%E6%A1%86%E6%9E%B6%E9%80%9A%E8%AF%86.html" aria-label="框架通识"><!---->框架通识<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95.html" aria-label="排序算法"><!---->排序算法<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E9%80%9A%E8%AF%86.html" aria-label="计算机通识"><!---->计算机通识<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/%E9%AB%98%E9%A2%91%E8%80%83%E7%82%B9.html" aria-label="高频考点"><!---->高频考点<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/%E9%9D%A2%E8%AF%95%E6%8C%87%E5%8D%97.html" aria-label="面试指南"><!---->面试指南<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/%E8%BF%9B%E9%98%B6%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.html" aria-label="进阶性能优化"><!---->进阶性能优化<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/%E6%89%8B%E5%86%99%E7%AF%87.html" aria-label="手写篇"><!---->手写篇<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/%E7%BB%BC%E5%90%88%E9%A2%98%E5%9E%8B.html" aria-label="综合题型"><!---->综合题型<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/%E5%85%B6%E4%BB%96%E9%97%AE%E9%A2%98.html" aria-label="其他问题"><!---->其他问题<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/article/" aria-label="文章"><!---->文章<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/category/" aria-label="分类"><!---->分类<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/tag/" aria-label="标签"><!---->标签<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/timeline/" aria-label="时间线"><!---->时间线<!----></a></div><div class="navbar-item"><a class="route-link route-link-active auto-link" href="/Vue%E6%BA%90%E7%A0%81.html" aria-label="Vue-生命周期"><!---->Vue-生命周期<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/Vue-%E7%BB%84%E4%BB%B6%E7%9A%84%E6%9C%AC%E8%B4%A8.html" aria-label="Vue-组件的本质"><!---->Vue-组件的本质<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/Vue-%E6%9C%89%E7%8A%B6%E6%80%81%E7%BB%84%E4%BB%B6%E7%9A%84%E8%AE%BE%E8%AE%A1.html" aria-label="Vue-有状态组件的设计"><!---->Vue-有状态组件的设计<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/Vue-VNode.html" aria-label="Vue-VNode"><!---->Vue-VNode<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/Vue-%E8%BE%85%E5%8A%A9%E5%88%9B%E5%BB%BA%20VNode%20%E7%9A%84%20h%20%E5%87%BD%E6%95%B0.html" aria-label="Vue-辅助创建 VNode 的 h 函数"><!---->Vue-辅助创建 VNode 的 h 函数<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/Vue-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B8%B2%E6%9F%93%E5%99%A8%E5%92%8C%E5%BC%82%E6%AD%A5%E6%B8%B2%E6%9F%93.html" aria-label="Vue-自定义渲染器和异步渲染"><!---->Vue-自定义渲染器和异步渲染<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/Vue-%E6%B8%B2%E6%9F%93%E5%99%A8%E4%B9%8B%E6%8C%82%E8%BD%BD.html" aria-label="Vue-渲染器之挂载"><!---->Vue-渲染器之挂载<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/Vue-%E6%B8%B2%E6%9F%93%E5%99%A8%E7%9A%84%E6%A0%B8%E5%BF%83%20Diff%20%E7%AE%97%E6%B3%95.html" aria-label="Vue-渲染器的核心 Diff 算法"><!---->Vue-渲染器的核心 Diff 算法<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/Vue-%E6%B8%B2%E6%9F%93%E5%99%A8%E4%B9%8Bpatch.html" aria-label="Vue-渲染器之patch"><!---->Vue-渲染器之patch<!----></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items" aria-label="site navigation"><!--[--><div class="navbar-item"><a class="route-link auto-link" href="/" aria-label="首页"><!---->首页<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/%E5%9F%BA%E7%A1%80%E7%AF%87.html" aria-label="基础篇"><!---->基础篇<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/%E8%BF%9B%E9%98%B6%E7%AF%87.html" aria-label="进阶篇"><!---->进阶篇<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/%E9%AB%98%E9%A2%91%E7%AF%87.html" aria-label="高频篇"><!---->高频篇<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/HTML.html" aria-label="HTML"><!---->HTML<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/CSS.html" aria-label="CSS"><!---->CSS<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/JavaScript.html" aria-label="JavaScript"><!---->JavaScript<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/ES6.html" aria-label="ES6"><!---->ES6<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/%E6%B5%8F%E8%A7%88%E5%99%A8.html" aria-label="浏览器"><!---->浏览器<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/React.html" aria-label="React"><!---->React<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/Vue.html" aria-label="Vue"><!---->Vue<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/Node.html" aria-label="Node"><!---->Node<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96.html" aria-label="前端工程化"><!---->前端工程化<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/%E7%A7%BB%E5%8A%A8%E5%A4%9A%E7%AB%AF%E5%BC%80%E5%8F%91.html" aria-label="移动多端开发"><!---->移动多端开发<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html" aria-label="小程序"><!---->小程序<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/Uniapp.html" aria-label="Uniapp"><!---->Uniapp<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/%E5%89%8D%E7%AB%AF%E5%AE%89%E5%85%A8.html" aria-label="前端安全"><!---->前端安全<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.html" aria-label="性能优化"><!---->性能优化<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/HTTP.html" aria-label="HTTP"><!---->HTTP<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/%E5%B8%B8%E7%94%A8%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html" aria-label="常用设计模式"><!---->常用设计模式<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%202.html" aria-label="设计模式 2"><!---->设计模式 2<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/%E6%A1%86%E6%9E%B6%E9%80%9A%E8%AF%86.html" aria-label="框架通识"><!---->框架通识<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95.html" aria-label="排序算法"><!---->排序算法<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E9%80%9A%E8%AF%86.html" aria-label="计算机通识"><!---->计算机通识<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/%E9%AB%98%E9%A2%91%E8%80%83%E7%82%B9.html" aria-label="高频考点"><!---->高频考点<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/%E9%9D%A2%E8%AF%95%E6%8C%87%E5%8D%97.html" aria-label="面试指南"><!---->面试指南<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/%E8%BF%9B%E9%98%B6%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.html" aria-label="进阶性能优化"><!---->进阶性能优化<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/%E6%89%8B%E5%86%99%E7%AF%87.html" aria-label="手写篇"><!---->手写篇<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/%E7%BB%BC%E5%90%88%E9%A2%98%E5%9E%8B.html" aria-label="综合题型"><!---->综合题型<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/%E5%85%B6%E4%BB%96%E9%97%AE%E9%A2%98.html" aria-label="其他问题"><!---->其他问题<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/article/" aria-label="文章"><!---->文章<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/category/" aria-label="分类"><!---->分类<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/tag/" aria-label="标签"><!---->标签<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/timeline/" aria-label="时间线"><!---->时间线<!----></a></div><div class="navbar-item"><a class="route-link route-link-active auto-link" href="/Vue%E6%BA%90%E7%A0%81.html" aria-label="Vue-生命周期"><!---->Vue-生命周期<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/Vue-%E7%BB%84%E4%BB%B6%E7%9A%84%E6%9C%AC%E8%B4%A8.html" aria-label="Vue-组件的本质"><!---->Vue-组件的本质<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/Vue-%E6%9C%89%E7%8A%B6%E6%80%81%E7%BB%84%E4%BB%B6%E7%9A%84%E8%AE%BE%E8%AE%A1.html" aria-label="Vue-有状态组件的设计"><!---->Vue-有状态组件的设计<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/Vue-VNode.html" aria-label="Vue-VNode"><!---->Vue-VNode<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/Vue-%E8%BE%85%E5%8A%A9%E5%88%9B%E5%BB%BA%20VNode%20%E7%9A%84%20h%20%E5%87%BD%E6%95%B0.html" aria-label="Vue-辅助创建 VNode 的 h 函数"><!---->Vue-辅助创建 VNode 的 h 函数<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/Vue-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B8%B2%E6%9F%93%E5%99%A8%E5%92%8C%E5%BC%82%E6%AD%A5%E6%B8%B2%E6%9F%93.html" aria-label="Vue-自定义渲染器和异步渲染"><!---->Vue-自定义渲染器和异步渲染<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/Vue-%E6%B8%B2%E6%9F%93%E5%99%A8%E4%B9%8B%E6%8C%82%E8%BD%BD.html" aria-label="Vue-渲染器之挂载"><!---->Vue-渲染器之挂载<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/Vue-%E6%B8%B2%E6%9F%93%E5%99%A8%E7%9A%84%E6%A0%B8%E5%BF%83%20Diff%20%E7%AE%97%E6%B3%95.html" aria-label="Vue-渲染器的核心 Diff 算法"><!---->Vue-渲染器的核心 Diff 算法<!----></a></div><div class="navbar-item"><a class="route-link auto-link" href="/Vue-%E6%B8%B2%E6%9F%93%E5%99%A8%E4%B9%8Bpatch.html" aria-label="Vue-渲染器之patch"><!---->Vue-渲染器之patch<!----></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading"> <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link auto-link sidebar-item" href="#基础知识" aria-label="基础知识"><!---->基础知识<!----></a><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link auto-link sidebar-item" href="#钩子函数" aria-label="钩子函数"><!---->钩子函数<!----></a><!----></li><li><a class="route-link auto-link sidebar-item" href="#beforecreate" aria-label="beforeCreate"><!---->beforeCreate<!----></a><!----></li><li><a class="route-link auto-link sidebar-item" href="#created" aria-label="created"><!---->created<!----></a><!----></li><li><a class="route-link auto-link sidebar-item" href="#beforemount" aria-label="beforeMount"><!---->beforeMount<!----></a><!----></li><li><a class="route-link auto-link sidebar-item" href="#mounted" aria-label="mounted"><!---->mounted<!----></a><!----></li><li><a class="route-link auto-link sidebar-item" href="#beforeupdate" aria-label="beforeUpdate"><!---->beforeUpdate<!----></a><!----></li><li><a class="route-link auto-link sidebar-item" href="#updated" aria-label="updated"><!---->updated<!----></a><!----></li><li><a class="route-link auto-link sidebar-item" href="#beforedestroy" aria-label="beforeDestroy"><!---->beforeDestroy<!----></a><!----></li><li><a class="route-link auto-link sidebar-item" href="#destroyed" aria-label="destroyed"><!---->destroyed<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link sidebar-item" href="#源码解读" aria-label="源码解读"><!---->源码解读<!----></a><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link auto-link sidebar-item" href="#beforecreate和created" aria-label="beforeCreate和created"><!---->beforeCreate和created<!----></a><!----></li><li><a class="route-link auto-link sidebar-item" href="#beforemount和mounted" aria-label="beforeMount和mounted"><!---->beforeMount和mounted<!----></a><!----></li><li><a class="route-link auto-link sidebar-item" href="#beforeupdate和updated" aria-label="beforeUpdate和updated"><!---->beforeUpdate和updated<!----></a><!----></li><li><a class="route-link auto-link sidebar-item" href="#beforedestroy和destroyed" aria-label="beforeDestroy和destroyed"><!---->beforeDestroy和destroyed<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link sidebar-item" href="#几种不常用的钩子" aria-label="几种不常用的钩子"><!---->几种不常用的钩子<!----></a><ul style="" class="sidebar-item-children"><!--[--><li><a class="route-link auto-link sidebar-item" href="#activated" aria-label="activated"><!---->activated<!----></a><!----></li><li><a class="route-link auto-link sidebar-item" href="#deactivated" aria-label="deactivated"><!---->deactivated<!----></a><!----></li><li><a class="route-link auto-link sidebar-item" href="#errorcaptured" aria-label="errorCaptured"><!---->errorCaptured<!----></a><!----></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><p>原文链接: <a href="https://interview.poetries.top/principle-docs/vue/01-%E4%BB%8E%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BBVue%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.html" target="_blank" rel="noopener noreferrer">https://interview.poetries.top/principle-docs/vue/01-%E4%BB%8E%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BBVue%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.html</a></p><h2 id="基础知识" tabindex="-1"><a class="header-anchor" href="#基础知识"><span>基础知识</span></a></h2><h3 id="钩子函数" tabindex="-1"><a class="header-anchor" href="#钩子函数"><span>钩子函数</span></a></h3><blockquote><p>其实和回调是一个概念，当系统执行到某处时，检查是否有<code>hook</code>(钩子)，有的话就会执行回调。</p></blockquote><p>通俗的说，<code>hook</code>就是在程序运行中，在某个特定的位置，框架的开发者设计好了一个钩子来告诉我们当前程序已经运行到特定的位置了，会触发一个回调函数，并提供给我们，让我们可以在生命周期的特定阶段进行相关业务代码的编写</p><p><strong>总的来说，Vue的生命周期可以分为以下八个阶段</strong></p><ul><li><code>beforeCreate</code> 实例创建前</li><li><code>created</code> 实例创建完成</li><li><code>beforeMount</code> 挂载前</li><li><code>mounted</code> 挂载完成</li><li><code>beforeUpdate</code> 更新前</li><li><code>updated</code> 更新完成</li><li><code>beforeDestory</code> 销毁前</li><li><code>destoryed</code> 销毁完成</li></ul><h3 id="beforecreate" tabindex="-1"><a class="header-anchor" href="#beforecreate"><span>beforeCreate</span></a></h3><blockquote><p>这个钩子是<code>new Vue()</code>之后触发的第一个钩子，在当前阶段中<code>data</code>、<code>methods</code>、<code>computed</code>以及<code>watch</code>上的数据和方法均不能被访问。</p></blockquote><h3 id="created" tabindex="-1"><a class="header-anchor" href="#created"><span>created</span></a></h3><blockquote><p>这个钩子在实例创建完成后发生，当前阶段已经完成了数据观测，也就是可以使用数据，更改数据，在这里更改数据不会触发<code>updated</code>函数。可以做一些初始数据的获取，在当前阶段无法与<code>Dom</code>进行交互，如果你非要想，可以通过<code>vm.$nextTick</code>来访问<code>Dom</code>。</p></blockquote><h3 id="beforemount" tabindex="-1"><a class="header-anchor" href="#beforemount"><span>beforeMount</span></a></h3><blockquote><p>这个钩子发生在挂载之前，在这之前<code>template</code>模板已导入渲染函数编译。而当前阶段虚拟<code>Dom</code>已经创建完成，即将开始渲染。在此时也可以对数据进行更改，不会触发<code>updated</code></p></blockquote><h3 id="mounted" tabindex="-1"><a class="header-anchor" href="#mounted"><span>mounted</span></a></h3><blockquote><p>这个钩子在挂载完成后发生，在当前阶段，真实的<code>Dom</code>挂载完毕，数据完成双向绑定，可以访问到<code>Dom</code>节点，使用<code>$refs</code>属性对<code>Dom</code>进行操作。也可以向后台发送请求，拿到返回数据</p></blockquote><h3 id="beforeupdate" tabindex="-1"><a class="header-anchor" href="#beforeupdate"><span>beforeUpdate</span></a></h3><blockquote><p>这个钩子发生在更新之前，也就是响应式数据发生更新，虚拟dom重新渲染之前被触发，你可以在当前阶段进行更改数据，不会造成重渲染</p></blockquote><h3 id="updated" tabindex="-1"><a class="header-anchor" href="#updated"><span>updated</span></a></h3><blockquote><p>这个钩子发生在更新完成之后，当前阶段组件Dom已完成更新。要注意的是避免在此期间更改数据，因为这可能会导致无限循环的更新</p></blockquote><h3 id="beforedestroy" tabindex="-1"><a class="header-anchor" href="#beforedestroy"><span>beforeDestroy</span></a></h3><blockquote><p>这个钩子发生在实例销毁之前，在当前阶段实例完全可以被使用，我们可以在这时进行善后收尾工作，比如清除计时器。</p></blockquote><h3 id="destroyed" tabindex="-1"><a class="header-anchor" href="#destroyed"><span>destroyed</span></a></h3><blockquote><p>这个钩子发生在实例销毁之后，这个时候只剩下了dom空壳。组件已被拆解，数据绑定被卸除，监听被移出，子实例也统统被销毁</p></blockquote><p><strong>注意点</strong></p><blockquote><p>在使用生命周期时有几点注意事项需要我们牢记</p></blockquote><p>1.除了<code>beforeCreate</code>和<code>created</code>钩子之外，其他钩子均在服务器端渲染期间不被调用。 2.上文曾提到过，在<code>updated</code>的时候千万不要去修改<code>data</code>里面赋值的数据，否则会导致死循环。 3.<code>Vue</code>的所有生命周期函数都是自动绑定到<code>this</code>的上下文上。所以，你这里使用箭头函数的话，就会出现<code>this</code>指向的父级作用域，就会报错。原因下面源码部分会讲解</p><h2 id="源码解读" tabindex="-1"><a class="header-anchor" href="#源码解读"><span>源码解读</span></a></h2><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line">    <span class="token comment">// src/core/instance/lifecycle.js</span></span>
<span class="line">    <span class="token comment">// callhook 函数的功能就是在当前vue组件实例中，调用某个生命周期钩子注册的所有回调函数。</span></span>
<span class="line">    <span class="token comment">// vm:Vue实例</span></span>
<span class="line">    <span class="token comment">// hook:生命周期名字</span></span>
<span class="line">    <span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">callHook</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">vm</span><span class="token operator">:</span> Component<span class="token punctuation">,</span> <span class="token literal-property property">hook</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token function">pushTarget</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token keyword">const</span> handlers <span class="token operator">=</span> vm<span class="token punctuation">.</span>$options<span class="token punctuation">[</span>hook<span class="token punctuation">]</span> </span>
<span class="line">      <span class="token comment">// 初始化合并 options 的过程 、，将各个生命周期函数合并到 options 里</span></span>
<span class="line">      <span class="token keyword">const</span> info <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>hook<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> hook</span><span class="token template-punctuation string">`</span></span></span>
<span class="line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>handlers<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> j <span class="token operator">=</span> handlers<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> j<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token function">invokeWithErrorHandling</span><span class="token punctuation">(</span>handlers<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> vm<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> vm<span class="token punctuation">,</span> info<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>vm<span class="token punctuation">.</span>_hasHookEvent<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        vm<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&#39;hook:&#39;</span> <span class="token operator">+</span> hook<span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">      <span class="token function">popTarget</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// src/core/util/error.js</span></span>
<span class="line">    <span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">invokeWithErrorHandling</span> <span class="token punctuation">(</span></span>
<span class="line">      <span class="token parameter"><span class="token literal-property property">handler</span><span class="token operator">:</span> Function<span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">context</span><span class="token operator">:</span> any<span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">args</span><span class="token operator">:</span> <span class="token keyword">null</span> <span class="token operator">|</span> any<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">vm</span><span class="token operator">:</span> any<span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">info</span><span class="token operator">:</span> string</span></span>
<span class="line">    <span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">let</span> res</span>
<span class="line">      <span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">        res <span class="token operator">=</span> args <span class="token operator">?</span> <span class="token function">handler</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">handler</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>res <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>res<span class="token punctuation">.</span>_isVue <span class="token operator">&amp;&amp;</span> <span class="token function">isPromise</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>res<span class="token punctuation">.</span>_handled<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">          res<span class="token punctuation">.</span>_handled <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">handleError</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> vm<span class="token punctuation">,</span> info<span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">      <span class="token keyword">return</span> res</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>我们从上面的代码中可以看到<code>callHook</code>中调用了<code>invokeWithErrorHandling</code>方法，在<code>invokeWithErrorHandling</code>方法中，使用了<code>apply</code>和<code>call</code>改变了<code>this</code>指向，而在箭头函数中<code>this</code>指向是无法改变的，所以我们在编写生命周期函数的时候不能使用箭头函数</p></blockquote><h3 id="beforecreate和created" tabindex="-1"><a class="header-anchor" href="#beforecreate和created"><span>beforeCreate和created</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line">    <span class="token comment">// src/core/instance/init</span></span>
<span class="line">    <span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">initMixin</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">Vue</span><span class="token operator">:</span> Class<span class="token operator">&lt;</span>Component<span class="token operator">&gt;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_init</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">options<span class="token operator">?</span><span class="token operator">:</span> Object</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">const</span> <span class="token literal-property property">vm</span><span class="token operator">:</span> Component <span class="token operator">=</span> <span class="token keyword">this</span></span>
<span class="line">        <span class="token operator">...</span></span>
<span class="line">        <span class="token comment">// 合并选项部分已省略</span></span>
<span class="line">        </span>
<span class="line">        <span class="token function">initLifecycle</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span>  </span>
<span class="line">        <span class="token comment">// 主要就是给vm对象添加了 $parent、$root、$children 属性，以及一些其它的生命周期相关的标识</span></span>
<span class="line">        <span class="token function">initEvents</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span> <span class="token comment">// 初始化事件相关的属性</span></span>
<span class="line">        <span class="token function">initRender</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span>  <span class="token comment">// vm 添加了一些虚拟 dom、slot 等相关的属性和方法</span></span>
<span class="line">        <span class="token function">callHook</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> <span class="token string">&#39;beforeCreate&#39;</span><span class="token punctuation">)</span>  <span class="token comment">// 调用 beforeCreate 钩子</span></span>
<span class="line">        <span class="token comment">//下面 initInjections(vm) 和 initProvide(vm) 两个配套使用，用于将父组件 _provided 中定义的值，通过 inject 注入到子组件，且这些属性不会被观察</span></span>
<span class="line">        <span class="token function">initInjections</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span> </span>
<span class="line">        <span class="token function">initState</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span>   <span class="token comment">// props、methods、data、watch、computed等数据初始化</span></span>
<span class="line">        <span class="token function">initProvide</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span> </span>
<span class="line">        <span class="token function">callHook</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> <span class="token string">&#39;created&#39;</span><span class="token punctuation">)</span>  <span class="token comment">// 调用 created 钩子</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// src/core/instance/state</span></span>
<span class="line">    <span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">initState</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">vm</span><span class="token operator">:</span> Component</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      vm<span class="token punctuation">.</span>_watchers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span>
<span class="line">      <span class="token keyword">const</span> opts <span class="token operator">=</span> vm<span class="token punctuation">.</span>$options</span>
<span class="line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>opts<span class="token punctuation">.</span>props<span class="token punctuation">)</span> <span class="token function">initProps</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> opts<span class="token punctuation">.</span>props<span class="token punctuation">)</span></span>
<span class="line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>opts<span class="token punctuation">.</span>methods<span class="token punctuation">)</span> <span class="token function">initMethods</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> opts<span class="token punctuation">.</span>methods<span class="token punctuation">)</span></span>
<span class="line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>opts<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">initData</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">observe</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>_data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">true</span> <span class="token comment">/* asRootData */</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>opts<span class="token punctuation">.</span>computed<span class="token punctuation">)</span> <span class="token function">initComputed</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> opts<span class="token punctuation">.</span>computed<span class="token punctuation">)</span></span>
<span class="line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>opts<span class="token punctuation">.</span>watch <span class="token operator">&amp;&amp;</span> opts<span class="token punctuation">.</span>watch <span class="token operator">!==</span> nativeWatch<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">initWatch</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> opts<span class="token punctuation">.</span>watch<span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>我们可以看到<code>beforeCreate</code>钩子调用是在<code>initState</code>之前的，而从上面的第二段代码我们可以看出<code>initState</code>的作用是对<code>props</code>、<code>methods</code>、<code>data</code>、<code>computed</code>、<code>watch</code>等属性做初始化处理。</li><li>通过阅读源码，我们更加清楚的明白了在beforeCreate钩子的时候我们没有对<code>props</code>、<code>methods</code>、<code>data</code>、<code>computed</code>、<code>watch</code>上的数据的访问权限。在<code>created</code>中才可以</li></ul><h3 id="beforemount和mounted" tabindex="-1"><a class="header-anchor" href="#beforemount和mounted"><span>beforeMount和mounted</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line">    <span class="token comment">// mountComponent 核心就是先实例化一个渲染Watcher</span></span>
<span class="line">    <span class="token comment">// 在它的回调函数中会调用 updateComponent 方法</span></span>
<span class="line">    <span class="token comment">// 两个核心方法 vm._render(生成虚拟Dom) 和 vm._update(映射到真实Dom)</span></span>
<span class="line">    <span class="token comment">// src/core/instance/lifecycle</span></span>
<span class="line">    <span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">mountComponent</span> <span class="token punctuation">(</span></span>
<span class="line">      <span class="token parameter"><span class="token literal-property property">vm</span><span class="token operator">:</span> Component<span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token operator">?</span>Element<span class="token punctuation">,</span></span>
<span class="line">      hydrating<span class="token operator">?</span><span class="token operator">:</span> boolean</span></span>
<span class="line">    <span class="token punctuation">)</span><span class="token operator">:</span> Component <span class="token punctuation">{</span></span>
<span class="line">      vm<span class="token punctuation">.</span>$el <span class="token operator">=</span> el</span>
<span class="line">      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>vm<span class="token punctuation">.</span>$options<span class="token punctuation">.</span>render<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        vm<span class="token punctuation">.</span>$options<span class="token punctuation">.</span>render <span class="token operator">=</span> createEmptyVNode</span>
<span class="line">        <span class="token operator">...</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">      <span class="token function">callHook</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> <span class="token string">&#39;beforeMount&#39;</span><span class="token punctuation">)</span>  <span class="token comment">// 调用 beforeMount 钩子</span></span>
<span class="line">    </span>
<span class="line">      <span class="token keyword">let</span> updateComponent</span>
<span class="line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">&#39;production&#39;</span> <span class="token operator">&amp;&amp;</span> config<span class="token punctuation">.</span>performance <span class="token operator">&amp;&amp;</span> mark<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function-variable function">updateComponent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 将虚拟 Dom 映射到真实 Dom 的函数。</span></span>
<span class="line">        <span class="token comment">// vm._update 之前会先调用 vm._render() 函数渲染 VNode</span></span>
<span class="line">          <span class="token operator">...</span></span>
<span class="line">          <span class="token keyword">const</span> vnode <span class="token operator">=</span> vm<span class="token punctuation">.</span><span class="token function">_render</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">          <span class="token operator">...</span></span>
<span class="line">          vm<span class="token punctuation">.</span><span class="token function">_update</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> hydrating<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function-variable function">updateComponent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">          vm<span class="token punctuation">.</span><span class="token function">_update</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span><span class="token function">_render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> hydrating<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">      <span class="token keyword">new</span> <span class="token class-name">Watcher</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> updateComponent<span class="token punctuation">,</span> noop<span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">before</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">         <span class="token comment">// 先判断是否 mouted 完成 并且没有被 destroyed</span></span>
<span class="line">          <span class="token keyword">if</span> <span class="token punctuation">(</span>vm<span class="token punctuation">.</span>_isMounted <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>vm<span class="token punctuation">.</span>_isDestroyed<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token function">callHook</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> <span class="token string">&#39;beforeUpdate&#39;</span><span class="token punctuation">)</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">true</span> <span class="token comment">/* isRenderWatcher */</span><span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>vm<span class="token punctuation">.</span>$vnode <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        vm<span class="token punctuation">.</span>_isMounted <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line">        <span class="token function">callHook</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> <span class="token string">&#39;mounted&#39;</span><span class="token punctuation">)</span>  <span class="token comment">//调用 mounted 钩子</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">      <span class="token keyword">return</span> vm</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>通过上面的代码，我们可以看出在执行<code>vm._render()</code>函数渲染<code>VNode</code>之前，执行了 <code>beforeMount</code>钩子函数，在执行完 <code>vm._update()</code> 把<code>VNode patch</code>到真实Dom后，执行 <code>mouted</code>钩子。也就明白了为什么直到<code>mounted</code>阶段才名正言顺的拿到了Dom</p></blockquote><h3 id="beforeupdate和updated" tabindex="-1"><a class="header-anchor" href="#beforeupdate和updated"><span>beforeUpdate和updated</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line">      <span class="token comment">// src/core/instance/lifecycle</span></span>
<span class="line">     <span class="token keyword">new</span> <span class="token class-name">Watcher</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> updateComponent<span class="token punctuation">,</span> noop<span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">before</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">         <span class="token comment">// 先判断是否 mouted 完成 并且没有被 destroyed</span></span>
<span class="line">          <span class="token keyword">if</span> <span class="token punctuation">(</span>vm<span class="token punctuation">.</span>_isMounted <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>vm<span class="token punctuation">.</span>_isDestroyed<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token function">callHook</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> <span class="token string">&#39;beforeUpdate&#39;</span><span class="token punctuation">)</span>  <span class="token comment">// 调用 beforeUpdate 钩子</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">true</span> <span class="token comment">/* isRenderWatcher */</span><span class="token punctuation">)</span></span>
<span class="line">     </span>
<span class="line">     <span class="token comment">// src/core/observer/scheduler </span></span>
<span class="line">     <span class="token keyword">function</span> <span class="token function">callUpdatedHooks</span> <span class="token punctuation">(</span><span class="token parameter">queue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">       <span class="token keyword">let</span> i <span class="token operator">=</span> queue<span class="token punctuation">.</span>length</span>
<span class="line">       <span class="token keyword">while</span> <span class="token punctuation">(</span>i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">         <span class="token keyword">const</span> watcher <span class="token operator">=</span> queue<span class="token punctuation">[</span>i<span class="token punctuation">]</span></span>
<span class="line">         <span class="token keyword">const</span> vm <span class="token operator">=</span> watcher<span class="token punctuation">.</span>vm</span>
<span class="line">         <span class="token keyword">if</span> <span class="token punctuation">(</span>vm<span class="token punctuation">.</span>_watcher <span class="token operator">===</span> watcher <span class="token operator">&amp;&amp;</span> vm<span class="token punctuation">.</span>_isMounted <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>vm<span class="token punctuation">.</span>_isDestroyed<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">           <span class="token comment">// 只有满足当前 watcher 为 vm._watcher（也就是当前的渲染watcher）</span></span>
<span class="line">           <span class="token comment">// 以及组件已经 mounted 并且没有被 destroyed 才会执行 updated 钩子函数。</span></span>
<span class="line">           <span class="token function">callHook</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> <span class="token string">&#39;updated&#39;</span><span class="token punctuation">)</span>  <span class="token comment">// 调用 updated 钩子</span></span>
<span class="line">           <span class="token punctuation">}</span></span>
<span class="line">         <span class="token punctuation">}</span></span>
<span class="line">       <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>第一段代码就是在<code>beforeMount</code>和<code>mounted</code>钩子中间出现的，那么<code>watcher</code>中究竟做了些什么呢？</li><li>第二段代码的<code>callUpdatedHooks</code>函数中什么时候才可以满足条件并执行<code>updated</code>呢？我们来接着往下看。</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line">    <span class="token comment">// src/instance/observer/watcher.js</span></span>
<span class="line">    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Watcher</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token operator">...</span></span>
<span class="line">      <span class="token function">constructor</span> <span class="token punctuation">(</span></span>
<span class="line">        <span class="token literal-property property">vm</span><span class="token operator">:</span> Component<span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">expOrFn</span><span class="token operator">:</span> string <span class="token operator">|</span> Function<span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">cb</span><span class="token operator">:</span> Function<span class="token punctuation">,</span></span>
<span class="line">        options<span class="token operator">?</span><span class="token operator">:</span> <span class="token operator">?</span>Object<span class="token punctuation">,</span></span>
<span class="line">        <span class="token comment">// 在它的构造函数里会判断 isRenderWatcher，</span></span>
<span class="line">        <span class="token comment">// 接着把当前 watcher 的实例赋值给 vm._watcher</span></span>
<span class="line">        isRenderWatcher<span class="token operator">?</span><span class="token operator">:</span> boolean</span>
<span class="line">      <span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 还把当前 wathcer 实例 push 到 vm._watchers 中，</span></span>
<span class="line">        <span class="token comment">// vm._watcher 是专门用来监听 vm 上数据变化然后重新渲染的，</span></span>
<span class="line">        <span class="token comment">// 所以它是一个渲染相关的 watcher，因此在 callUpdatedHooks 函数中，</span></span>
<span class="line">        <span class="token comment">// 只有 vm._watcher 的回调执行完毕后，才会执行 updated 钩子函数</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>vm <span class="token operator">=</span> vm</span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>isRenderWatcher<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">          vm<span class="token punctuation">.</span>_watcher <span class="token operator">=</span> <span class="token keyword">this</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        vm<span class="token punctuation">.</span>_watchers<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token operator">...</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>看到这里我们明白了<code>Vue</code>是通过<code>watcher</code>来监听实例上的数据变化，进而控制渲染流程</p></blockquote><h3 id="beforedestroy和destroyed" tabindex="-1"><a class="header-anchor" href="#beforedestroy和destroyed"><span>beforeDestroy和destroyed</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line">      <span class="token comment">// src/core/instance/lifecycle.js</span></span>
<span class="line">      <span class="token comment">// 在 $destroy 的执行过程中，它会执行 vm.__patch__(vm._vnode, null)</span></span>
<span class="line">      <span class="token comment">// 触发它子组件的销毁钩子函数，这样一层层的递归调用，</span></span>
<span class="line">      <span class="token comment">// 所以 destroy 钩子函数执行顺序是先子后父，和 mounted 过程一样。</span></span>
<span class="line">      <span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">$destroy</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">const</span> <span class="token literal-property property">vm</span><span class="token operator">:</span> Component <span class="token operator">=</span> <span class="token keyword">this</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>vm<span class="token punctuation">.</span>_isBeingDestroyed<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token keyword">return</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token function">callHook</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> <span class="token string">&#39;beforeDestroy&#39;</span><span class="token punctuation">)</span>  <span class="token comment">// 调用 beforeDestroy 钩子</span></span>
<span class="line">        vm<span class="token punctuation">.</span>_isBeingDestroyed <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line">        <span class="token comment">// 一些销毁工作</span></span>
<span class="line">        <span class="token keyword">const</span> parent <span class="token operator">=</span> vm<span class="token punctuation">.</span>$parent</span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>parent <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>parent<span class="token punctuation">.</span>_isBeingDestroyed <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>vm<span class="token punctuation">.</span>$options<span class="token punctuation">.</span>abstract<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token function">remove</span><span class="token punctuation">(</span>parent<span class="token punctuation">.</span>$children<span class="token punctuation">,</span> vm<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token comment">// 拆卸 watchers</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>vm<span class="token punctuation">.</span>_watcher<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">          vm<span class="token punctuation">.</span>_watcher<span class="token punctuation">.</span><span class="token function">teardown</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token keyword">let</span> i <span class="token operator">=</span> vm<span class="token punctuation">.</span>_watchers<span class="token punctuation">.</span>length</span>
<span class="line">        <span class="token keyword">while</span> <span class="token punctuation">(</span>i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">          vm<span class="token punctuation">.</span>_watchers<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">teardown</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token operator">...</span></span>
<span class="line">        vm<span class="token punctuation">.</span>_isDestroyed <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line">        <span class="token comment">// 调用当前 rendered tree 上的 destroy 钩子</span></span>
<span class="line">        <span class="token comment">// 发现子组件，会先去销毁子组件</span></span>
<span class="line">        vm<span class="token punctuation">.</span><span class="token function">__patch__</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>_vnode<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token function">callHook</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> <span class="token string">&#39;destroyed&#39;</span><span class="token punctuation">)</span>  <span class="token comment">// 调用 destroyed 钩子</span></span>
<span class="line">        <span class="token comment">// 关闭所有实例侦听器。</span></span>
<span class="line">        vm<span class="token punctuation">.</span><span class="token function">$off</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token comment">// 删除 __vue__ 引用</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>vm<span class="token punctuation">.</span>$el<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">          vm<span class="token punctuation">.</span>$el<span class="token punctuation">.</span>__vue__ <span class="token operator">=</span> <span class="token keyword">null</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token comment">// 释放循环引用</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>vm<span class="token punctuation">.</span>$vnode<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">          vm<span class="token punctuation">.</span>$vnode<span class="token punctuation">.</span>parent <span class="token operator">=</span> <span class="token keyword">null</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>通过上面的代码，我们了解了组件销毁阶段的拆卸过程，其中会执行一个<code>__patch__</code>函数</li><li>除了这八种钩子外，我们在官网也可以查阅到另外几种不常用的钩子，这里列举出来</li></ul><h2 id="几种不常用的钩子" tabindex="-1"><a class="header-anchor" href="#几种不常用的钩子"><span>几种不常用的钩子</span></a></h2><h3 id="activated" tabindex="-1"><a class="header-anchor" href="#activated"><span>activated</span></a></h3><blockquote><p><code>keep-alive</code> 组件激活时调用，该钩子在服务器端渲染期间不被调用。</p></blockquote><h3 id="deactivated" tabindex="-1"><a class="header-anchor" href="#deactivated"><span>deactivated</span></a></h3><blockquote><p><code>keep-alive</code> 组件停用时调用，该钩子在服务器端渲染期间不被调用。</p></blockquote><h3 id="errorcaptured" tabindex="-1"><a class="header-anchor" href="#errorcaptured"><span>errorCaptured</span></a></h3><ul><li>当捕获一个来自子孙组件的错误时被调用。此钩子会收到三个参数：错误对象、发生错误的组件实例以及一个包含错误来源信息的字符串。此钩子可以返回 <code>false</code> 以阻止该错误继续向上传播</li><li>你可以在此钩子中修改组件的状态。因此在模板或渲染函数中设置其它内容的短路条件非常重要，它可以防止当一个错误被捕获时该组件进入一个无限的渲染循环。</li></ul><p>阅读全文</p></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: guoli@zhihu.com">guoli</span><!----><!--]--><!--]--></span></div></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-ByrCXkCX.js" defer></script>
  </body>
</html>
